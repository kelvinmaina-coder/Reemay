<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="description" content="Kagema School Management System">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="school management system, student records, academics, assessment">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kagema Primary School - Integrated Management System</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2E7D32;
            --primary-dark: #1B5E20;
            --primary-light: #4CAF50;
            --secondary: #1565C0;
            --accent: #FFB300;
            --background: #F5F5F5;
            --text: #212121;
            --text-light: #757575;
            --white: #FFFFFF;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
            --info: #2196F3;
            --border: #E0E0E0;
            --shadow: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-lg: 0 4px 8px rgba(0,0,0,0.15);
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
        }

        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 400px;
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-logo {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .login-header h1 {
            color: var(--primary);
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .login-header p {
            color: var(--text-light);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-info {
            background: var(--info);
            color: white;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.9rem;
        }

        .btn-lg {
            padding: 14px 28px;
            font-size: 1.1rem;
        }

        /* Main Dashboard */
        .dashboard {
            display: none;
        }

        .dashboard.active {
            display: flex;
        }

        .sidebar {
            width: 250px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            min-height: 100vh;
            padding: 20px;
            overflow-y: auto;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 1000;
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255,255,255,0.2);
        }

        .sidebar-header h2 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .user-profile-sidebar {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }

        .user-role {
            font-size: 0.85rem;
            opacity: 0.8;
            margin-top: 5px;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin: 10px 0;
        }

        .nav-link {
            display: block;
            color: white;
            text-decoration: none;
            padding: 12px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            font-size: 0.95rem;
            cursor: pointer;
        }

        .nav-link:hover, .nav-link.active {
            background-color: rgba(255,255,255,0.2);
            padding-left: 20px;
        }

        .main-content {
            margin-left: 250px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .topbar {
            background: white;
            padding: 15px 30px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .topbar-left {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
        }

        .topbar-right {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--background);
            padding: 8px 15px;
            border-radius: 20px;
        }

        .content {
            padding: 30px;
            flex: 1;
            overflow-y: auto;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--background);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text);
        }

        /* KPI Grid */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .kpi-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
        }

        .kpi-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .kpi-label {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 5px;
        }

        /* Tables */
        .table-responsive {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: var(--background);
            padding: 12px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid var(--border);
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        tr:hover {
            background: var(--background);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .badge-success {
            background: #c8e6c9;
            color: var(--success);
        }

        .badge-warning {
            background: #ffe0b2;
            color: #e65100;
        }

        .badge-danger {
            background: #ffcdd2;
            color: var(--danger);
        }

        .badge-info {
            background: #bbdefb;
            color: var(--secondary);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--background);
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
        }

        /* Section Content */
        .section-content {
            display: none;
        }

        .section-content.active {
            display: block;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                min-height: auto;
                position: relative;
            }

            .main-content {
                margin-left: 0;
            }

            .topbar {
                flex-direction: column;
                gap: 15px;
            }

            .kpi-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Alerts */
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background: #c8e6c9;
            color: var(--success);
            border-left: 4px solid var(--success);
        }

        .alert-warning {
            background: #ffe0b2;
            color: #e65100;
            border-left: 4px solid #e65100;
        }

        .alert-danger {
            background: #ffcdd2;
            color: var(--danger);
            border-left: 4px solid var(--danger);
        }

        .alert-info {
            background: #bbdefb;
            color: var(--secondary);
            border-left: 4px solid var(--secondary);
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid var(--background);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Utility Classes */
        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .d-flex {
            display: flex;
        }

        .gap-10 {
            gap: 10px;
        }

        .flex-between {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .hidden {
            display: none;
        }

        .text-muted {
            color: var(--text-light);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border);
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-light);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-button:hover {
            color: var(--primary);
        }

        .tab-button.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Search Bar */
        .search-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-bar input,
        .search-bar select {
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 5px;
            font-size: 0.95rem;
        }

        .search-bar input {
            flex: 1;
        }

        /* Professional Role Badges */
        .role-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-right: 5px;
        }

        .role-admin {
            background: #fff3e0;
            color: #e65100;
        }

        .role-teacher {
            background: #e3f2fd;
            color: var(--secondary);
        }

        .role-secretary {
            background: #f3e5f5;
            color: #8e24aa;
        }

        .role-bursar {
            background: #fff3e0;
            color: #e65100;
        }

        .role-dht {
            background: #e8f5e9;
            color: var(--success);
        }

        .role-headteacher {
            background: #fce4ec;
            color: #c2185b;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--text);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 5px;
            font-size: 1rem;
            font-family: inherit;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }

        /* Grade Display */
        .grade-display {
            font-size: 1.5rem;
            font-weight: 700;
            padding: 10px 15px;
            border-radius: 5px;
            text-align: center;
            background: var(--background);
        }

        .grade-display.excellent {
            color: var(--success);
            background: #c8e6c9;
        }

        .grade-display.good {
            color: var(--secondary);
            background: #bbdefb;
        }

        .grade-display.fair {
            color: #ff9800;
            background: #ffe0b2;
        }

        .grade-display.poor {
            color: var(--danger);
            background: #ffcdd2;
        }

        /* Subject Score Entry */
        .score-entry-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 10px;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid var(--border);
        }

        .score-entry-row input {
            width: 100%;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: white;
            border-radius: 5px;
            box-shadow: var(--shadow-lg);
            z-index: 9999;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>

<!-- LOGIN PAGE -->
<div id="loginPage" class="login-container">
    <div class="login-box">
        <div class="login-header">
            <div class="login-logo">üéì</div>
            <h1>KAGEMA</h1>
            <p>School Management System</p>
        </div>
        
        <form id="loginForm" onsubmit="handleLogin(event)">
            <div class="form-group">
                <label>Username / Email</label>
                <input type="text" class="form-control" id="loginUsername" required placeholder="Enter your username">
            </div>
            
            <div class="form-group">
                <label>Password</label>
                <input type="password" class="form-control" id="loginPassword" required placeholder="Enter your password">
            </div>
            
            <div class="form-group">
                <label>Role / Position</label>
                <select class="form-control" id="loginRole" required>
                    <option value="">-- Select Your Role --</option>
                    <option value="admin">Administrator</option>
                    <option value="teacher">Teacher</option>
                    <option value="secretary">Secretary</option>
                    <option value="bursar">Bursar</option>
                    <option value="dht">Deputy Head Teacher</option>
                    <option value="headteacher">Head Teacher</option>
                </select>
            </div>
            
            <button type="submit" class="btn btn-primary">LOGIN</button>
            
            <div style="margin-top: 20px; text-align: center; font-size: 0.9rem;">
                <p class="text-muted">Demo Credentials:</p>
                <p><strong>Admin:</strong> admin / admin123</p>
                <p><strong>Teacher:</strong> teacher / teacher123</p>
            </div>
        </form>
    </div>
</div>

<!-- MAIN DASHBOARD -->
<div id="mainDashboard" class="dashboard">
    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>üéì KAGEMA</h2>
            <p>School System v2.0</p>
        </div>
        
        <div class="user-profile-sidebar">
            <div id="userDisplayName" style="font-weight: 700;">Admin User</div>
            <div id="userDisplayRole" class="user-role">Administrator</div>
        </div>
        
        <!-- ADMIN MENU -->
        <div id="adminMenu">
            <h4 style="font-size: 0.85rem; margin: 20px 0 10px 0; opacity: 0.7;">ADMINISTRATION</h4>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" onclick="showSection('dashboard')">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('users')">
                        <i class="fas fa-users-cog"></i> User Management
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('students')">
                        <i class="fas fa-users"></i> Students
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('staff')">
                        <i class="fas fa-chalkboard-user"></i> Staff
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('academics')">
                        <i class="fas fa-book"></i> Academics
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('assessments')">
                        <i class="fas fa-pen-to-square"></i> Assessments
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('finance')">
                        <i class="fas fa-coins"></i> Finance
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('reports')">
                        <i class="fas fa-chart-bar"></i> Reports
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('communication')">
                        <i class="fas fa-comments"></i> Communication
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('inventory')">
                        <i class="fas fa-box"></i> Inventory
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('transport')">
                        <i class="fas fa-bus"></i> Transport
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('hostel')">
                        <i class="fas fa-bed"></i> Hostel
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('settings')">
                        <i class="fas fa-cog"></i> Settings
                    </a>
                </li>
            </ul>
        </div>

        <!-- TEACHER MENU -->
        <div id="teacherMenu" style="display: none;">
            <h4 style="font-size: 0.85rem; margin: 20px 0 10px 0; opacity: 0.7;">TEACHING</h4>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" onclick="showSection('dashboard')">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('myStudents')">
                        <i class="fas fa-users"></i> My Students
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('gradeEntry')">
                        <i class="fas fa-pen-to-square"></i> Grade Entry
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('attendance')">
                        <i class="fas fa-clipboard-check"></i> Attendance
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('assessments')">
                        <i class="fas fa-tasks"></i> Assessments
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('studentReports')">
                        <i class="fas fa-file-alt"></i> Student Reports
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('communication')">
                        <i class="fas fa-comments"></i> Messages
                    </a>
                </li>
            </ul>
        </div>

        <!-- SECRETARY MENU -->
        <div id="secretaryMenu" style="display: none;">
            <h4 style="font-size: 0.85rem; margin: 20px 0 10px 0; opacity: 0.7;">ADMIN</h4>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" onclick="showSection('dashboard')">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('students')">
                        <i class="fas fa-users"></i> Students
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('staff')">
                        <i class="fas fa-chalkboard-user"></i> Staff
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('communication')">
                        <i class="fas fa-envelope"></i> Communications
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('documents')">
                        <i class="fas fa-file"></i> Documents
                    </a>
                </li>
            </ul>
        </div>

        <!-- BURSAR MENU -->
        <div id="bursarMenu" style="display: none;">
            <h4 style="font-size: 0.85rem; margin: 20px 0 10px 0; opacity: 0.7;">FINANCE</h4>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" onclick="showSection('dashboard')">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('finance')">
                        <i class="fas fa-coins"></i> Finance
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('feeCollection')">
                        <i class="fas fa-receipt"></i> Fee Collection
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('payments')">
                        <i class="fas fa-money-check"></i> Payments
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('reports')">
                        <i class="fas fa-chart-bar"></i> Reports
                    </a>
                </li>
            </ul>
        </div>

        <!-- LOGOUT -->
        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
            <button class="nav-link" onclick="logout()" style="width: 100%; text-align: left;">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <div class="main-content">
        <!-- TOPBAR -->
        <div class="topbar">
            <div class="topbar-left">Kagema Primary Junior Secondary</div>
            <div class="topbar-right">
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <div>
                        <div id="topbarName">Admin User</div>
                        <div id="topbarRole" style="font-size: 0.8rem; color: var(--text-light);">Administrator</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTENT AREA -->
        <div class="content">
            <div id="alertContainer"></div>

            <!-- DASHBOARD SECTION -->
            <section id="dashboard" class="section-content active">
                <h2 style="margin-bottom: 20px;">üìä Dashboard</h2>
                
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-value">1,247</div>
                        <div class="kpi-label">Total Students</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-value">52</div>
                        <div class="kpi-label">Active Teachers</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-value">87.3%</div>
                        <div class="kpi-label">Fee Collection</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-value">94%</div>
                        <div class="kpi-label">Attendance Rate</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Recent Admissions</h3>
                        </div>
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Admission No</th>
                                        <th>Class</th>
                                        <th>Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Akinyi Otieno</td>
                                        <td>2023/001</td>
                                        <td>Grade 7 East</td>
                                        <td>15 Jan 2023</td>
                                    </tr>
                                    <tr>
                                        <td>Kamau James</td>
                                        <td>2023/002</td>
                                        <td>Grade 7 West</td>
                                        <td>15 Jan 2023</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Fee Collection Status</h3>
                        </div>
                        <div style="padding: 20px;">
                            <div style="margin-bottom: 10px; display: flex; justify-content: space-between;">
                                <span>Expected: KES 3.5M</span>
                                <span>Collected: KES 2.4M</span>
                            </div>
                            <div style="background: var(--background); height: 10px; border-radius: 5px;">
                                <div style="width: 68%; background: var(--success); height: 100%; border-radius: 5px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- USER MANAGEMENT SECTION -->
            <section id="users" class="section-content">
                <h2 style="margin-bottom: 20px;">üë• User Management</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>System Users</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('addUserModal')">+ Add User</button>
                    </div>
                    
                    <div class="search-bar">
                        <input type="text" placeholder="Search by name or email..." onkeyup="filterUsers(this.value)">
                        <select onchange="filterUsersByRole(this.value)">
                            <option value="">All Roles</option>
                            <option value="admin">Administrator</option>
                            <option value="teacher">Teacher</option>
                            <option value="secretary">Secretary</option>
                            <option value="bursar">Bursar</option>
                            <option value="dht">Deputy Head Teacher</option>
                            <option value="headteacher">Head Teacher</option>
                        </select>
                    </div>

                    <div class="table-responsive">
                        <table id="usersTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Professional ID</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Mr. Omondi</td>
                                    <td>omondi@kagema.ac.ke</td>
                                    <td><span class="role-badge role-headteacher">Head Teacher</span></td>
                                    <td>TSC: 0123456</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-secondary" onclick="editUser('1')">Edit</button>
                                        <button class="btn btn-sm btn-danger" onclick="deleteUser('1')">Delete</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Mrs. Atieno</td>
                                    <td>atieno@kagema.ac.ke</td>
                                    <td><span class="role-badge role-teacher">Teacher</span></td>
                                    <td>TSC: 0123457</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-secondary" onclick="editUser('2')">Edit</button>
                                        <button class="btn btn-sm btn-danger" onclick="deleteUser('2')">Delete</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Mr. Kipchoge</td>
                                    <td>kipchoge@kagema.ac.ke</td>
                                    <td><span class="role-badge role-teacher">Teacher</span></td>
                                    <td>TSC: 0123458</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-secondary" onclick="editUser('3')">Edit</button>
                                        <button class="btn btn-sm btn-danger" onclick="deleteUser('3')">Delete</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Ms. Wanjiru</td>
                                    <td>wanjiru@kagema.ac.ke</td>
                                    <td><span class="role-badge role-bursar">Bursar</span></td>
                                    <td>BUR: 0001</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-secondary" onclick="editUser('4')">Edit</button>
                                        <button class="btn btn-sm btn-danger" onclick="deleteUser('4')">Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- STUDENTS SECTION -->
            <section id="students" class="section-content">
                <h2 style="margin-bottom: 20px;">üë®‚Äçüéì Students</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Student Management</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('addStudentModal')">+ Add Student</button>
                    </div>

                    <div class="search-bar">
                        <input type="text" placeholder="Search by name, admission, or UPI..." onkeyup="filterStudents(this.value)">
                        <select onchange="filterByClass(this.value)">
                            <option value="">All Classes</option>
                            <option value="Grade 7">Grade 7</option>
                            <option value="Grade 8">Grade 8</option>
                            <option value="Grade 9">Grade 9</option>
                        </select>
                    </div>

                    <div class="table-responsive">
                        <table id="studentsTable">
                            <thead>
                                <tr>
                                    <th>Admission No</th>
                                    <th>Name</th>
                                    <th>Class</th>
                                    <th>UPI</th>
                                    <th>DOB</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2023/001</td>
                                    <td>Akinyi Otieno</td>
                                    <td>Grade 7</td>
                                    <td>4567890123</td>
                                    <td>12/06/2012</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-secondary" onclick="viewStudentProfile('2023/001')">View</button>
                                        <button class="btn btn-sm btn-warning" onclick="editStudent('2023/001')">Edit</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2023/002</td>
                                    <td>Kamau James</td>
                                    <td>Grade 7</td>
                                    <td>4567890124</td>
                                    <td>08/03/2012</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-secondary" onclick="viewStudentProfile('2023/002')">View</button>
                                        <button class="btn btn-sm btn-warning" onclick="editStudent('2023/002')">Edit</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2023/003</td>
                                    <td>Mwangi Grace</td>
                                    <td>Grade 8</td>
                                    <td>4567890125</td>
                                    <td>20/09/2011</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-secondary" onclick="viewStudentProfile('2023/003')">View</button>
                                        <button class="btn btn-sm btn-warning" onclick="editStudent('2023/003')">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- GRADE ENTRY SECTION (FOR TEACHERS) -->
            <section id="gradeEntry" class="section-content">
                <h2 style="margin-bottom: 20px;">‚úçÔ∏è Grade Entry</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Enter Student Grades</h3>
                    </div>

                    <div class="form-group">
                        <label>Select Subject</label>
                        <select class="form-control" id="subjectSelect" onchange="loadSubjectStudents()">
                            <option value="">-- Select Subject --</option>
                            <option value="Mathematics">Mathematics</option>
                            <option value="English">English Language</option>
                            <option value="Kiswahili">Kiswahili</option>
                            <option value="Science">Integrated Science</option>
                            <option value="Social">Social Studies</option>
                            <option value="CRE">CRE</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Assessment Type</label>
                        <select class="form-control">
                            <option>CAT 1</option>
                            <option>CAT 2</option>
                            <option>CAT 3</option>
                            <option>Main Exam</option>
                        </select>
                    </div>

                    <div class="card" style="margin-top: 20px;">
                        <h4 style="margin-bottom: 15px;">Student Scores</h4>
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Student Name</th>
                                        <th>Admission No</th>
                                        <th>Score (%)</th>
                                        <th>Grade</th>
                                        <th>Descriptor</th>
                                    </tr>
                                </thead>
                                <tbody id="gradeEntryTable">
                                    <tr>
                                        <td>Akinyi Otieno</td>
                                        <td>2023/001</td>
                                        <td><input type="number" class="form-control" min="0" max="100" value="72" onchange="calculateGrade(this)"></td>
                                        <td><span class="grade-display good">3</span></td>
                                        <td>Meets Expectations</td>
                                    </tr>
                                    <tr>
                                        <td>Kamau James</td>
                                        <td>2023/002</td>
                                        <td><input type="number" class="form-control" min="0" max="100" value="85" onchange="calculateGrade(this)"></td>
                                        <td><span class="grade-display excellent">4</span></td>
                                        <td>Exceeds Expectations</td>
                                    </tr>
                                    <tr>
                                        <td>Mwangi Grace</td>
                                        <td>2023/003</td>
                                        <td><input type="number" class="form-control" min="0" max="100" value="45" onchange="calculateGrade(this)"></td>
                                        <td><span class="grade-display poor">1</span></td>
                                        <td>Below Expectations</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <button class="btn btn-success" style="margin-top: 20px; width: 100%;" onclick="saveGrades()">
                            üíæ Save All Grades
                        </button>
                    </div>
                </div>
            </section>

            <!-- FINANCE SECTION -->
            <section id="finance" class="section-content">
                <h2 style="margin-bottom: 20px;">üí∞ Finance</h2>
                
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-value">KES 2.4M</div>
                        <div class="kpi-label">Total Collected</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-value">KES 1.1M</div>
                        <div class="kpi-label">Outstanding Balance</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-value">87.3%</div>
                        <div class="kpi-label">Collection Rate</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Fee Collection Status</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('recordPaymentModal')">+ Record Payment</button>
                    </div>

                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Student Name</th>
                                    <th>Admission No</th>
                                    <th>Class</th>
                                    <th>Total Charged</th>
                                    <th>Amount Paid</th>
                                    <th>Balance</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Akinyi Otieno</td>
                                    <td>2023/001</td>
                                    <td>Grade 7</td>
                                    <td>55,000</td>
                                    <td>50,000</td>
                                    <td>5,000</td>
                                    <td><span class="badge badge-warning">PENDING</span></td>
                                </tr>
                                <tr>
                                    <td>Kamau James</td>
                                    <td>2023/002</td>
                                    <td>Grade 7</td>
                                    <td>37,000</td>
                                    <td>37,000</td>
                                    <td>0</td>
                                    <td><span class="badge badge-success">PAID</span></td>
                                </tr>
                                <tr>
                                    <td>Mwangi Grace</td>
                                    <td>2023/003</td>
                                    <td>Grade 8</td>
                                    <td>55,000</td>
                                    <td>25,000</td>
                                    <td>30,000</td>
                                    <td><span class="badge badge-danger">OVERDUE</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- REPORTS SECTION -->
            <section id="reports" class="section-content">
                <h2 style="margin-bottom: 20px;">üìã Reports</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Report Generator</h3>
                    </div>

                    <div class="form-group">
                        <label>Report Type</label>
                        <select class="form-control" onchange="updateReportOptions(this.value)">
                            <option value="">-- Select Report Type --</option>
                            <option value="enrollment">Student Enrollment</option>
                            <option value="performance">Class Performance</option>
                            <option value="fees">Fee Collection</option>
                            <option value="attendance">Attendance Summary</option>
                            <option value="reportcard">Report Cards</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Select Class</label>
                        <select class="form-control">
                            <option>Grade 7 East</option>
                            <option>Grade 7 West</option>
                            <option>Grade 8 East</option>
                            <option>Grade 8 West</option>
                            <option>Grade 9 East</option>
                            <option>Grade 9 West</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Term</label>
                        <select class="form-control">
                            <option>Term 1, 2026</option>
                            <option>Term 2, 2026</option>
                            <option>Term 3, 2026</option>
                        </select>
                    </div>

                    <button class="btn btn-primary" onclick="generateReport()">
                        <i class="fas fa-file-pdf"></i> Generate Report
                    </button>
                </div>
            </section>

            <!-- ACADEMICS SECTION -->
            <section id="academics" class="section-content">
                <h2 style="margin-bottom: 20px;">üìö Academics</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Learning Areas (CBC Curriculum)</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('addLearningAreaModal')">+ Add Learning Area</button>
                    </div>

                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Learning Area</th>
                                    <th>Category</th>
                                    <th>Strands</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>English Language</td>
                                    <td><span class="badge badge-success">Core</span></td>
                                    <td>4</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td><button class="btn btn-sm btn-secondary">Manage</button></td>
                                </tr>
                                <tr>
                                    <td>Mathematics</td>
                                    <td><span class="badge badge-success">Core</span></td>
                                    <td>5</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td><button class="btn btn-sm btn-secondary">Manage</button></td>
                                </tr>
                                <tr>
                                    <td>Integrated Science</td>
                                    <td><span class="badge badge-success">Core</span></td>
                                    <td>6</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td><button class="btn btn-sm btn-secondary">Manage</button></td>
                                </tr>
                                <tr>
                                    <td>Agriculture</td>
                                    <td><span class="badge badge-info">Elective</span></td>
                                    <td>4</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td><button class="btn btn-sm btn-secondary">Manage</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- ASSESSMENTS SECTION -->
            <section id="assessments" class="section-content">
                <h2 style="margin-bottom: 20px;">‚úèÔ∏è Assessments</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Assessment Management</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('createAssessmentModal')">+ Create Assessment</button>
                    </div>

                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Subject</th>
                                    <th>Class</th>
                                    <th>Type</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Mathematics</td>
                                    <td>Grade 7 East</td>
                                    <td>CAT 1</td>
                                    <td>15/02/2026</td>
                                    <td><span class="badge badge-success">Completed</span></td>
                                    <td><button class="btn btn-sm btn-secondary">View Results</button></td>
                                </tr>
                                <tr>
                                    <td>English</td>
                                    <td>Grade 7 West</td>
                                    <td>CAT 2</td>
                                    <td>20/02/2026</td>
                                    <td><span class="badge badge-info">Pending</span></td>
                                    <td><button class="btn btn-sm btn-warning">Mark Scores</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- STAFF SECTION -->
            <section id="staff" class="section-content">
                <h2 style="margin-bottom: 20px;">üë®‚Äçüè´ Staff</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Staff Management</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('addStaffModal')">+ Add Staff</button>
                    </div>

                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>TSC Number</th>
                                    <th>Role</th>
                                    <th>Department</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Mrs. Atieno</td>
                                    <td>0123456</td>
                                    <td><span class="role-badge role-teacher">Teacher</span></td>
                                    <td>Grade 7</td>
                                    <td>atieno@kagema.ac.ke</td>
                                    <td>0722123456</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td><button class="btn btn-sm btn-secondary">View</button></td>
                                </tr>
                                <tr>
                                    <td>Mr. Omondi</td>
                                    <td>0123457</td>
                                    <td><span class="role-badge role-headteacher">Head Teacher</span></td>
                                    <td>Administration</td>
                                    <td>omondi@kagema.ac.ke</td>
                                    <td>0722123457</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td><button class="btn btn-sm btn-secondary">View</button></td>
                                </tr>
                                <tr>
                                    <td>Mrs. Kipchoge</td>
                                    <td>0123458</td>
                                    <td><span class="role-badge role-teacher">Teacher</span></td>
                                    <td>Mathematics</td>
                                    <td>kipchoge@kagema.ac.ke</td>
                                    <td>0722123458</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td><button class="btn btn-sm btn-secondary">View</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- COMMUNICATION SECTION -->
            <section id="communication" class="section-content">
                <h2 style="margin-bottom: 20px;">üí¨ Communication</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Send Message to Parents</h3>
                    </div>

                    <div class="form-group">
                        <label>Select Student(s)</label>
                        <select class="form-control" multiple style="height: 150px;">
                            <option value="2023/001">Akinyi Otieno (0722123456, 0723123456)</option>
                            <option value="2023/002">Kamau James (0722123457)</option>
                            <option value="2023/003">Mwangi Grace (0722123458, 0723123458)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Communication Type</label>
                        <select class="form-control" onchange="updateMessageTemplate()">
                            <option value="">-- Select Type --</option>
                            <option value="sms">SMS</option>
                            <option value="whatsapp">WhatsApp</option>
                            <option value="email">Email</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Message Template</label>
                        <select class="form-control" onchange="loadMessageTemplate()">
                            <option value="">-- Select Template --</option>
                            <option value="homework">Homework Reminder</option>
                            <option value="exam">Exam Notice</option>
                            <option value="fee">Fee Payment Reminder</option>
                            <option value="performance">Performance Alert</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Message Content</label>
                        <textarea class="form-control" placeholder="Type your message..." style="min-height: 150px;"></textarea>
                    </div>

                    <button class="btn btn-primary" onclick="sendCommunication()">
                        üì§ Send Message
                    </button>
                </div>
            </section>

            <!-- INVENTORY SECTION -->
            <section id="inventory" class="section-content">
                <h2 style="margin-bottom: 20px;">üì¶ Inventory</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>School Inventory</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('addInventoryModal')">+ Add Item</button>
                    </div>

                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Item Description</th>
                                    <th>Category</th>
                                    <th>Quantity</th>
                                    <th>Unit Cost</th>
                                    <th>Total Value</th>
                                    <th>Location</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Desks (Students)</td>
                                    <td>Furniture</td>
                                    <td>450</td>
                                    <td>KES 2,500</td>
                                    <td>KES 1,125,000</td>
                                    <td>Classrooms</td>
                                    <td><span class="badge badge-success">Good</span></td>
                                </tr>
                                <tr>
                                    <td>Computers (Lab)</td>
                                    <td>Equipment</td>
                                    <td>45</td>
                                    <td>KES 35,000</td>
                                    <td>KES 1,575,000</td>
                                    <td>Computer Lab</td>
                                    <td><span class="badge badge-success">Good</span></td>
                                </tr>
                                <tr>
                                    <td>Textbooks (Math G7)</td>
                                    <td>Books</td>
                                    <td>200</td>
                                    <td>KES 850</td>
                                    <td>KES 170,000</td>
                                    <td>Library</td>
                                    <td><span class="badge badge-warning">Low Stock</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- TRANSPORT SECTION -->
            <section id="transport" class="section-content">
                <h2 style="margin-bottom: 20px;">üöå Transport</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Transport Management</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('addTransportModal')">+ Add Route</button>
                    </div>

                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Route Name</th>
                                    <th>Vehicle Registration</th>
                                    <th>Driver</th>
                                    <th>Students</th>
                                    <th>Monthly Fee</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Kisumu Town</td>
                                    <td>KCA 123A</td>
                                    <td>Mr. Kipchoge</td>
                                    <td>35</td>
                                    <td>KES 1,500</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                </tr>
                                <tr>
                                    <td>Jinja Road</td>
                                    <td>KCA 124B</td>
                                    <td>Mr. Ochieng</td>
                                    <td>28</td>
                                    <td>KES 1,200</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- HOSTEL SECTION -->
            <section id="hostel" class="section-content">
                <h2 style="margin-bottom: 20px;">üõèÔ∏è Hostel</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Hostel Management</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('addHostelModal')">+ Add Record</button>
                    </div>

                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-value">240</div>
                            <div class="kpi-label">Total Capacity</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-value">180</div>
                            <div class="kpi-label">Currently Occupied</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-value">60</div>
                            <div class="kpi-label">Available Beds</div>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Room</th>
                                    <th>Bed Number</th>
                                    <th>Student Name</th>
                                    <th>Admission No</th>
                                    <th>Monthly Fee</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>A101</td>
                                    <td>1</td>
                                    <td>Akinyi Otieno</td>
                                    <td>2023/001</td>
                                    <td>KES 8,000</td>
                                    <td><span class="badge badge-success">Occupied</span></td>
                                </tr>
                                <tr>
                                    <td>A101</td>
                                    <td>2</td>
                                    <td>Kamau James</td>
                                    <td>2023/002</td>
                                    <td>KES 8,000</td>
                                    <td><span class="badge badge-success">Occupied</span></td>
                                </tr>
                                <tr>
                                    <td>A102</td>
                                    <td>1</td>
                                    <td>-</td>
                                    <td>-</td>
                                    <td>-</td>
                                    <td><span class="badge badge-info">Available</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- SETTINGS SECTION -->
            <section id="settings" class="section-content">
                <h2 style="margin-bottom: 20px;">‚öôÔ∏è Settings</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>System Configuration</h3>
                    </div>

                    <div class="form-group">
                        <label>School Name</label>
                        <input type="text" class="form-control" value="Kagema Primary Junior Secondary" readonly>
                    </div>

                    <div class="form-group">
                        <label>NEMIS Code</label>
                        <input type="text" class="form-control" value="14720001" readonly>
                    </div>

                    <div class="form-group">
                        <label>School Phone</label>
                        <input type="text" class="form-control" value="0722 123456">
                    </div>

                    <div class="form-group">
                        <label>School Email</label>
                        <input type="email" class="form-control" value="info@kagema.ac.ke">
                    </div>

                    <div class="form-group">
                        <label>Academic Year</label>
                        <select class="form-control">
                            <option selected>2026</option>
                            <option>2027</option>
                            <option>2028</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Current Term</label>
                        <select class="form-control">
                            <option selected>Term 1</option>
                            <option>Term 2</option>
                            <option>Term 3</option>
                        </select>
                    </div>

                    <button class="btn btn-primary" onclick="saveSettings()">üíæ Save Settings</button>
                </div>
            </section>

            <!-- MY STUDENTS (FOR TEACHERS) -->
            <section id="myStudents" class="section-content">
                <h2 style="margin-bottom: 20px;">My Students</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Grade 7E - Class Roster</h3>
                    </div>

                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Admission No</th>
                                    <th>Name</th>
                                    <th>UPI</th>
                                    <th>Performance</th>
                                    <th>Attendance</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2023/001</td>
                                    <td>Akinyi Otieno</td>
                                    <td>4567890123</td>
                                    <td><span class="badge badge-success">Good (72%)</span></td>
                                    <td>95%</td>
                                    <td><button class="btn btn-sm btn-secondary" onclick="viewStudentProfile('2023/001')">View</button></td>
                                </tr>
                                <tr>
                                    <td>2023/002</td>
                                    <td>Kamau James</td>
                                    <td>4567890124</td>
                                    <td><span class="badge badge-success">Excellent (85%)</span></td>
                                    <td>98%</td>
                                    <td><button class="btn btn-sm btn-secondary" onclick="viewStudentProfile('2023/002')">View</button></td>
                                </tr>
                                <tr>
                                    <td>2023/003</td>
                                    <td>Mwangi Grace</td>
                                    <td>4567890125</td>
                                    <td><span class="badge badge-danger">Poor (45%)</span></td>
                                    <td>92%</td>
                                    <td><button class="btn btn-sm btn-secondary" onclick="viewStudentProfile('2023/003')">View</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- ATTENDANCE (FOR TEACHERS) -->
            <section id="attendance" class="section-content">
                <h2 style="margin-bottom: 20px;">Attendance Register</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Mark Attendance</h3>
                    </div>

                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" class="form-control" id="attendanceDate">
                    </div>

                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Student Name</th>
                                    <th>Admission No</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Akinyi Otieno</td>
                                    <td>2023/001</td>
                                    <td>
                                        <select class="form-control" style="width: 150px;">
                                            <option value="present">Present</option>
                                            <option value="absent">Absent</option>
                                            <option value="late">Late</option>
                                            <option value="sick">Sick</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Kamau James</td>
                                    <td>2023/002</td>
                                    <td>
                                        <select class="form-control" style="width: 150px;">
                                            <option value="present" selected>Present</option>
                                            <option value="absent">Absent</option>
                                            <option value="late">Late</option>
                                            <option value="sick">Sick</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <button class="btn btn-primary" style="margin-top: 20px;" onclick="saveAttendance()">
                        üíæ Save Attendance
                    </button>
                </div>
            </section>

            <!-- STUDENT REPORTS (FOR TEACHERS) -->
            <section id="studentReports" class="section-content">
                <h2 style="margin-bottom: 20px;">Student Progress Reports</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Generate Report Cards</h3>
                    </div>

                    <div class="form-group">
                        <label>Select Class</label>
                        <select class="form-control">
                            <option>Grade 7 East</option>
                            <option>Grade 7 West</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Term</label>
                        <select class="form-control">
                            <option>Term 1, 2026</option>
                            <option>Term 2, 2026</option>
                            <option>Term 3, 2026</option>
                        </select>
                    </div>

                    <button class="btn btn-primary" onclick="generateReportCards()">
                        üìÑ Generate Report Cards
                    </button>
                </div>
            </section>

        </div>
    </div>
</div>

<!-- MODALS -->

<!-- Add User Modal -->
<div id="addUserModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Add New User</h2>
            <button class="close-btn" onclick="closeModal('addUserModal')">&times;</button>
        </div>
        <form onsubmit="saveUser(event)">
            <div class="form-group">
                <label>Full Name *</label>
                <input type="text" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Email *</label>
                <input type="email" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Username *</label>
                <input type="text" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Role *</label>
                <select class="form-control" required>
                    <option value="">-- Select Role --</option>
                    <option value="admin">Administrator</option>
                    <option value="teacher">Teacher</option>
                    <option value="secretary">Secretary</option>
                    <option value="bursar">Bursar</option>
                    <option value="dht">Deputy Head Teacher</option>
                    <option value="headteacher">Head Teacher</option>
                </select>
            </div>
            <div class="form-group">
                <label>Professional ID (TSC/Other) *</label>
                <input type="text" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Phone</label>
                <input type="tel" class="form-control">
            </div>
            <div class="form-group">
                <label>Password *</label>
                <input type="password" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary">Add User</button>
        </form>
    </div>
</div>

<!-- Add Student Modal -->
<div id="addStudentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Add New Student</h2>
            <button class="close-btn" onclick="closeModal('addStudentModal')">&times;</button>
        </div>
        <form onsubmit="saveStudent(event)">
            <div class="form-group">
                <label>Full Name *</label>
                <input type="text" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Date of Birth *</label>
                <input type="date" class="form-control" required>
            </div>
            <div class="form-group">
                <label>UPI Number *</label>
                <input type="text" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Class *</label>
                <select class="form-control" required>
                    <option>Grade 7 East</option>
                    <option>Grade 7 West</option>
                    <option>Grade 8 East</option>
                    <option>Grade 8 West</option>
                    <option>Grade 9 East</option>
                    <option>Grade 9 West</option>
                </select>
            </div>
            <div class="form-group">
                <label>Mother's Phone</label>
                <input type="tel" class="form-control">
            </div>
            <div class="form-group">
                <label>Father's Phone</label>
                <input type="tel" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Add Student</button>
        </form>
    </div>
</div>

<!-- Record Payment Modal -->
<div id="recordPaymentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Record Payment</h2>
            <button class="close-btn" onclick="closeModal('recordPaymentModal')">&times;</button>
        </div>
        <form onsubmit="recordPayment(event)">
            <div class="form-group">
                <label>Student *</label>
                <select class="form-control" required>
                    <option>-- Select Student --</option>
                    <option>Akinyi Otieno (2023/001)</option>
                    <option>Kamau James (2023/002)</option>
                    <option>Mwangi Grace (2023/003)</option>
                </select>
            </div>
            <div class="form-group">
                <label>Amount (KES) *</label>
                <input type="number" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Payment Method *</label>
                <select class="form-control" onchange="togglePaymentMethod()" required>
                    <option value="">-- Select Method --</option>
                    <option value="cash">Cash</option>
                    <option value="bank">Bank Deposit</option>
                    <option value="cheque">Cheque</option>
                    <option value="transfer">Bank Transfer</option>
                </select>
            </div>
            <div class="form-group">
                <label>Receipt Number (if applicable)</label>
                <input type="text" class="form-control">
            </div>
            <div class="form-group">
                <label>Payment Date *</label>
                <input type="date" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary">Record Payment</button>
        </form>
    </div>
</div>

<script>
    // ========================================
    // AUTHENTICATION & AUTHORIZATION
    // ========================================
    
    let currentUser = {
        username: '',
        name: '',
        email: '',
        role: '',
        professionalId: ''
    };

    const users = [
        { username: 'admin', password: 'admin123', name: 'Administrator', email: 'admin@kagema.ac.ke', role: 'admin', professionalId: 'ADMIN001' },
        { username: 'teacher', password: 'teacher123', name: 'Mrs. Atieno', email: 'atieno@kagema.ac.ke', role: 'teacher', professionalId: 'TSC0123456' },
        { username: 'bursar', password: 'bursar123', name: 'Ms. Wanjiru', email: 'wanjiru@kagema.ac.ke', role: 'bursar', professionalId: 'BUR001' },
    ];

    function handleLogin(event) {
        event.preventDefault();
        
        const username = document.getElementById('loginUsername').value;
        const password = document.getElementById('loginPassword').value;
        const role = document.getElementById('loginRole').value;

        const user = users.find(u => u.username === username && u.password === password && u.role === role);

        if (user) {
            currentUser = { ...user };
            showLoginPage(false);
            updateUserDisplay();
            setupAccesibleMenus();
            showAlert('Welcome ' + user.name + '!', 'success');
        } else {
            showAlert('Invalid credentials or role mismatch', 'danger');
        }
    }

    function showLoginPage(show) {
        document.getElementById('loginPage').style.display = show ? 'flex' : 'none';
        document.getElementById('mainDashboard').classList.toggle('active', !show);
    }

    function logout() {
        currentUser = {};
        showLoginPage(true);
        document.getElementById('loginForm').reset();
        showAlert('You have been logged out', 'info');
    }

    function updateUserDisplay() {
        document.getElementById('userDisplayName').textContent = currentUser.name;
        document.getElementById('userDisplayRole').textContent = getUserRoleDisplay(currentUser.role);
        document.getElementById('topbarName').textContent = currentUser.name;
        document.getElementById('topbarRole').textContent = getUserRoleDisplay(currentUser.role);
    }

    function setupAccesibleMenus() {
        // Hide all menus
        document.getElementById('adminMenu').style.display = 'none';
        document.getElementById('teacherMenu').style.display = 'none';
        document.getElementById('secretaryMenu').style.display = 'none';
        document.getElementById('bursarMenu').style.display = 'none';

        // Show appropriate menu based on role
        switch(currentUser.role) {
            case 'admin':
                document.getElementById('adminMenu').style.display = 'block';
                break;
            case 'teacher':
                document.getElementById('teacherMenu').style.display = 'block';
                break;
            case 'secretary':
                document.getElementById('secretaryMenu').style.display = 'block';
                break;
            case 'bursar':
                document.getElementById('bursarMenu').style.display = 'block';
                break;
        }
    }

    function getUserRoleDisplay(role) {
        const roles = {
            'admin': 'Administrator',
            'teacher': 'Teacher',
            'secretary': 'Secretary',
            'bursar': 'Bursar',
            'dht': 'Deputy Head Teacher',
            'headteacher': 'Head Teacher'
        };
        return roles[role] || role;
    }

    // ========================================
    // SECTION MANAGEMENT
    // ========================================

    function showSection(sectionId) {
        // Hide all sections
        document.querySelectorAll('.section-content').forEach(el => el.classList.remove('active'));
        
        // Show selected section
        const section = document.getElementById(sectionId);
        if (section) {
            section.classList.add('active');
        }

        // Update active nav link
        document.querySelectorAll('.nav-link').forEach(el => el.classList.remove('active'));
        event.target.classList.add('active');
    }

    // ========================================
    // MODAL MANAGEMENT
    // ========================================

    function openModal(modalId) {
        document.getElementById(modalId).classList.add('show');
    }

    function closeModal(modalId) {
        document.getElementById(modalId).classList.remove('show');
    }

    // ========================================
    // FORM HANDLING
    // ========================================

    function saveUser(event) {
        event.preventDefault();
        showAlert('User added successfully!', 'success');
        closeModal('addUserModal');
        event.target.reset();
    }

    function saveStudent(event) {
        event.preventDefault();
        showAlert('Student admitted successfully!', 'success');
        closeModal('addStudentModal');
        event.target.reset();
    }

    function recordPayment(event) {
        event.preventDefault();
        showAlert('Payment recorded successfully!', 'success');
        closeModal('recordPaymentModal');
        event.target.reset();
    }

    function saveGrades() {
        showAlert('All grades saved successfully!', 'success');
    }

    function saveSettings() {
        showAlert('Settings saved successfully!', 'success');
    }

    function saveAttendance() {
        showAlert('Attendance saved successfully!', 'success');
    }

    // ========================================
    // FILTERING & SEARCH
    // ========================================

    function filterUsers(searchTerm) {
        const table = document.getElementById('usersTable');
        const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');
        
        Array.from(rows).forEach(row => {
            const text = row.textContent.toLowerCase();
            row.style.display = text.includes(searchTerm.toLowerCase()) ? '' : 'none';
        });
    }

    function filterUsersByRole(role) {
        // Implement role filtering
    }

    function filterStudents(searchTerm) {
        const table = document.getElementById('studentsTable');
        const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');
        
        Array.from(rows).forEach(row => {
            const text = row.textContent.toLowerCase();
            row.style.display = text.includes(searchTerm.toLowerCase()) ? '' : 'none';
        });
    }

    function filterByClass(classValue) {
        // Implement class filtering
    }

    // ========================================
    // GRADE CALCULATION
    // ========================================

    function calculateGrade(input) {
        const score = parseInt(input.value);
        let grade, descriptor;

        if (score >= 80) {
            grade = 4;
            descriptor = 'Exceeds Expectations';
        } else if (score >= 65) {
            grade = 3;
            descriptor = 'Meets Expectations';
        } else if (score >= 50) {
            grade = 2;
            descriptor = 'Approaching Expectations';
        } else {
            grade = 1;
            descriptor = 'Below Expectations';
        }

        const row = input.closest('tr');
        row.querySelector('td:nth-child(4)').innerHTML = `<span class="grade-display">${grade}</span>`;
        row.querySelector('td:nth-child(5)').textContent = descriptor;
    }

    // ========================================
    // COMMUNICATION
    // ========================================

    function sendCommunication() {
        showAlert('Message sent to selected parents successfully!', 'success');
    }

    function updateMessageTemplate() {
        // Load template content
    }

    function loadMessageTemplate() {
        // Load pre-written message template
    }

    // ========================================
    // REPORTS
    // ========================================

    function generateReport() {
        showAlert('Report generated successfully! Downloading...', 'success');
    }

    function generateReportCards() {
        showAlert('Report cards generated for selected class!', 'success');
    }

    function updateReportOptions(reportType) {
        // Update available options based on report type
    }

    // ========================================
    // STUDENT PROFILE
    // ========================================

    function viewStudentProfile(admissionNo) {
        showAlert('Viewing profile for student ' + admissionNo, 'info');
    }

    function editStudent(admissionNo) {
        openModal('addStudentModal');
    }

    // ========================================
    // UTILITIES
    // ========================================

    function showAlert(message, type = 'success') {
        const alertDiv = document.createElement('div');
        alertDiv.className = `alert alert-${type} show`;
        alertDiv.innerHTML = `<strong>${type.toUpperCase()}:</strong> ${message}`;
        document.getElementById('alertContainer').appendChild(alertDiv);
        
        setTimeout(() => alertDiv.remove(), 4000);
    }

    function togglePaymentMethod() {
        // Show/hide relevant payment fields
    }

    function loadSubjectStudents() {
        // Load students for selected subject
    }

    function editUser(userId) {
        openModal('addUserModal');
    }

    function deleteUser(userId) {
        if (confirm('Are you sure you want to delete this user?')) {
            showAlert('User deleted successfully!', 'success');
        }
    }

    // ========================================
    // INITIALIZATION
    // ========================================

    document.addEventListener('DOMContentLoaded', function() {
        // Set today's date for attendance
        const today = new Date().toISOString().split('T')[0];
        const attendanceDate = document.getElementById('attendanceDate');
        if (attendanceDate) {
            attendanceDate.value = today;
        }

        // Close modals on outside click
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('show');
            }
        };
    });

    // Close modals on ESC key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            document.querySelectorAll('.modal.show').forEach(modal => {
                modal.classList.remove('show');
            });
        }
    });
</script>

</body>
</html>
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2E7D32;
            --secondary: #1565C0;
            --accent: #FFB300;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
            --info: #2196F3;
            --light-bg: #F5F5F5;
            --dark-text: #212121;
            --light-text: #757575;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--light-bg);
            color: var(--dark-text);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* LAYOUT */
        .layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: 100vh;
            gap: 0;
        }

        /* SIDEBAR */
        .sidebar {
            background: linear-gradient(135deg, var(--primary) 0%, #1b5e20 100%);
            color: white;
            padding: 20px;
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            padding-bottom: 15px;
        }

        .sidebar-header h2 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 12px;
            opacity: 0.9;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin: 10px 0;
        }

        .nav-link {
            display: block;
            color: white;
            text-decoration: none;
            padding: 12px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            font-size: 14px;
            cursor: pointer;
            font-weight: 500;
        }

        .nav-link:hover, .nav-link.active {
            background-color: rgba(255,255,255,0.2);
            padding-left: 20px;
        }

        /* MAIN CONTENT */
        .main-content {
            margin-left: 250px;
            padding: 20px;
        }

        /* HEADER */
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }

        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background: var(--light-bg);
            border-radius: 5px;
        }

        /* BUTTONS */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: #1b5e20;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(46, 125, 50, 0.3);
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background-color: #0d47a1;
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-warning {
            background-color: var(--warning);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }

        /* CARDS */
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .card-header {
            border-bottom: 2px solid var(--light-bg);
            padding-bottom: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary);
        }

        /* KPI CARDS */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .kpi-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 5px solid var(--primary);
        }

        .kpi-card.warning {
            border-left-color: var(--warning);
        }

        .kpi-card.danger {
            border-left-color: var(--danger);
        }

        .kpi-card.info {
            border-left-color: var(--secondary);
        }

        .kpi-label {
            font-size: 12px;
            color: var(--light-text);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .kpi-value {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary);
        }

        /* FORMS */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-text);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }

        /* TABLES */
        .table-responsive {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        thead {
            background-color: var(--light-bg);
        }

        th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: var(--dark-text);
            border-bottom: 2px solid #ddd;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background-color: #fafafa;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-paid {
            background-color: #c8e6c9;
            color: #2e7d32;
        }

        .status-pending {
            background-color: #ffe0b2;
            color: #e65100;
        }

        .status-overdue {
            background-color: #ffcdd2;
            color: #c62828;
        }

        .status-exceeds {
            background-color: #c8e6c9;
            color: #2e7d32;
        }

        .status-meets {
            background-color: #bbdefb;
            color: #1565c0;
        }

        .status-approachng {
            background-color: #ffe0b2;
            color: #e65100;
        }

        .status-below {
            background-color: #ffcdd2;
            color: #c62828;
        }

        /* TABS */
        .tabs {
            display: flex;
            gap: 0;
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
        }

        .tab-button {
            padding: 12px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: var(--light-text);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-button:hover {
            color: var(--primary);
        }

        .tab-button.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 8px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--light-bg);
            padding-bottom: 15px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--light-text);
        }

        /* SEARCH BAR */
        .search-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-bar input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        /* ALERT */
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background-color: #c8e6c9;
            color: #2e7d32;
            border-left: 4px solid #2e7d32;
        }

        .alert-warning {
            background-color: #ffe0b2;
            color: #e65100;
            border-left: 4px solid #e65100;
        }

        .alert-danger {
            background-color: #ffcdd2;
            color: #c62828;
            border-left: 4px solid #c62828;
        }

        .alert-info {
            background-color: #bbdefb;
            color: #1565c0;
            border-left: 4px solid #1565c0;
        }

        /* PROFILE SECTION */
        .profile-header {
            display: flex;
            gap: 20px;
            align-items: start;
            margin-bottom: 30px;
        }

        .profile-photo {
            width: 120px;
            height: 120px;
            border-radius: 8px;
            background: var(--light-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .profile-info {
            flex: 1;
        }

        .profile-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .profile-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .meta-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .meta-label {
            font-weight: 600;
            color: var(--light-text);
            font-size: 12px;
        }

        .meta-value {
            font-weight: 600;
            color: var(--dark-text);
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .layout {
                grid-template-columns: 1fr;
            }

            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                padding: 15px;
            }

            .main-content {
                margin-left: 0;
            }

            .header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .kpi-grid {
                grid-template-columns: 1fr;
            }

            .profile-header {
                flex-direction: column;
                align-items: center;
            }

            .profile-meta {
                grid-template-columns: 1fr;
            }
        }

        /* PRINT STYLES */
        @media print {
            .sidebar, .header, .btn, .search-bar, .nav-link {
                display: none !important;
            }

            .main-content {
                margin-left: 0;
                padding: 0;
            }

            .card {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }

        /* UTILITY */
        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .text-muted {
            color: var(--light-text);
        }

        .hidden {
            display: none;
        }

        .d-flex {
            display: flex;
        }

        .flex-between {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .gap-10 {
            gap: 10px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--light-text);
        }

        .spinner {
            border: 4px solid var(--light-bg);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .report-card {
            background: white;
            padding: 40px;
            border: 1px solid #ddd;
            margin: 20px auto;
            max-width: 800px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .report-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 20px;
        }

        .school-name {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
        }

        .school-info {
            font-size: 12px;
            color: var(--light-text);
            margin-top: 5px;
        }

        .results-grid {
            margin: 20px 0;
        }

        .result-item {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 2fr;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid #ddd;
            gap: 15px;
        }

        .result-item:nth-child(odd) {
            background-color: var(--light-bg);
        }

        .result-subject {
            font-weight: 600;
        }

        .result-score {
            text-align: center;
            font-weight: 600;
        }

        .result-grade {
            text-align: center;
            font-weight: 600;
        }

        .result-descriptor {
            text-align: center;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="layout">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>üéì KAGEMA</h2>
                <p>Junior Secondary System</p>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" onclick="showSection('dashboard')">üìä Dashboard</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('students')">üë• Students</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('academics')">üìö Academics</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('assessments')">‚úèÔ∏è Assessments</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('reports')">üìã Reports</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('finance')">üí∞ Finance</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('staff')">üë®‚Äçüè´ Staff</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('communication')">üí¨ Communications</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('settings')">‚öôÔ∏è Settings</a>
                </li>
            </ul>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- HEADER -->
            <header class="header">
                <div class="header-title">Kagema Primary Junior Secondary</div>
                <div class="header-actions">
                    <input type="text" id="globalSearch" placeholder="Search student by name/admission..." style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; width: 300px;">
                    <div class="user-info">
                        <span>üë§ Admin User</span>
                    </div>
                </div>
            </header>

            <!-- ALERT MESSAGES -->
            <div id="alertContainer"></div>

            <!-- DASHBOARD SECTION -->
            <section id="dashboard" class="section-content">
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">Total Students</div>
                        <div class="kpi-value">1,245</div>
                    </div>
                    <div class="kpi-card info">
                        <div class="kpi-label">Active Teachers</div>
                        <div class="kpi-value">52</div>
                    </div>
                    <div class="kpi-card warning">
                        <div class="kpi-label">Fee Collection</div>
                        <div class="kpi-value">87.3%</div>
                    </div>
                    <div class="kpi-card danger">
                        <div class="kpi-label">Below Expectations</div>
                        <div class="kpi-value">156</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Recent Student Admissions</div>
                        <button class="btn btn-primary btn-small" onclick="openModal('addStudent')">+ Add Student</button>
                    </div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Admission No</th>
                                    <th>Name</th>
                                    <th>Class</th>
                                    <th>Date Admitted</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2023/001</td>
                                    <td>Akinyi Otieno</td>
                                    <td>Grade 7 East</td>
                                    <td>15 Jan 2023</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="viewStudentProfile('2023/001')">View Profile</button></td>
                                </tr>
                                <tr>
                                    <td>2023/002</td>
                                    <td>Kamau James</td>
                                    <td>Grade 7 West</td>
                                    <td>15 Jan 2023</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="viewStudentProfile('2023/002')">View Profile</button></td>
                                </tr>
                                <tr>
                                    <td>2023/003</td>
                                    <td>Mwangi Grace</td>
                                    <td>Grade 8 East</td>
                                    <td>20 Jan 2023</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="viewStudentProfile('2023/003')">View Profile</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Fee Collection Status</div>
                    </div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Student Name</th>
                                    <th>Admission No</th>
                                    <th>Total Charged</th>
                                    <th>Amount Paid</th>
                                    <th>Balance</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Akinyi Otieno</td>
                                    <td>2023/001</td>
                                    <td>55,000</td>
                                    <td>50,000</td>
                                    <td>5,000</td>
                                    <td><span class="status-badge status-pending">PENDING</span></td>
                                </tr>
                                <tr>
                                    <td>Kamau James</td>
                                    <td>2023/002</td>
                                    <td>37,000</td>
                                    <td>37,000</td>
                                    <td>0</td>
                                    <td><span class="status-badge status-paid">PAID</span></td>
                                </tr>
                                <tr>
                                    <td>Mwangi Grace</td>
                                    <td>2023/003</td>
                                    <td>55,000</td>
                                    <td>25,000</td>
                                    <td>30,000</td>
                                    <td><span class="status-badge status-overdue">OVERDUE</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- STUDENTS SECTION -->
            <section id="students" class="section-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Student Management</div>
                        <button class="btn btn-primary" onclick="openModal('addStudent')">+ Add New Student</button>
                    </div>
                    <div class="search-bar">
                        <input type="text" id="studentSearch" placeholder="Search by name, admission no, or UPI..." onkeyup="searchStudents()">
                        <select id="classFilter" onchange="filterStudents()">
                            <option value="">All Classes</option>
                            <option value="Grade 7">Grade 7</option>
                            <option value="Grade 8">Grade 8</option>
                            <option value="Grade 9">Grade 9</option>
                        </select>
                    </div>
                    <div class="table-responsive">
                        <table id="studentsTable">
                            <thead>
                                <tr>
                                    <th>Photo</th>
                                    <th>Name</th>
                                    <th>Admission No</th>
                                    <th>UPI</th>
                                    <th>Class</th>
                                    <th>DOB</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>üëß</td>
                                    <td>Akinyi Otieno</td>
                                    <td>2023/001</td>
                                    <td>4567890123</td>
                                    <td>Grade 7 East</td>
                                    <td>12/06/2012</td>
                                    <td>
                                        <button class="btn btn-secondary btn-small" onclick="viewStudentProfile('2023/001')">Profile</button>
                                        <button class="btn btn-warning btn-small" onclick="openModal('editStudent')">Edit</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>üë¶</td>
                                    <td>Kamau James</td>
                                    <td>2023/002</td>
                                    <td>4567890124</td>
                                    <td>Grade 7 West</td>
                                    <td>08/03/2012</td>
                                    <td>
                                        <button class="btn btn-secondary btn-small" onclick="viewStudentProfile('2023/002')">Profile</button>
                                        <button class="btn btn-warning btn-small" onclick="openModal('editStudent')">Edit</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>üëß</td>
                                    <td>Mwangi Grace</td>
                                    <td>2023/003</td>
                                    <td>4567890125</td>
                                    <td>Grade 8 East</td>
                                    <td>20/09/2011</td>
                                    <td>
                                        <button class="btn btn-secondary btn-small" onclick="viewStudentProfile('2023/003')">Profile</button>
                                        <button class="btn btn-warning btn-small" onclick="openModal('editStudent')">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- ACADEMICS SECTION -->
            <section id="academics" class="section-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Learning Areas (Grade 7-9)</div>
                        <button class="btn btn-primary" onclick="openModal('addLearningArea')">+ Add Learning Area</button>
                    </div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Learning Area</th>
                                    <th>Category</th>
                                    <th>Strands</th>
                                    <th>Competencies</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>English Language</td>
                                    <td>Core</td>
                                    <td>4</td>
                                    <td>12</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="manageLearningArea('1')">Manage</button></td>
                                </tr>
                                <tr>
                                    <td>Mathematics</td>
                                    <td>Core</td>
                                    <td>5</td>
                                    <td>15</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="manageLearningArea('2')">Manage</button></td>
                                </tr>
                                <tr>
                                    <td>Integrated Science</td>
                                    <td>Core</td>
                                    <td>6</td>
                                    <td>20</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="manageLearningArea('3')">Manage</button></td>
                                </tr>
                                <tr>
                                    <td>Computer Science</td>
                                    <td>Elective</td>
                                    <td>4</td>
                                    <td>12</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="manageLearningArea('4')">Manage</button></td>
                                </tr>
                                <tr>
                                    <td>Agriculture</td>
                                    <td>Elective</td>
                                    <td>4</td>
                                    <td>12</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="manageLearningArea('5')">Manage</button></td>
                                </tr>
                                <tr>
                                    <td>PE & Sports</td>
                                    <td>Elective</td>
                                    <td>5</td>
                                    <td>14</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="manageLearningArea('6')">Manage</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- ASSESSMENTS SECTION -->
            <section id="assessments" class="section-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Enter Student Assessments</div>
                    </div>
                    <div class="form-group">
                        <label>Select Learning Area:</label>
                        <select id="assessmentSubject">
                            <option>Mathematics</option>
                            <option>English Language</option>
                            <option>Integrated Science</option>
                            <option>Social Studies</option>
                            <option>Kiswahili</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Select Class:</label>
                        <select id="assessmentClass">
                            <option>Grade 7 East</option>
                            <option>Grade 7 West</option>
                            <option>Grade 8 East</option>
                            <option>Grade 8 West</option>
                            <option>Grade 9 East</option>
                            <option>Grade 9 West</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Assessment Type:</label>
                        <select id="assessmentType">
                            <option>Opener Exam</option>
                            <option>Midterm Exam</option>
                            <option>End of Term Exam</option>
                            <option>Project</option>
                            <option>Assignment</option>
                            <option>Practical</option>
                            <option>Observation</option>
                            <option>Oral</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="showAssessmentEntry()">Load Students</button>
                </div>

                <div id="assessmentEntry" class="card" style="display: none; margin-top: 20px;">
                    <div class="card-header">
                        <div class="card-title">Score Entry for Mathematics - Grade 7 East (Opener Exam)</div>
                    </div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Student Name</th>
                                    <th>Admission No</th>
                                    <th>Competency 1</th>
                                    <th>Competency 2</th>
                                    <th>Competency 3</th>
                                    <th>Total Score</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Akinyi Otieno</td>
                                    <td>2023/001</td>
                                    <td><input type="number" min="0" max="100" style="width: 60px;" value="45"></td>
                                    <td><input type="number" min="0" max="100" style="width: 60px;" value="50"></td>
                                    <td><input type="number" min="0" max="100" style="width: 60px;" value="40"></td>
                                    <td>45%</td>
                                    <td><button class="btn btn-success btn-small" onclick="saveAssessment()">Save</button></td>
                                </tr>
                                <tr>
                                    <td>Kamau James</td>
                                    <td>2023/002</td>
                                    <td><input type="number" min="0" max="100" style="width: 60px;" value="72"></td>
                                    <td><input type="number" min="0" max="100" style="width: 60px;" value="68"></td>
                                    <td><input type="number" min="0" max="100" style="width: 60px;" value="75"></td>
                                    <td>72%</td>
                                    <td><button class="btn btn-success btn-small" onclick="saveAssessment()">Save</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- REPORTS SECTION -->
            <section id="reports" class="section-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Report Card Generator</div>
                    </div>
                    <div class="form-group">
                        <label>Select Class:</label>
                        <select id="reportClass">
                            <option>Grade 7 East</option>
                            <option>Grade 7 West</option>
                            <option>Grade 8 East</option>
                            <option>Grade 8 West</option>
                            <option>Grade 9 East</option>
                            <option>Grade 9 West</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Term:</label>
                        <select id="reportTerm">
                            <option>Term 1, 2026</option>
                            <option>Term 2, 2026</option>
                            <option>Term 3, 2026</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="generateReportCards()">Generate Report Cards</button>
                </div>

                <div id="reportCardPreview" class="card" style="display: none; margin-top: 20px;">
                    <div class="report-card">
                        <div class="report-header">
                            <div class="school-name">üéì KAGEMA PRIMARY JUNIOR SECONDARY</div>
                            <div class="school-info">P.O. Box 1234 - 00100 NAIROBI | Tel: 0722 123456 | NEMIS: 14720001</div>
                            <div style="margin-top: 20px; text-align: left;">
                                <strong>LEARNER'S PROGRESS REPORT</strong>
                                <div style="margin-top: 10px; font-size: 13px;">
                                    <div>NAME: OTIENO, AKINYI J. &nbsp; &nbsp; &nbsp; &nbsp; ADM NO: 2023/076</div>
                                    <div>CLASS: GRADE 7 EAST &nbsp; &nbsp; &nbsp; &nbsp; UPI: 4567890123</div>
                                    <div>TERM: TERM 1, 2026</div>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 20px;">
                            <strong>ACADEMIC PERFORMANCE</strong>
                            <div class="results-grid">
                                <div class="result-item" style="font-weight: bold; background-color: var(--light-bg);">
                                    <span>LEARNING AREA</span>
                                    <span>SCORE</span>
                                    <span>GRADE</span>
                                    <span>DESCRIPTOR</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-subject">English Language</span>
                                    <span class="result-score">72%</span>
                                    <span class="result-grade">3</span>
                                    <span class="result-descriptor"><span class="status-badge status-meets">Meets Expectations</span></span>
                                </div>
                                <div class="result-item">
                                    <span class="result-subject">Kiswahili</span>
                                    <span class="result-score">68%</span>
                                    <span class="result-grade">3</span>
                                    <span class="result-descriptor"><span class="status-badge status-meets">Meets Expectations</span></span>
                                </div>
                                <div class="result-item">
                                    <span class="result-subject">Mathematics</span>
                                    <span class="result-score">45%</span>
                                    <span class="result-grade">1</span>
                                    <span class="result-descriptor"><span class="status-badge status-below">Below Expectations</span></span>
                                </div>
                                <div class="result-item">
                                    <span class="result-subject">Integrated Science</span>
                                    <span class="result-score">81%</span>
                                    <span class="result-grade">4</span>
                                    <span class="result-descriptor"><span class="status-badge status-exceeds">Exceeds Expectations</span></span>
                                </div>
                                <div class="result-item">
                                    <span class="result-subject">Social Studies</span>
                                    <span class="result-score">64%</span>
                                    <span class="result-grade">2</span>
                                    <span class="result-descriptor"><span class="status-badge status-approachng">Approaching Expect.</span></span>
                                </div>
                                <div class="result-item">
                                    <span class="result-subject">CRE</span>
                                    <span class="result-score">77%</span>
                                    <span class="result-grade">3</span>
                                    <span class="result-descriptor"><span class="status-badge status-meets">Meets Expectations</span></span>
                                </div>
                                <div class="result-item">
                                    <span class="result-subject">Agriculture</span>
                                    <span class="result-score">83%</span>
                                    <span class="result-grade">4</span>
                                    <span class="result-descriptor"><span class="status-badge status-exceeds">Exceeds Expectations</span></span>
                                </div>
                                <div class="result-item">
                                    <span class="result-subject">Computer Science</span>
                                    <span class="result-score">91%</span>
                                    <span class="result-grade">4</span>
                                    <span class="result-descriptor"><span class="status-badge status-exceeds">Exceeds Expectations</span></span>
                                </div>
                                <div class="result-item">
                                    <span class="result-subject">PE & Sports</span>
                                    <span class="result-score">88%</span>
                                    <span class="result-grade">4</span>
                                    <span class="result-descriptor"><span class="status-badge status-exceeds">Exceeds Expectations</span></span>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 20px; border-top: 1px solid #ddd; padding-top: 15px;">
                            <strong>TEACHER'S COMMENTS</strong>
                            <p style="font-size: 13px; margin-top: 10px;">Akinyi is an enthusiastic learner who excels in practical subjects. She needs additional support in Mathematics - particularly fractions and algebra. Her project on solar powered irrigation was outstanding.</p>
                            <p style="text-align: right; font-size: 12px;">- Mrs. Atieno (Class Teacher)</p>
                        </div>

                        <div style="margin-top: 15px; border-top: 1px solid #ddd; padding-top: 15px;">
                            <strong>PRINCIPAL'S REMARKS</strong>
                            <p style="font-size: 13px; margin-top: 10px;">Good progress this term. Keep working hard, especially in Mathematics. Continue your excellent performance in practical subjects.</p>
                            <p style="text-align: right; font-size: 12px;">- Mr. Omondi (Principal)</p>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px; gap: 10px; display: flex; justify-content: center;">
                        <button class="btn btn-primary" onclick="printReportCard()">üñ®Ô∏è Print Report Card</button>
                        <button class="btn btn-secondary" onclick="shareReportCard()">üì± Share via WhatsApp</button>
                        <button class="btn btn-success" onclick="downloadReportCardPDF()">‚¨áÔ∏è Download PDF</button>
                    </div>
                </div>
            </section>

            <!-- FINANCE SECTION -->
            <section id="finance" class="section-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Fee Payment Recording</div>
                        <button class="btn btn-primary" onclick="openModal('recordPayment')">+ Record Payment</button>
                    </div>
                    <div class="search-bar">
                        <input type="text" id="feeSearch" placeholder="Search student by name or admission no..." onkeyup="searchFeeRecords()">
                    </div>
                    <div class="table-responsive">
                        <table id="feeTable">
                            <thead>
                                <tr>
                                    <th>Student Name</th>
                                    <th>Admission No</th>
                                    <th>Class</th>
                                    <th>Total Charged</th>
                                    <th>Amount Paid</th>
                                    <th>Balance</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Akinyi Otieno</td>
                                    <td>2023/001</td>
                                    <td>Grade 7</td>
                                    <td>55,000</td>
                                    <td>50,000</td>
                                    <td>5,000</td>
                                    <td><span class="status-badge status-pending">PENDING</span></td>
                                    <td>
                                        <button class="btn btn-secondary btn-small" onclick="viewFeeStatement('2023/001')">Statement</button>
                                        <button class="btn btn-success btn-small" onclick="openModal('recordPayment')">Record</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Kamau James</td>
                                    <td>2023/002</td>
                                    <td>Grade 7</td>
                                    <td>37,000</td>
                                    <td>37,000</td>
                                    <td>0</td>
                                    <td><span class="status-badge status-paid">PAID</span></td>
                                    <td>
                                        <button class="btn btn-secondary btn-small" onclick="viewFeeStatement('2023/002')">Statement</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Mwangi Grace</td>
                                    <td>2023/003</td>
                                    <td>Grade 8</td>
                                    <td>55,000</td>
                                    <td>25,000</td>
                                    <td>30,000</td>
                                    <td><span class="status-badge status-overdue">OVERDUE</span></td>
                                    <td>
                                        <button class="btn btn-secondary btn-small" onclick="viewFeeStatement('2023/003')">Statement</button>
                                        <button class="btn btn-success btn-small" onclick="openModal('recordPayment')">Record</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- STAFF SECTION -->
            <section id="staff" class="section-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Staff Management</div>
                        <button class="btn btn-primary" onclick="openModal('addStaff')">+ Add Staff Member</button>
                    </div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>TSC Number</th>
                                    <th>Role</th>
                                    <th>Department</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Mrs. Atieno</td>
                                    <td>0123456</td>
                                    <td>Class Teacher</td>
                                    <td>Grade 7</td>
                                    <td>atieno@kagema.ac.ke</td>
                                    <td>0722123456</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="viewStaffProfile()">View</button></td>
                                </tr>
                                <tr>
                                    <td>Mr. Omondi</td>
                                    <td>0123457</td>
                                    <td>Principal</td>
                                    <td>Administration</td>
                                    <td>omondi@kagema.ac.ke</td>
                                    <td>0722123457</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="viewStaffProfile()">View</button></td>
                                </tr>
                                <tr>
                                    <td>Mrs. Kipchoge</td>
                                    <td>0123458</td>
                                    <td>Subject Teacher</td>
                                    <td>Mathematics</td>
                                    <td>kipchoge@kagema.ac.ke</td>
                                    <td>0722123458</td>
                                    <td><button class="btn btn-secondary btn-small" onclick="viewStaffProfile()">View</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- COMMUNICATION SECTION -->
            <section id="communication" class="section-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Send Communication to Parents</div>
                    </div>
                    <div class="form-group">
                        <label>Select Student(s):</label>
                        <select id="studentSelect" multiple style="height: 200px;">
                            <option value="2023/001">Akinyi Otieno (0722123456, 0723123456)</option>
                            <option value="2023/002">Kamau James (0722123457)</option>
                            <option value="2023/003">Mwangi Grace (0722123458, 0723123458)</option>
                        </select>
                        <small style="color: var(--light-text); display: block; margin-top: 5px;">Hold Ctrl/Cmd to select multiple students. Parent phone numbers shown in parentheses.</small>
                    </div>
                    <div class="form-group">
                        <label>Communication Type:</label>
                        <select id="commType" onchange="updateCommTemplate()">
                            <option value="">-- Select --</option>
                            <option value="sms">SMS Message</option>
                            <option value="whatsapp">WhatsApp Message</option>
                            <option value="email">Email</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Message Template:</label>
                        <select id="msgTemplate" onchange="loadTemplate()">
                            <option value="">-- Select Template --</option>
                            <option value="homework">Homework Reminder</option>
                            <option value="exam">Exam Notice</option>
                            <option value="fee">Fee Payment Reminder</option>
                            <option value="performance">Performance Alert</option>
                            <option value="custom">Custom Message</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Message Content:</label>
                        <textarea id="messageContent" placeholder="Your message will appear here..." style="min-height: 150px;"></textarea>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="includeParents"> Include both parents where available
                        </label>
                    </div>
                    <button class="btn btn-primary" onclick="sendCommunication()">Send Message</button>
                </div>
            </section>

            <!-- SETTINGS SECTION -->
            <section id="settings" class="section-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">System Settings</div>
                    </div>
                    <div class="form-group">
                        <label>School Name:</label>
                        <input type="text" value="Kagema Primary Junior Secondary" readonly>
                    </div>
                    <div class="form-group">
                        <label>NEMIS Code:</label>
                        <input type="text" value="14720001" readonly>
                    </div>
                    <div class="form-group">
                        <label>Phone:</label>
                        <input type="text" value="0722 123456">
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" value="info@kagema.ac.ke">
                    </div>
                    <div class="form-group">
                        <label>Academic Year:</label>
                        <select>
                            <option selected>2026</option>
                            <option>2027</option>
                            <option>2028</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Current Term:</label>
                        <select>
                            <option selected>Term 1</option>
                            <option>Term 2</option>
                            <option>Term 3</option>
                        </select>
                    </div>
                    <button class="btn btn-primary">Save Settings</button>
                </div>
            </section>
        </main>
    </div>

    <!-- MODALS -->

    <!-- Add Student Modal -->
    <div id="addStudent" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add New Student</div>
                <button class="close-btn" onclick="closeModal('addStudent')">&times;</button>
            </div>
            <form onsubmit="saveStudent(event)">
                <div class="form-group">
                    <label>Full Name *</label>
                    <input type="text" required>
                </div>
                <div class="form-group">
                    <label>Date of Birth *</label>
                    <input type="date" required>
                </div>
                <div class="form-group">
                    <label>Birth Certificate Number *</label>
                    <input type="text" required>
                </div>
                <div class="form-group">
                    <label>Birth Place *</label>
                    <input type="text" required>
                </div>
                <div class="form-group">
                    <label>County of Origin *</label>
                    <select required>
                        <option value="">-- Select County --</option>
                        <option>Nairobi</option>
                        <option>Kisumu</option>
                        <option>Nakuru</option>
                        <option>Kiambu</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Sub-County *</label>
                    <input type="text" required>
                </div>
                <div class="form-group">
                    <label>Religion *</label>
                    <select required>
                        <option value="">-- Select --</option>
                        <option>Christianity (CRE)</option>
                        <option>Islam (IRE)</option>
                        <option>Hinduism (HRE)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Father's Name *</label>
                    <input type="text" required>
                </div>
                <div class="form-group">
                    <label>Father's Mobile Number *</label>
                    <input type="tel" placeholder="07XX XXX XXX" required>
                </div>
                <div class="form-group">
                    <label>Mother's Name *</label>
                    <input type="text" required>
                </div>
                <div class="form-group">
                    <label>Mother's Mobile Number *</label>
                    <input type="tel" placeholder="07XX XXX XXX" required>
                </div>
                <div class="form-group">
                    <label>Class *</label>
                    <select required>
                        <option value="">-- Select --</option>
                        <option>Grade 7 East</option>
                        <option>Grade 7 West</option>
                        <option>Grade 8 East</option>
                        <option>Grade 8 West</option>
                        <option>Grade 9 East</option>
                        <option>Grade 9 West</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Blood Group</label>
                    <select>
                        <option value="">-- Select --</option>
                        <option>O+</option>
                        <option>O-</option>
                        <option>A+</option>
                        <option>A-</option>
                        <option>B+</option>
                        <option>B-</option>
                        <option>AB+</option>
                        <option>AB-</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Allergies/Medical Conditions</label>
                    <textarea placeholder="e.g., Penicillin allergy, Asthma"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Save Student</button>
            </form>
        </div>
    </div>

    <!-- Record Payment Modal -->
    <div id="recordPayment" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Record Payment</div>
                <button class="close-btn" onclick="closeModal('recordPayment')">&times;</button>
            </div>
            <form onsubmit="recordPayment(event)">
                <div class="form-group">
                    <label>Student Name *</label>
                    <input type="text" readonly value="Akinyi Otieno (2023/001)">
                </div>
                <div class="form-group">
                    <label>Amount Paid (Ksh) *</label>
                    <input type="number" min="0" required placeholder="Enter amount">
                </div>
                <div class="form-group">
                    <label>Payment Method *</label>
                    <select id="paymentMethod" onchange="updatePaymentFields()" required>
                        <option value="">-- Select --</option>
                        <option value="cash">Cash Payment</option>
                        <option value="bank_deposit">Bank Deposit</option>
                        <option value="cheque">Cheque</option>
                        <option value="bank_transfer">Bank Transfer</option>
                    </select>
                </div>
                <div id="paymentFields"></div>
                <div class="form-group">
                    <label>Date of Payment *</label>
                    <input type="date" required>
                </div>
                <div class="form-group">
                    <label>Teller/Received By *</label>
                    <input type="text" placeholder="Name of staff member receiving payment" required>
                </div>
                <div class="form-group">
                    <label>Notes/Reference</label>
                    <textarea placeholder="Additional notes..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Record Payment</button>
            </form>
        </div>
    </div>

    <script>
        // DATA STORAGE (In-Memory - Replace with Backend API)
        let appData = {
            currentUser: 'admin@kagema.ac.ke',
            students: [
                {
                    id: '2023/001',
                    name: 'Akinyi Otieno',
                    dob: '12/06/2012',
                    upi: '4567890123',
                    class: 'Grade 7 East',
                    phone_father: '0722123456',
                    phone_mother: '0723123456'
                },
                {
                    id: '2023/002',
                    name: 'Kamau James',
                    dob: '08/03/2012',
                    upi: '4567890124',
                    class: 'Grade 7 West',
                    phone_father: '0722123457'
                },
                {
                    id: '2023/003',
                    name: 'Mwangi Grace',
                    dob: '20/09/2011',
                    upi: '4567890125',
                    class: 'Grade 8 East',
                    phone_father: '0722123458',
                    phone_mother: '0723123458'
                }
            ]
        };

        // NAVIGATION
        function showSection(sectionId) {
            document.querySelectorAll('.section-content').forEach(el => el.style.display = 'none');
            document.getElementById(sectionId).style.display = 'block';
            document.querySelectorAll('.nav-link').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
        }

        // MODAL OPERATIONS
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        // ALERT SYSTEM
        function showAlert(message, type = 'success') {
            const container = document.getElementById('alertContainer');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} show`;
            alertDiv.textContent = message;
            container.appendChild(alertDiv);
            setTimeout(() => alertDiv.remove(), 4000);
        }

        // STUDENT OPERATIONS
        function saveStudent(e) {
            e.preventDefault();
            showAlert('Student added successfully!', 'success');
            closeModal('addStudent');
        }

        function viewStudentProfile(admissionNo) {
            const student = appData.students.find(s => s.id === admissionNo);
            if (!student) return;

            let html = `
                <div class="modal show" id="profileModal">
                    <div class="modal-content" style="max-width: 900px;">
                        <div class="modal-header">
                            <div class="modal-title">Student Profile: ${student.name} (${admissionNo})</div>
                            <button class="close-btn" onclick="document.getElementById('profileModal').remove()">&times;</button>
                        </div>
                        <div class="tabs">
                            <button class="tab-button active" onclick="switchProfileTab(event, 'personal')">üë§ Personal</button>
                            <button class="tab-button" onclick="switchProfileTab(event, 'parent')">üë®‚Äçüë©‚Äçüëß Parent/Guardian</button>
                            <button class="tab-button" onclick="switchProfileTab(event, 'academic')">üìö Academic</button>
                            <button class="tab-button" onclick="switchProfileTab(event, 'medical')">üè• Medical</button>
                            <button class="tab-button" onclick="switchProfileTab(event, 'fees')">üí≥ Fees</button>
                            <button class="tab-button" onclick="switchProfileTab(event, 'results')">üìä Results</button>
                        </div>

                        <div id="personal" class="tab-content active" style="display: block;">
                            <div class="form-group">
                                <label><strong>Full Name:</strong> ${student.name}</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Date of Birth:</strong> ${student.dob}</label>
                            </div>
                            <div class="form-group">
                                <label><strong>UPI:</strong> ${student.upi}</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Birth Certificate:</strong> B/C 12345678</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Birth Place:</strong> Kisumu</label>
                            </div>
                            <div class="form-group">
                                <label><strong>County:</strong> Kisumu | <strong>Sub-county:</strong> Kisumu East</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Religion:</strong> Christian (CRE)</label>
                            </div>
                        </div>

                        <div id="parent" class="tab-content" style="display: none;">
                            <div class="form-group">
                                <label><strong>Father's Name:</strong> Otieno John Omondi</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Father's Mobile (PRIMARY):</strong> <a href="tel:${student.phone_father}">${student.phone_father}</a></label>
                            </div>
                            <div class="form-group">
                                <label><strong>Father's Mobile (ALTERNATE):</strong> 0722999999</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Father's Email:</strong> john.otieno@email.com</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Father's Occupation:</strong> Teacher</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Father's ID:</strong> 12345678</label>
                            </div>
                            <hr>
                            <div class="form-group">
                                <label><strong>Mother's Name:</strong> Otieno Mary Akinyi</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Mother's Mobile (PRIMARY):</strong> <a href="tel:${student.phone_mother}">${student.phone_mother}</a></label>
                            </div>
                            <div class="form-group">
                                <label><strong>Mother's Occupation:</strong> Nurse</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Mother's ID:</strong> 23456789</label>
                            </div>
                            <hr>
                            <button class="btn btn-primary btn-small" onclick="sendSMSToParents('${admissionNo}')">üì± Send SMS to Parents</button>
                            <button class="btn btn-secondary btn-small" onclick="shareViaWhatsApp('${admissionNo}')">üí¨ Share via WhatsApp</button>
                        </div>

                        <div id="academic" class="tab-content" style="display: none;">
                            <div class="form-group">
                                <label><strong>Admission No:</strong> ${admissionNo}</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Admission Date:</strong> 15/01/2023</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Class:</strong> ${student.class}</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Previous School:</strong> Kisumu Junior Academy</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Subjects Enrolled:</strong> English, Kiswahili, Mathematics, Integrated Science, Social Studies, CRE, Agriculture, Computer Science, PE</label>
                            </div>
                        </div>

                        <div id="medical" class="tab-content" style="display: none;">
                            <div class="form-group">
                                <label><strong>Blood Group:</strong> O+</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Allergies:</strong> Penicillin, Peanuts</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Chronic Conditions:</strong> Asthma (Inhaler at school)</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Doctor Name:</strong> Dr. Achieng</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Doctor Contact:</strong> 0733 123456</label>
                            </div>
                            <div class="form-group">
                                <label><strong>Medical Notes:</strong> Use inhaler before PE. Keep EpiPen accessible.</label>
                            </div>
                        </div>

                        <div id="fees" class="tab-content" style="display: none;">
                            <table>
                                <tbody>
                                    <tr><td><strong>Total Charged (Term 1):</strong></td><td>55,000 Ksh</td></tr>
                                    <tr><td><strong>Total Paid:</strong></td><td>50,000 Ksh</td></tr>
                                    <tr><td><strong>Balance:</strong></td><td style="color: var(--danger); font-weight: bold;">5,000 Ksh</td></tr>
                                    <tr><td><strong>Payment Status:</strong></td><td><span class="status-badge status-pending">PENDING</span></td></tr>
                                </tbody>
                            </table>
                            <h4 style="margin-top: 20px;">Payment History:</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Method</th>
                                        <th>Amount</th>
                                        <th>Reference</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>10/01/2026</td>
                                        <td>Cash</td>
                                        <td>20,000</td>
                                        <td>Receipt #001</td>
                                    </tr>
                                    <tr>
                                        <td>25/01/2026</td>
                                        <td>Bank Deposit</td>
                                        <td>15,000</td>
                                        <td>Equity Slip #EQ123</td>
                                    </tr>
                                    <tr>
                                        <td>15/02/2026</td>
                                        <td>Cheque</td>
                                        <td>10,000</td>
                                        <td>Co-op #456</td>
                                    </tr>
                                    <tr>
                                        <td>05/03/2026</td>
                                        <td>Bank Transfer</td>
                                        <td>5,000</td>
                                        <td>Ref #TR789</td>
                                    </tr>
                                </tbody>
                            </table>
                            <button class="btn btn-primary btn-small mt-20" onclick="generateFeeStatement('${admissionNo}')">üìÑ Generate Statement</button>
                            <button class="btn btn-secondary btn-small mt-20" onclick="recordPaymentForStudent('${admissionNo}')">üí≥ Record Payment</button>
                        </div>

                        <div id="results" class="tab-content" style="display: none;">
                            <h4>Term 1, 2026 Results</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Learning Area</th>
                                        <th>Score</th>
                                        <th>Grade</th>
                                        <th>Descriptor</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>English</td>
                                        <td>72%</td>
                                        <td>3</td>
                                        <td><span class="status-badge status-meets">Meets Expectations</span></td>
                                    </tr>
                                    <tr>
                                        <td>Mathematics</td>
                                        <td>45%</td>
                                        <td>1</td>
                                        <td><span class="status-badge status-below">Below Expectations</span></td>
                                    </tr>
                                    <tr>
                                        <td>Integrated Science</td>
                                        <td>81%</td>
                                        <td>4</td>
                                        <td><span class="status-badge status-exceeds">Exceeds Expectations</span></td>
                                    </tr>
                                </tbody>
                            </table>
                            <button class="btn btn-primary btn-small mt-20" onclick="printReportCard()">üñ®Ô∏è Print Report Card</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', html);
        }

        function switchProfileTab(e, tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.style.display = 'none');
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.getElementById(tabName).style.display = 'block';
            e.target.classList.add('active');
        }

        function sendSMSToParents(admissionNo) {
            showAlert('SMS notification option would open WhatsApp/default SMS app with parent numbers', 'info');
        }

        function shareViaWhatsApp(admissionNo) {
            showAlert('Report shared via WhatsApp to parent numbers', 'success');
        }

        function recordPaymentForStudent(admissionNo) {
            openModal('recordPayment');
        }

        function generateFeeStatement(admissionNo) {
            showAlert('Fee statement generated and ready to download', 'success');
        }

        function searchStudents() {
            const searchTerm = document.getElementById('studentSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#studentsTable tbody tr');
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function filterStudents() {
            const classFilter = document.getElementById('classFilter').value;
            const rows = document.querySelectorAll('#studentsTable tbody tr');
            rows.forEach(row => {
                const classCell = row.querySelector('td:nth-child(5)').textContent;
                row.style.display = !classFilter || classCell.includes(classFilter) ? '' : 'none';
            });
        }

        function viewFeeStatement(admissionNo) {
            showAlert(`Fee statement for ${admissionNo} prepared for download`, 'success');
        }

        function searchFeeRecords() {
            const searchTerm = document.getElementById('feeSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#feeTable tbody tr');
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function recordPayment(e) {
            e.preventDefault();
            showAlert('Payment recorded successfully!', 'success');
            closeModal('recordPayment');
        }

        function updatePaymentFields() {
            const method = document.getElementById('paymentMethod').value;
            const fieldsDiv = document.getElementById('paymentFields');
            fieldsDiv.innerHTML = '';

            const fieldHTML = {
                cash: `
                    <div class="form-group">
                        <label>Receipt Number *</label>
                        <input type="text" placeholder="e.g., RCP-001" required>
                    </div>
                `,
                bank_deposit: `
                    <div class="form-group">
                        <label>Bank Name *</label>
                        <input type="text" placeholder="e.g., Equity Bank" required>
                    </div>
                    <div class="form-group">
                        <label>Branch *</label>
                        <input type="text" required>
                    </div>
                    <div class="form-group">
                        <label>Deposit Slip Number *</label>
                        <input type="text" required>
                    </div>
                `,
                cheque: `
                    <div class="form-group">
                        <label>Cheque Number *</label>
                        <input type="text" required>
                    </div>
                    <div class="form-group">
                        <label>Bank *</label>
                        <input type="text" required>
                    </div>
                    <div class="form-group">
                        <label>Drawer Name *</label>
                        <input type="text" required>
                    </div>
                `,
                bank_transfer: `
                    <div class="form-group">
                        <label>Bank Reference Number *</label>
                        <input type="text" required>
                    </div>
                    <div class="form-group">
                        <label>Sender Name *</label>
                        <input type="text" required>
                    </div>
                    <div class="form-group">
                        <label>Bank *</label>
                        <input type="text" required>
                    </div>
                `
            };

            fieldsDiv.innerHTML = fieldHTML[method] || '';
        }

        // ASSESSMENT OPERATIONS
        function showAssessmentEntry() {
            document.getElementById('assessmentEntry').style.display = 'block';
            showAlert('Assessment entry form loaded for Mathematics - Grade 7 East', 'info');
        }

        function saveAssessment() {
            showAlert('Assessment scores saved successfully!', 'success');
        }

        // REPORT OPERATIONS
        function generateReportCards() {
            document.getElementById('reportCardPreview').style.display = 'block';
            showAlert('Report cards generated for Grade 7 East', 'success');
        }

        function printReportCard() {
            window.print();
        }

        function shareReportCard() {
            showAlert('Report card being shared via WhatsApp to parent numbers...', 'info');
        }

        function downloadReportCardPDF() {
            showAlert('Report card PDF downloaded successfully!', 'success');
        }

        // COMMUNICATION OPERATIONS
        function updateCommTemplate() {
            const type = document.getElementById('commType').value;
            if (type) {
                showAlert(`${type.toUpperCase()} template selected`, 'info');
            }
        }

        function loadTemplate() {
            const template = document.getElementById('msgTemplate').value;
            const content = document.getElementById('messageContent');
            const templates = {
                homework: 'Dear Parent/Guardian,\n\nThis is a reminder that your child has the following homework:\n[Subject]: [Details]\n\nDeadline: [Date]\n\nPlease ensure your child completes the work. Thank you.\n\n- Kagema Junior Secondary',
                exam: 'EXAM NOTICE\n\nDear Parents/Guardians,\n\nExaminations will be held as follows:\n[Subject]: [Date and Time]\n\nPlease ensure your child comes well-prepared.\n\n- School Management',
                fee: 'FEE PAYMENT REMINDER\n\nDear Parent/Guardian,\n\nThis is a friendly reminder that school fees are due.\n\nCurrent Balance: [Amount]\n\nPayment Methods: Cash, Bank Deposit, Cheque, Bank Transfer\n\nPlease arrange payment at your earliest convenience.\n\n- Bursar\'s Office',
                performance: 'PERFORMANCE ALERT\n\nDear Parent/Guardian,\n\nWe noticed that your child\'s performance in [Subject] needs improvement.\n\nCurrent Grade: [Grade]\n\nPlease schedule a meeting with the teacher to discuss support strategies.\n\n- School Management'
            };
            if (templates[template]) {
                content.value = templates[template];
            }
        }

        function sendCommunication() {
            const students = document.getElementById('studentSelect').selectedOptions;
            const type = document.getElementById('commType').value;
            if (students.length && type) {
                showAlert(`Message sent to ${students.length} parent(s) via ${type.toUpperCase()}!`, 'success');
            } else {
                showAlert('Please select student(s) and communication type', 'warning');
            }
        }

        // STAFF OPERATIONS
        function viewStaffProfile() {
            showAlert('Staff profile viewer would open here', 'info');
        }

        // LEARNING AREA OPERATIONS
        function manageLearningArea(areaId) {
            showAlert(`Managing learning area ${areaId}`, 'info');
        }

        // GLOBAL SEARCH
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('globalSearch').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const searchTerm = e.target.value;
                    if (searchTerm) {
                        const student = appData.students.find(s => 
                            s.name.toLowerCase().includes(searchTerm.toLowerCase()) || 
                            s.id.includes(searchTerm)
                        );
                        if (student) {
                            viewStudentProfile(student.id);
                        } else {
                            showAlert('Student not found', 'warning');
                        }
                    }
                }
            });
        });

        // CLOSE MODALS ON ESCAPE
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.show').forEach(m => m.classList.remove('show'));
            }
        });

        // CLOSE MODAL ON OUTSIDE CLICK
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
            }
        });

        // INITIAL LOAD
        document.addEventListener('DOMContentLoaded', () => {
            showAlert('Welcome Admin! Kagema Junior Secondary System loaded successfully.', 'success');
        });
    </script>
</body>
</html>