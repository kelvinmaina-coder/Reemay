<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IEBC Digital Voting Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap');

        :root {
            --primary-green: #1a5c1a;
            --secondary-green: #2e8b57;
            --accent-green: #4caf50;
            --deep-green: #0d3b1e;
            --light-green: #e8f5e9;
            --success-green: #10b981;
            --warning-orange: #ff9800;
            --error-red: #f44336;
            --gold-accent: #ffd700;
            --ivory: #fffff0;
            --dark-bg: #121212;
            --card-dark: #1e1e1e;
            --text-dark: #e0e0e0;
            --kenya-black: #000000;
            --kenya-red: #BB0000;
            --kenya-green: #006600;
            --kenya-white: #FFFFFF;
        }

        /* Base Styles with Kenyan Theme */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light-green);
            color: #333;
            scroll-behavior: smooth;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            transition: all 0.3s ease;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0icmdiYSgwLDAsMCwwLjAyKSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNwYXR0ZXJuKSIvPjwvc3ZnPg==');
        }

        /* Typography Enhancements */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            color: var(--deep-green);
        }

        /* Kenyan Flag Inspired Header */
        .gradient-bg {
            background: linear-gradient(135deg, 
                var(--kenya-black) 0%, 
                var(--kenya-black) 25%, 
                var(--kenya-red) 25%, 
                var(--kenya-red) 50%, 
                var(--kenya-white) 50%, 
                var(--kenya-white) 75%, 
                var(--kenya-green) 75%, 
                var(--kenya-green) 100%);
            background-size: 400% 400%;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            animation: flagWave 15s ease infinite;
        }

        @keyframes flagWave {
            0% { background-position: 0% 50% }
            50% { background-position: 100% 50% }
            100% { background-position: 0% 50% }
        }

        .gradient-bg::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, 
                rgba(255, 255, 255, 0.1) 0%, 
                transparent 70%);
        }

        /* Enhanced Card Design with Kenyan Shield */
        .ballot-card {
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border-radius: 16px;
            overflow: hidden;
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIj48cGF0aCBkPSJNMTUwLDEwMEMxNTAsMTI3LjYxIDEyNy42MSwxNTAgMTAwLDE1MEM3Mi4zOSwxNTAgNTAsMTI3LjYxIDUwLDEwMEM1MCw3Mi4zOSA3Mi4zOSw1MCAxMDAsNTBDMTI3LjYxLDUwIDE1MCw3Mi4zOSAxNTAsMTAwWiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMCwwLDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3N2Zz4=');
        }

        .ballot-card::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--kenya-black), var(--kenya-red), var(--kenya-white), var(--kenya-green));
        }

        .ballot-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            z-index: 10;
        }

        /* Elegant Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .pulse {
            animation: pulse 3s infinite;
        }

        .float {
            animation: float 6s ease-in-out infinite;
        }

        .fade-in {
            animation: fadeIn 0.8s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }

        /* Kenyan Shield Badge */
        .kenya-shield {
            width: 60px;
            height: 70px;
            background: linear-gradient(135deg, var(--kenya-black) 0%, var(--kenya-red) 50%, var(--kenya-green) 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .kenya-shield::before {
            content: "";
            position: absolute;
            width: 40px;
            height: 50px;
            background-color: var(--kenya-white);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        }

        .kenya-shield::after {
            content: "âœŠ";
            position: absolute;
            font-size: 24px;
            color: var(--kenya-red);
            z-index: 2;
        }

        /* Progress Bar with Kenyan Colors */
        .progress-bar {
            height: 8px;
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, 
                var(--kenya-black), 
                var(--kenya-red),
                var(--kenya-white),
                var(--kenya-green));
            transition: width 0.6s cubic-bezier(0.65, 0, 0.35, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.2) 0%, 
                rgba(255, 255, 255, 0.5) 50%, 
                rgba(255, 255, 255, 0.2) 100%);
            animation: progressShine 2s infinite;
        }

        /* Candidate Photos with Kenyan Frame */
        .candidate-photo {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            position: relative;
        }

        .candidate-photo::after {
            content: "";
            position: absolute;
            top: -6px;
            left: -6px;
            right: -6px;
            bottom: -6px;
            border: 2px solid var(--kenya-green);
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .candidate-photo:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
        }

        .candidate-photo:hover::after {
            opacity: 1;
        }

        .party-logo {
            width: 36px;
            height: 36px;
            object-fit: contain;
            margin-right: 10px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
            border-radius: 50%;
            background: white;
            padding: 2px;
        }

        /* Security Elements with Kenyan Theme */
        .security-badge {
            background: linear-gradient(135deg, 
                rgba(0, 102, 0, 0.15) 0%, 
                rgba(187, 0, 0, 0.15) 100%);
            border: 1px solid var(--kenya-green);
            border-radius: 50px;
            padding: 8px 16px;
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }

        .security-badge::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0.3) 0%,
                rgba(255, 255, 255, 0) 60%
            );
            transform: rotate(30deg);
        }

        /* Floating Help Button with Kenyan Colors */
        .floating-help {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--kenya-black), var(--kenya-green));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .floating-help:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip-text {
            visibility: hidden;
            width: 220px;
            background-color: rgba(51, 51, 51, 0.9);
            color: #fff;
            text-align: center;
            border-radius: 12px;
            padding: 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(-5px);
        }

        /* Dark Mode */
        .dark-mode {
            background-color: var(--dark-bg);
            color: var(--text-dark);
            background-image: none;
        }

        .dark-mode .ballot-card {
            background-color: var(--card-dark);
            color: var(--text-dark);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            background-image: none;
        }

        .dark-mode h1, 
        .dark-mode h2, 
        .dark-mode h3, 
        .dark-mode h4, 
        .dark-mode h5, 
        .dark-mode h6 {
            color: var(--ivory);
        }

        .dark-mode .text-gray-800 {
            color: var(--text-dark);
        }

        .dark-mode .text-gray-700 {
            color: #d1d5db;
        }

        .dark-mode .text-gray-500 {
            color: #9ca3af;
        }

        .dark-mode .bg-white {
            background-color: var(--card-dark);
        }

        .dark-mode .border-gray-300 {
            border-color: #4b5563;
        }

        /* Custom Radio Buttons with Kenyan Theme */
        input[type="radio"].iebc-radio {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 22px;
            height: 22px;
            border: 2px solid #ddd;
            border-radius: 50%;
            outline: none;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            background-color: white;
        }

        input[type="radio"].iebc-radio:checked {
            border-color: var(--kenya-green);
            background-color: var(--kenya-green);
            box-shadow: 0 0 0 3px rgba(0, 102, 0, 0.2);
        }

        input[type="radio"].iebc-radio:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: white;
        }

        /* Focus Styles */
        button:focus, 
        input:focus, 
        select:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 102, 0, 0.5);
        }

        /* Photo Verification Section */
        .photo-upload-container {
            border: 2px dashed rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }

        .photo-upload-container:hover {
            border-color: var(--kenya-green);
            background-color: rgba(0, 102, 0, 0.05);
            transform: translateY(-2px);
        }

        .photo-upload-container.dragover {
            border-color: var(--kenya-green);
            background-color: rgba(0, 102, 0, 0.1);
            box-shadow: 0 5px 15px rgba(0, 102, 0, 0.1);
        }

        .photo-preview {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 12px;
            border: 2px solid rgba(0, 0, 0, 0.1);
            display: none;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        /* IEBC Seal */
        .iebc-seal {
            width: 140px;
            height: 140px;
            background: radial-gradient(circle, white 60%, #f0f0f0 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid var(--kenya-green);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            position: relative;
        }

        .iebc-seal::before {
            content: "";
            position: absolute;
            width: 90%;
            height: 90%;
            border-radius: 50%;
            border: 2px dashed var(--kenya-green);
            opacity: 0.3;
        }

        /* Watermark with Kenyan Motto */
        .watermark {
            position: fixed;
            opacity: 0.03;
            font-size: 180px;
            z-index: -1;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-30deg);
            font-weight: bold;
            color: var(--kenya-green);
            pointer-events: none;
            user-select: none;
            font-family: 'Playfair Display', serif;
            text-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        /* Language Toggle */
        .language-toggle {
            position: relative;
            display: inline-block;
        }

        .language-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: calc(100% + 10px);
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            z-index: 50;
            min-width: 140px;
            overflow: hidden;
            transform-origin: top right;
            transform: scale(0.95);
            opacity: 0;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .language-toggle:hover .language-dropdown {
            display: block;
            transform: scale(1);
            opacity: 1;
        }

        .language-option {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .language-option:last-child {
            border-bottom: none;
        }

        .language-option:hover {
            background-color: rgba(0, 0, 0, 0.03);
            transform: translateX(5px);
        }

        .language-flag {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .dark-mode .language-dropdown {
            background-color: #2d3748;
            border: 1px solid #4a5568;
        }

        .dark-mode .language-option:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        /* Voting Button with Kenyan Colors */
        .vote-button {
            background: linear-gradient(135deg, var(--kenya-black), var(--kenya-green));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(0, 102, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .vote-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 102, 0, 0.4);
        }

        .vote-button::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0.3) 0%,
                rgba(255, 255, 255, 0) 60%
            );
            transform: rotate(30deg);
            transition: all 0.5s ease;
        }

        .vote-button:hover::after {
            left: 100%;
        }

        /* Section Headers */
        .section-header {
            position: relative;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }

        .section-header::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, var(--kenya-black), var(--kenya-green));
            border-radius: 2px;
        }

        /* Modal Enhancements */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            transform: translateY(20px);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 90%;
            width: 600px;
            overflow: hidden;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .dark-mode .modal-content {
            background: var(--card-dark);
            color: var(--text-dark);
        }

        /* Blockchain Verification Badge */
        .blockchain-badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            background: linear-gradient(135deg, #f1c40f, #f39c12);
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .blockchain-badge i {
            margin-right: 5px;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .ballot-card {
                margin-bottom: 20px;
            }
            
            .floating-help {
                width: 50px;
                height: 50px;
                bottom: 20px;
                right: 20px;
            }
            
            .watermark {
                font-size: 120px;
            }
            
            .section-header::after {
                width: 40px;
            }

            .gradient-bg {
                animation: none;
                background: linear-gradient(135deg, var(--kenya-black), var(--kenya-green));
            }
        }

        /* Print Styles */
        @media print {
            .no-print {
                display: none;
            }
            
            body {
                background: white;
                color: black;
                font-size: 12pt;
            }
            
            .ballot-card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
                margin-bottom: 20px;
                page-break-inside: avoid;
            }
            
            .gradient-bg {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }

        /* New: Face Detection Frame */
        .face-detection-frame {
            position: absolute;
            border: 3px solid var(--kenya-green);
            border-radius: 8px;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 10;
        }

        /* New: Verification Steps */
        .verification-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }

        .verification-steps::before {
            content: "";
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e0e0e0;
            z-index: 1;
        }

        .verification-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .step-label {
            font-size: 12px;
            color: #666;
            text-align: center;
        }

        .verification-step.active .step-number {
            background: var(--kenya-green);
            color: white;
            transform: scale(1.1);
        }

        .verification-step.active .step-label {
            color: var(--kenya-green);
            font-weight: 500;
        }

        .verification-step.completed .step-number {
            background: var(--kenya-green);
            color: white;
        }

        .verification-step.completed .step-label {
            color: var(--kenya-green);
        }

        /* New: Blockchain Transaction Viewer */
        .blockchain-viewer {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            overflow-x: auto;
            max-height: 200px;
            border: 1px solid #e0e0e0;
        }

        .blockchain-line {
            margin-bottom: 5px;
            white-space: nowrap;
        }

        .blockchain-key {
            color: var(--kenya-green);
            font-weight: bold;
        }

        /* New: Accessibility Features */
        .accessibility-tools {
            position: fixed;
            bottom: 100px;
            right: 30px;
            z-index: 90;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .accessibility-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--kenya-red);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .accessibility-btn:hover {
            transform: scale(1.1);
        }

        /* New: High Contrast Mode */
        .high-contrast {
            --primary-green: #000000;
            --secondary-green: #000000;
            --accent-green: #FFFFFF;
            --deep-green: #000000;
            --light-green: #FFFFFF;
            --success-green: #000000;
            --warning-orange: #000000;
            --error-red: #000000;
            --gold-accent: #FFFFFF;
            --ivory: #FFFFFF;
            --dark-bg: #000000;
            --card-dark: #000000;
            --text-dark: #FFFFFF;
            --kenya-black: #000000;
            --kenya-red: #000000;
            --kenya-green: #FFFFFF;
            --kenya-white: #FFFFFF;
        }

        .high-contrast body {
            background: white !important;
            color: black !important;
        }

        .high-contrast .ballot-card {
            border: 3px solid black !important;
        }

        /* New: Vote Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: var(--kenya-green);
            opacity: 0;
            z-index: 9999;
            animation: confetti-fall 5s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Watermark -->
    <div class="watermark no-print">HARAMBEE</div>
    
    <!-- Accessibility Tools -->
    <div class="accessibility-tools no-print">
        <button id="text-increase" class="accessibility-btn" title="Increase Text Size">
            <i class="fas fa-text-height"></i>
        </button>
        <button id="text-decrease" class="accessibility-btn" title="Decrease Text Size">
            <i class="fas fa-text-width"></i>
        </button>
        <button id="high-contrast" class="accessibility-btn" title="High Contrast Mode">
            <i class="fas fa-adjust"></i>
        </button>
        <button id="screen-reader" class="accessibility-btn" title="Screen Reader Mode">
            <i class="fas fa-assistive-listening-systems"></i>
        </button>
    </div>
    
    <!-- Header with IEBC Logo -->
    <header class="gradient-bg text-white shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <div class="kenya-shield mr-2"></div>
                <img src="https://www.iebc.or.ke/wp-content/uploads/2020/04/cropped-iebc-logo.png" alt="IEBC Logo" class="h-14">
                <div>
                    <h1 class="text-xl md:text-2xl font-bold" data-i18n="iebc_title">INDEPENDENT ELECTORAL & BOUNDARIES COMMISSION</h1>
                    <p class="text-xs md:text-sm opacity-80" data-i18n="portal_subtitle">Secure Digital Voting Portal - Official Government Platform</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="hidden md:flex items-center space-x-2 security-badge px-3 py-1 rounded-full">
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-xs" data-i18n="secure_connection">Secure TLS 1.3 Connection</span>
                    <span class="blockchain-badge">
                        <i class="fas fa-link"></i> Blockchain
                    </span>
                </div>
                <button id="dark-mode-toggle" class="p-2 rounded-full hover:bg-green-700 transition-colors">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="language-toggle group">
                    <button class="p-2 rounded-full hover:bg-green-700 transition-colors">
                        <i class="fas fa-language"></i>
                    </button>
                    <div class="language-dropdown dark:bg-gray-700 dark:border-gray-600">
                        <div class="language-option" data-lang="en">
                            <img src="https://flagcdn.com/w20/gb.png" class="language-flag" alt="English">
                            <span>English</span>
                        </div>
                        <div class="language-option" data-lang="sw">
                            <img src="https://flagcdn.com/w20/ke.png" class="language-flag" alt="Kiswahili">
                            <span>Kiswahili</span>
                        </div>
                        <div class="language-option" data-lang="ki">
                            <img src="https://flagcdn.com/w20/ke.png" class="language-flag" alt="Kikuyu">
                            <span>Kikuyu</span>
                        </div>
                        <div class="language-option" data-lang="lu">
                            <img src="https://flagcdn.com/w20/ke.png" class="language-flag" alt="Luhya">
                            <span>Luhya</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Progress Bar -->
        <div class="progress-bar">
            <div id="progress-fill" class="progress-fill" style="width: 33%"></div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Verification Steps -->
        <div class="verification-steps max-w-3xl mx-auto mb-8">
            <div class="verification-step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label" data-i18n="auth_title">Authentication</div>
            </div>
            <div class="verification-step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label" data-i18n="biometric_title">Biometric</div>
            </div>
            <div class="verification-step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label" data-i18n="location_title">Location</div>
            </div>
            <div class="verification-step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label" data-i18n="ballot_title">Voting</div>
            </div>
        </div>

        <!-- Authentication Section -->
        <section id="auth-section" class="max-w-3xl mx-auto bg-white rounded-xl shadow-md overflow-hidden mb-8 fade-in dark:bg-gray-800">
            <div class="md:flex">
                <div class="p-6 md:p-8 w-full">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="auth_title">Voter Authentication</h2>
                            <p class="text-sm text-gray-500" data-i18n="auth_subtitle">Verify your identity to access the voting portal</p>
                        </div>
                        <div class="flex space-x-2">
                            <span class="px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full dark:bg-green-900 dark:text-green-100" data-i18n="step_1">Step 1 of 4</span>
                        </div>
                    </div>
                    
                    <div class="mb-6 p-4 bg-green-50 rounded-lg dark:bg-green-900/30">
                        <div class="flex items-start">
                            <div class="iebc-seal mr-4 flex-shrink-0">
                                <img src="https://www.iebc.or.ke/wp-content/uploads/2020/04/cropped-iebc-logo.png" alt="IEBC Seal" class="h-16 w-16">
                            </div>
                            <div>
                                <p class="text-sm text-green-800 dark:text-green-200 font-medium" data-i18n="security_info">Your information is protected with end-to-end encryption certified by the National KE-CIRT.</p>
                                <p class="text-xs text-green-600 dark:text-green-300 mt-1" data-i18n="security_details">This system uses AES-256 encryption and blockchain verification to ensure vote integrity. Learn more about our <a href="#" class="underline" data-i18n="security_measures">security measures</a>.</p>
                            </div>
                        </div>
                    </div>
                    
                    <form id="auth-form" class="space-y-6">
                        <div>
                            <label for="national-id" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="national_id_label">National ID Number</label>
                            <div class="mt-1 relative">
                                <input type="text" id="national-id" name="national-id" 
                                       class="block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" 
                                       placeholder="Enter your National ID" required
                                       pattern="\d{8}" title="8-digit National ID number">
                                <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                    <i class="fas fa-id-card text-gray-400"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label for="iebc-code" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="voter_code_label">IEBC Voter Code</label>
                            <div class="mt-1 relative">
                                <input type="text" id="iebc-code" name="iebc-code" 
                                       class="block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" 
                                       placeholder="Enter your IEBC voter code" required
                                       pattern="[A-Z0-9]{6}" title="6-character alphanumeric code">
                                <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                    <i class="fas fa-lock text-gray-400"></i>
                                </div>
                            </div>
                            <p class="mt-1 text-sm text-gray-500 dark:text-gray-400" data-i18n="code_info">This code was sent to you via SMS or provided at registration</p>
                            <button type="button" class="mt-1 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300">
                                <i class="fas fa-question-circle mr-1"></i> <span data-i18n="forgot_code">Forgot your code?</span>
                            </button>
                        </div>
                        
                        <!-- Photo Verification Section -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="photo_verification">Photo Verification</label>
                            <div id="photo-upload" class="photo-upload-container">
                                <div id="upload-instructions">
                                    <i class="fas fa-camera text-3xl text-gray-400 mb-2"></i>
                                    <p class="text-sm text-gray-600 dark:text-gray-400" data-i18n="upload_instructions">Click to upload your photo or drag and drop</p>
                                    <p class="text-xs text-gray-500 mt-1" data-i18n="upload_purpose">For verification against your registered voter photo</p>
                                </div>
                                <img id="photo-preview" class="photo-preview mx-auto mt-2" alt="Preview">
                                <input type="file" id="photo-input" accept="image/*" class="hidden" capture="user">
                            </div>
                            <div id="photo-error" class="text-xs text-red-600 mt-1 hidden" data-i18n="photo_error">Please upload a clear photo of your face</div>
                        </div>
                        
                        <div class="pt-4">
                            <button type="submit" 
                                    class="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 pulse">
                                <span data-i18n="verify_identity">Verify Identity</span>
                                <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </form>
                    
                    <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <h3 class="text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="first_time_voting">First time voting?</h3>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1" data-i18n="registration_info">If you haven't registered as a voter, please visit your nearest IEBC office to register before proceeding.</p>
                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300">
                            <i class="fas fa-map-marker-alt mr-1"></i> <span data-i18n="find_centers">Find registration centers</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Biometric Verification Section (Hidden Initially) -->
        <section id="biometric-section" class="max-w-3xl mx-auto bg-white rounded-xl shadow-md overflow-hidden mb-8 hidden fade-in dark:bg-gray-800">
            <div class="md:flex">
                <div class="p-6 md:p-8 w-full">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="biometric_title">Biometric Verification</h2>
                            <p class="text-sm text-gray-500" data-i18n="biometric_subtitle">Additional security step to confirm your identity</p>
                        </div>
                        <div class="flex space-x-2">
                            <span class="px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full dark:bg-green-900 dark:text-green-100" data-i18n="step_2">Step 2 of 4</span>
                        </div>
                    </div>
                    
                    <div class="mb-6 p-4 bg-green-50 rounded-lg dark:bg-green-900/30">
                        <div class="flex items-start">
                            <i class="fas fa-fingerprint text-green-500 mt-1 mr-2"></i>
                            <div>
                                <p class="text-sm text-green-800 dark:text-green-200" data-i18n="biometric_info">For enhanced security, please complete biometric verification using your registered fingerprint or facial recognition.</p>
                                <p class="text-xs text-green-600 dark:text-green-300 mt-1" data-i18n="biometric_details">This matches against your biometric data collected during voter registration.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center py-8">
                        <div class="mx-auto w-40 h-40 bg-gray-100 rounded-full flex items-center justify-center mb-6 dark:bg-gray-700 relative" id="face-detection-container">
                            <i class="fas fa-user-circle text-5xl text-gray-400" id="face-icon"></i>
                            <div id="face-detection-frame" class="face-detection-frame"></div>
                            <video id="video" width="160" height="160" autoplay muted playsinline style="display: none;"></video>
                            <canvas id="canvas" width="160" height="160" style="display: none;"></canvas>
                            <div id="biometric-animation" class="absolute inset-0 rounded-full border-4 border-transparent animate-ping opacity-75" style="display: none;"></div>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800 dark:text-white" data-i18n="facial_recognition">Facial Recognition</h3>
                        <p class="text-sm text-gray-500 mt-2 dark:text-gray-400" data-i18n="face_instructions">Position your face within the frame and hold still</p>
                        
                        <div class="mt-6 w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
                            <div id="biometric-progress" class="bg-green-600 h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                        <p id="biometric-status" class="text-xs text-gray-500 mt-2 dark:text-gray-400" data-i18n="face_status">Waiting for face detection...</p>
                        
                        <div class="mt-6">
                            <button id="try-fingerprint" class="text-sm text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300">
                                <i class="fas fa-fingerprint mr-1"></i> <span data-i18n="try_fingerprint">Try Fingerprint Instead</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <button id="back-to-auth" class="text-sm text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300">
                            <i class="fas fa-arrow-left mr-1"></i> <span data-i18n="back">Back</span>
                        </button>
                        <button id="skip-biometric" class="text-sm text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300">
                            <span data-i18n="skip_for_now">Skip for now</span> <i class="fas fa-arrow-right ml-1"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Location Selection Section (Hidden Initially) -->
        <section id="location-section" class="max-w-3xl mx-auto bg-white rounded-xl shadow-md overflow-hidden mb-8 hidden fade-in dark:bg-gray-800">
            <div class="md:flex">
                <div class="p-6 md:p-8 w-full">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="location_title">Confirm Your Voting Location</h2>
                            <p class="text-sm text-gray-500" data-i18n="location_subtitle">We'll show you candidates specific to your area</p>
                        </div>
                        <div class="flex space-x-2">
                            <span class="px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full dark:bg-green-900 dark:text-green-100" data-i18n="step_3">Step 3 of 4</span>
                        </div>
                    </div>
                    
                    <div class="mb-6 p-4 bg-green-50 rounded-lg dark:bg-green-900/30">
                        <div class="flex items-start">
                            <i class="fas fa-map-marked-alt text-green-500 mt-1 mr-2"></i>
                            <div>
                                <p class="text-sm text-green-800 dark:text-green-200" data-i18n="location_info">Your voting location helps us display the correct candidates for your electoral area. This should match your registration details.</p>
                                <p class="text-xs text-green-600 dark:text-green-300 mt-1" data-i18n="location_details">If this doesn't match your registration, please visit an IEBC office to update your details.</p>
                            </div>
                        </div>
                    </div>
                    
                    <form id="location-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label for="county" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="county_label">County</label>
                                <select id="county" name="county" 
                                        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                                    <option value="" data-i18n="select_county">Select County</option>
                                    <option value="baringo">Baringo</option>
                                    <option value="bomet">Bomet</option>
                                    <option value="bungoma">Bungoma</option>
                                    <option value="busia">Busia</option>
                                    <option value="elgeyo-marakwet">Elgeyo-Marakwet</option>
                                    <option value="embu">Embu</option>
                                    <option value="garissa">Garissa</option>
                                    <option value="homa-bay">Homa Bay</option>
                                    <option value="isiolo">Isiolo</option>
                                    <option value="kajiado">Kajiado</option>
                                    <option value="kakamega">Kakamega</option>
                                    <option value="kericho">Kericho</option>
                                    <option value="kiambu">Kiambu</option>
                                    <option value="kilifi">Kilifi</option>
                                    <option value="kirinyaga">Kirinyaga</option>
                                    <option value="kisii">Kisii</option>
                                    <option value="kisumu">Kisumu</option>
                                    <option value="kitui">Kitui</option>
                                    <option value="kwale">Kwale</option>
                                    <option value="laikipia">Laikipia</option>
                                    <option value="lamu">Lamu</option>
                                    <option value="machakos">Machakos</option>
                                    <option value="makueni">Makueni</option>
                                    <option value="mandera">Mandera</option>
                                    <option value="marsabit">Marsabit</option>
                                    <option value="meru">Meru</option>
                                    <option value="migori">Migori</option>
                                    <option value="mombasa">Mombasa</option>
                                    <option value="muranga">Murang'a</option>
                                    <option value="nairobi">Nairobi</option>
                                    <option value="nakuru">Nakuru</option>
                                    <option value="nandi">Nandi</option>
                                    <option value="narok">Narok</option>
                                    <option value="nyamira">Nyamira</option>
                                    <option value="nyandarua">Nyandarua</option>
                                    <option value="nyeri">Nyeri</option>
                                    <option value="samburu">Samburu</option>
                                    <option value="siaya">Siaya</option>
                                    <option value="taita-taveta">Taita-Taveta</option>
                                    <option value="tana-river">Tana River</option>
                                    <option value="tharaka-nithi">Tharaka-Nithi</option>
                                    <option value="trans-nzoia">Trans Nzoia</option>
                                    <option value="turkana">Turkana</option>
                                    <option value="uasin-gishu">Uasin Gishu</option>
                                    <option value="vihiga">Vihiga</option>
                                    <option value="wajir">Wajir</option>
                                    <option value="west-pokot">West Pokot</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="constituency" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="constituency_label">Constituency</label>
                                <select id="constituency" name="constituency" disabled
                                        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 bg-gray-100 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                                    <option value="" data-i18n="select_county_first">Select County First</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="ward" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="ward_label">Ward</label>
                                <select id="ward" name="ward" disabled
                                        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 bg-gray-100 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                                    <option value="" data-i18n="select_constituency_first">Select Constituency First</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="pt-4 flex justify-between">
                            <button id="back-to-biometric" type="button" 
                                    class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                                <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                            </button>
                            <button type="submit" 
                                    class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                <span data-i18n="confirm_location">Confirm Location</span> <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </form>
                    
                    <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <h3 class="text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="wrong_location">Not your registered location?</h3>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1" data-i18n="location_update">If this doesn't match your registration details, please visit your nearest IEBC office to update your information.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Voting Ballot Section (Hidden Initially) -->
        <section id="ballot-section" class="max-w-4xl mx-auto hidden fade-in">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="ballot_title">Your Digital Ballot</h2>
                    <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="ballot_subtitle">Make your selections carefully. You cannot change your vote after submission.</p>
                </div>
                <div class="flex space-x-2 mt-2 md:mt-0">
                    <span class="px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full dark:bg-green-900 dark:text-green-100" data-i18n="step_4">Step 4 of 4</span>
                    <span id="voter-location" class="px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full dark:bg-green-900 dark:text-green-100"></span>
                    <button id="print-ballot" class="px-3 py-1 bg-gray-100 text-gray-800 text-xs font-medium rounded-full hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600">
                        <i class="fas fa-print mr-1"></i> <span data-i18n="print">Print</span>
                    </button>
                </div>
            </div>
            
            <!-- Time Remaining Counter -->
            <div id="time-remaining" class="mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-lg dark:bg-yellow-900/20 dark:border-yellow-600">
                <div class="flex items-center">
                    <i class="fas fa-clock text-yellow-500 mr-3 text-xl"></i>
                    <div>
                        <h3 class="text-sm font-medium text-yellow-800 dark:text-yellow-200" data-i18n="time_remaining">Session Time Remaining</h3>
                        <div class="flex items-center mt-1">
                            <span id="timer" class="text-xl font-bold text-yellow-800 dark:text-yellow-200">15:00</span>
                            <span class="ml-2 text-sm text-yellow-700 dark:text-yellow-300" data-i18n="minutes">minutes</span>
                        </div>
                        <p class="mt-1 text-xs text-yellow-700 dark:text-yellow-300" data-i18n="session_warning">Your session will expire automatically for security reasons.</p>
                    </div>
                </div>
            </div>
            
            <!-- Ballot Navigation Tabs -->
            <div class="mb-6 border-b border-gray-200 dark:border-gray-700">
                <nav class="-mb-px flex space-x-8 overflow-x-auto">
                    <button id="tab-president" class="border-b-2 border-green-500 text-green-600 px-4 py-3 text-sm font-medium dark:border-green-400 dark:text-green-400">
                        <span data-i18n="president">President</span>
                    </button>
                    <button id="tab-governor" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 px-4 py-3 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                        <span data-i18n="governor">Governor</span>
                    </button>
                    <button id="tab-senator" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 px-4 py-3 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                        <span data-i18n="senator">Senator</span>
                    </button>
                    <button id="tab-mp" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 px-4 py-3 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                        <span data-i18n="mp">MP</span>
                    </button>
                    <button id="tab-mca" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 px-4 py-3 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                        <span data-i18n="mca">MCA</span>
                    </button>
                    <button id="tab-referendum" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 px-4 py-3 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                        <span data-i18n="referendum">Referendum</span>
                    </button>
                </nav>
            </div>
            
            <!-- Presidential Ballot -->
            <div id="president-content" class="ballot-content">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-landmark text-green-500 mr-2"></i>
                            <span data-i18n="president_deputy">President & Deputy President</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_one_pair">Vote for one candidate pair</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <!-- Candidate 1 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="president-1" name="president" type="radio" class="iebc-radio mt-3">
                                <label for="president-1" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/william-ruto.jpg" alt="William Ruto">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png" alt="UDA Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">William Ruto</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="uda_party">United Democratic Alliance</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200" data-i18n="incumbent">
                                                Incumbent
                                            </span>
                                        </div>
                                        <div class="mt-2 flex items-center">
                                            <i class="fas fa-user-friends text-gray-400 text-xs mr-1"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="deputy">Deputy: Rigathi Gachagua</p>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="president-1">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 2 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="president-2" name="president" type="radio" class="iebc-radio mt-3">
                                <label for="president-2" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/raila-odinga.jpg" alt="Raila Odinga">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Odm_logo.svg/1200px-Odm_logo.svg.png" alt="ODM Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Raila Odinga</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="odm_party">Orange Democratic Movement</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200" data-i18n="former_pm">
                                                Former PM
                                            </span>
                                        </div>
                                        <div class="mt-2 flex items-center">
                                            <i class="fas fa-user-friends text-gray-400 text-xs mr-1"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="deputy">Deputy: Martha Karua</p>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="president-2">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 3 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="president-3" name="president" type="radio" class="iebc-radio mt-3">
                                <label for="president-3" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/george-wajackoyah.jpg" alt="George Wajackoyah">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Roots_Party_Kenya_logo.svg/1200px-Roots_Party_Kenya_logo.svg.png" alt="Roots Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">George Wajackoyah</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="roots_party">Roots Party Kenya</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200" data-i18n="professor">
                                                Professor
                                            </span>
                                        </div>
                                        <div class="mt-2 flex items-center">
                                            <i class="fas fa-user-friends text-gray-400 text-xs mr-1"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="deputy">Deputy: Justina Wamae</p>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="president-3">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="president-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="president-next" class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        <span data-i18n="next_governor">Next: Governor</span> <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- Governor Ballot (Hidden Initially) -->
            <div id="governor-content" class="ballot-content hidden">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-university text-green-500 mr-2"></i>
                            <span data-i18n="governor_deputy">Governor & Deputy Governor</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_one_county">Vote for one candidate pair in your county</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <!-- Candidate 1 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="governor-1" name="governor" type="radio" class="iebc-radio mt-3">
                                <label for="governor-1" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/johnson-sakaja.jpg" alt="Johnson Sakaja">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png" alt="UDA Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Johnson Sakaja</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="uda_party">United Democratic Alliance</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200" data-i18n="senator">
                                                Senator
                                            </span>
                                        </div>
                                        <div class="mt-2 flex items-center">
                                            <i class="fas fa-user-friends text-gray-400 text-xs mr-1"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="deputy">Deputy: James Muchiri</p>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="governor-1">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 2 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="governor-2" name="governor" type="radio" class="iebc-radio mt-3">
                                <label for="governor-2" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/polycarp-igathe.jpg" alt="Polycarp Igathe">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Jubilee_Party_Logo.svg/1200px-Jubilee_Party_Logo.svg.png" alt="Jubilee Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Polycarp Igathe</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="jubilee_party">Jubilee Party</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200" data-i18n="businessman">
                                                Businessman
                                            </span>
                                        </div>
                                        <div class="mt-2 flex items-center">
                                            <i class="fas fa-user-friends text-gray-400 text-xs mr-1"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="deputy">Deputy: Nancy Mwashigadi</p>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="governor-2">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="governor-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="governor-next" class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        <span data-i18n="next_senator">Next: Senator</span> <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- Senator Ballot (Hidden Initially) -->
            <div id="senator-content" class="ballot-content hidden">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-user-tie text-green-500 mr-2"></i>
                            <span data-i18n="senator">Senator</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_one_county">Vote for one candidate in your county</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <!-- Candidate 1 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="senator-1" name="senator" type="radio" class="iebc-radio mt-3">
                                <label for="senator-1" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/tabitha-mutinda.jpg" alt="Tabitha Mutinda">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png" alt="UDA Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Tabitha Mutinda</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="uda_party">United Democratic Alliance</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200" data-i18n="lawyer">
                                                Lawyer
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="senator-1">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 2 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="senator-2" name="senator" type="radio" class="iebc-radio mt-3">
                                <label for="senator-2" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/edwin-sifuna.jpg" alt="Edwin Sifuna">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Odm_logo.svg/1200px-Odm_logo.svg.png" alt="ODM Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Edwin Sifuna</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="odm_party">Orange Democratic Movement</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200" data-i18n="secretary_general">
                                                Secretary General
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="senator-2">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="senator-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="senator-next" class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        <span data-i18n="next_mp">Next: MP</span> <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- MP Ballot (Hidden Initially) -->
            <div id="mp-content" class="ballot-content hidden">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-users text-green-500 mr-2"></i>
                            <span data-i18n="member_parliament">Member of Parliament</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_one_constituency">Vote for one candidate in your constituency</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <!-- Candidate 1 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="mp-1" name="mp" type="radio" class="iebc-radio mt-3">
                                <label for="mp-1" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://randomuser.me/api/portraits/women/32.jpg" alt="Jane Muthoni">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png" alt="UDA Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Jane Muthoni</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="uda_party">United Democratic Alliance</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200" data-i18n="businesswoman">
                                                Businesswoman
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="mp-1">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 2 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="mp-2" name="mp" type="radio" class="iebc-radio mt-3">
                                <label for="mp-2" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://randomuser.me/api/portraits/men/45.jpg" alt="John Kamau">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Odm_logo.svg/1200px-Odm_logo.svg.png" alt="ODM Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">John Kamau</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="odm_party">Orange Democratic Movement</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200" data-i18n="incumbent">
                                                Incumbent
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="mp-2">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="mp-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="mp-next" class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        <span data-i18n="next_mca">Next: MCA</span> <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- MCA Ballot (Hidden Initially) -->
            <div id="mca-content" class="ballot-content hidden">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-home text-green-500 mr-2"></i>
                            <span data-i18n="member_county_assembly">Member of County Assembly</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_one_ward">Vote for one candidate in your ward</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <!-- Candidate 1 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="mca-1" name="mca" type="radio" class="iebc-radio mt-3">
                                <label for="mca-1" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://randomuser.me/api/portraits/men/28.jpg" alt="David Omondi">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png" alt="UDA Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">David Omondi</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="uda_party">United Democratic Alliance</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200" data-i18n="youth">
                                                Youth
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="mca-1">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 2 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="mca-2" name="mca" type="radio" class="iebc-radio mt-3">
                                <label for="mca-2" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://randomuser.me/api/portraits/women/42.jpg" alt="Grace Wambui">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Odm_logo.svg/1200px-Odm_logo.svg.png" alt="ODM Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Grace Wambui</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="odm_party">Orange Democratic Movement</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200" data-i18n="incumbent">
                                                Incumbent
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="mca-2">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="mca-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="mca-next" class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        <span data-i18n="next_referendum">Next: Referendum</span> <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- Referendum Ballot (Hidden Initially) -->
            <div id="referendum-content" class="ballot-content hidden">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-vote-yea text-green-500 mr-2"></i>
                            <span data-i18n="constitutional_referendum">Constitutional Referendum</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_amendments">Vote on the proposed constitutional amendments</p>
                    </div>
                    <div class="p-6">
                        <div class="mb-4">
                            <h4 class="text-md font-medium text-gray-800 dark:text-white" data-i18n="amendment_article">Proposed Amendment to Article 1 of the Constitution</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1" data-i18n="amendment_description">This amendment seeks to establish a parliamentary system of government with a Prime Minister as head of government and a President as head of state.</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="referendum-yes" name="referendum" type="radio" class="iebc-radio">
                                <label for="referendum-yes" class="ml-3 flex items-center w-full">
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-900 dark:text-white" data-i18n="yes">Yes</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="support_amendment">I support the proposed amendment</p>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="flex items-center p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="referendum-no" name="referendum" type="radio" class="iebc-radio">
                                <label for="referendum-no" class="ml-3 flex items-center w-full">
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-900 dark:text-white" data-i18n="no">No</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="reject_amendment">I reject the proposed amendment</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="referendum-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="submit-ballot" 
                            class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 pulse">
                        <i class="fas fa-check-circle mr-2"></i> <span data-i18n="submit_vote">Submit Your Vote</span>
                    </button>
                </div>
            </div>
        </section>
            
        <!-- Confirmation Modal (Hidden Initially) -->
        <div id="confirmation-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6 mx-4 dark:bg-gray-800">
                <div class="text-center">
                    <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30">
                        <i class="fas fa-check text-green-600 text-2xl dark:text-green-400"></i>
                    </div>
                    <h3 class="mt-4 text-lg font-medium text-gray-900 dark:text-white" data-i18n="vote_submitted">Vote Submitted Successfully!</h3>
                    <div class="mt-4 px-4 py-3 bg-green-50 rounded-md dark:bg-green-900/30">
                        <p class="text-sm text-green-800 dark:text-green-200" data-i18n="vote_recorded">Your vote has been securely recorded with transaction ID:</p>
                        <p class="font-mono text-sm font-bold mt-1 text-green-900 dark:text-green-300">TX-7A83B92C-IEBC-2023</p>
                        <p class="text-xs text-green-700 dark:text-green-300 mt-1">Timestamp: <span id="vote-timestamp"></span></p>
                    </div>
                    
                    <!-- Blockchain Transaction Viewer -->
                    <div class="mt-4">
                        <h4 class="text-sm font-medium text-gray-800 dark:text-gray-200 mb-2" data-i18n="blockchain_details">Blockchain Transaction Details</h4>
                        <div class="blockchain-viewer dark:bg-gray-700 dark:text-gray-300">
                            <div class="blockchain-line"><span class="blockchain-key">Block:</span> #1,245,678</div>
                            <div class="blockchain-line"><span class="blockchain-key">Hash:</span> 0x4a8e...3f2d</div>
                            <div class="blockchain-line"><span class="blockchain-key">From:</span> VoterWallet:0x1a2b...3c4d</div>
                            <div class="blockchain-line"><span class="blockchain-key">To:</span> IEBCWallet:0x5e6f...7g8h</div>
                            <div class="blockchain-line"><span class="blockchain-key">Value:</span> 1 VOTE</div>
                            <div class="blockchain-line"><span class="blockchain-key">Status:</span> Confirmed (12 confirmations)</div>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <p class="text-sm text-gray-600 dark:text-gray-300" data-i18n="download_receipt">You can download your voting receipt for your records.</p>
                        <div class="mt-4 flex justify-center space-x-3">
                            <button id="download-receipt" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                <i class="fas fa-download mr-2"></i> <span data-i18n="download_receipt_btn">Download Receipt</span>
                            </button>
                            <button id="close-modal" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                                <span data-i18n="close">Close</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Candidate Details Modal (Hidden Initially) -->
        <div id="candidate-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 mx-4 max-h-[90vh] overflow-y-auto dark:bg-gray-800">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 id="candidate-name" class="text-xl font-bold text-gray-900 dark:text-white"></h3>
                        <p id="candidate-position" class="text-sm text-gray-500 dark:text-gray-400"></p>
                    </div>
                    <button id="close-candidate-modal" class="text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-1 flex flex-col items-center">
                        <img id="candidate-photo" src="" alt="Candidate photo" class="w-40 h-40 rounded-full object-cover border-4 border-white shadow-md">
                        <img id="party-logo" src="" alt="Party logo" class="w-16 h-16 mt-4 object-contain">
                        <p id="party-name" class="mt-2 text-sm font-medium text-gray-700 dark:text-gray-300"></p>
                    </div>
                    <div class="md:col-span-2">
                        <div class="mb-6">
                            <h4 class="text-md font-medium text-gray-800 dark:text-white mb-2" data-i18n="biography">Biography</h4>
                            <p id="candidate-bio" class="text-sm text-gray-600 dark:text-gray-300"></p>
                        </div>
                        
                        <div class="mb-6">
                            <h4 class="text-md font-medium text-gray-800 dark:text-white mb-2" data-i18n="manifesto">Key Manifesto Points</h4>
                            <ul id="manifesto-points" class="list-disc pl-5 text-sm text-gray-600 dark:text-gray-300 space-y-1">
                                <!-- Will be populated by JS -->
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="text-md font-medium text-gray-800 dark:text-white mb-2" data-i18n="education">Education Background</h4>
                            <ul id="education" class="list-disc pl-5 text-sm text-gray-600 dark:text-gray-300 space-y-1">
                                <!-- Will be populated by JS -->
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
                    <h4 class="text-md font-medium text-gray-800 dark:text-white mb-2" data-i18n="campaign_videos">Campaign Videos</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-100 aspect-video flex items-center justify-center rounded-lg dark:bg-gray-700">
                            <i class="fas fa-play text-gray-400 text-2xl"></i>
                        </div>
                        <div class="bg-gray-100 aspect-video flex items-center justify-center rounded-lg dark:bg-gray-700">
                            <i class="fas fa-play text-gray-400 text-2xl"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Floating Help Button -->
    <div class="floating-help no-print">
        <button id="help-button" class="w-14 h-14 bg-green-600 rounded-full shadow-lg flex items-center justify-center text-white hover:bg-green-700 transition-colors">
            <i class="fas fa-question text-xl"></i>
        </button>
    </div>

    <!-- Help Modal (Hidden Initially) -->
    <div id="help-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6 mx-4 dark:bg-gray-800">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-900 dark:text-white" data-i18n="help_title">Voting Portal Help</h3>
                <button id="close-help-modal" class="text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <h4 class="text-sm font-medium text-gray-800 dark:text-gray-200 mb-2" data-i18n="how_to_vote">How to vote</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400">1. <span data-i18n="step1">Verify your identity using your National ID and IEBC voter code</span></p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">2. <span data-i18n="step2">Complete biometric verification</span></p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">3. <span data-i18n="step3">Confirm your voting location</span></p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">4. <span data-i18n="step4">Select your preferred candidates for each position</span></p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">5. <span data-i18n="step5">Review your selections and submit your vote</span></p>
                </div>
                
                <div>
                    <h4 class="text-sm font-medium text-gray-800 dark:text-gray-200 mb-2" data-i18n="need_assistance">Need assistance?</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400"><span data-i18n="call_helpline">Call IEBC helpline:</span> <span class="font-medium">020 276 9000</span></p>
                    <p class="text-sm text-gray-600 dark:text-gray-400"><span data-i18n="email">Email:</span> <span class="font-medium">help@iebc.or.ke</span></p>
                    <p class="text-sm text-gray-600 dark:text-gray-400"><span data-i18n="sms">SMS:</span> <span class="font-medium">22885</span></p>
                </div>
                
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                    <button id="emergency-button" class="w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                        <i class="fas fa-exclamation-triangle mr-2"></i> <span data-i18n="emergency_assistance">Emergency Assistance</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="gradient-bg text-white py-8 no-print">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <img src="https://www.iebc.or.ke/wp-content/uploads/2020/04/cropped-iebc-logo.png" alt="IEBC Logo" class="h-12 mb-4">
                    <p class="text-sm" data-i18n="footer_motto">Ensuring Free, Fair and Credible Elections</p>
                    <div class="mt-4 flex space-x-4">
                        <a href="#" class="text-white hover:text-green-200"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-white hover:text-green-200"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-white hover:text-green-200"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white hover:text-green-200"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold uppercase tracking-wider mb-4" data-i18n="voting">Voting</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-sm hover:text-green-200" data-i18n="how_to_vote">How to Vote</a></li>
                        <li><a href="#" class="text-sm hover:text-green-200" data-i18n="voter_registration">Voter Registration</a></li>
                        <li><a href="#" class="text-sm hover:text-green-200" data-i18n="voter_verification">Voter Verification</a></li>
                        <li><a href="#" class="text-sm hover:text-green-200" data-i18n="polling_stations">Polling Stations</a></li>
                        <li><a href="#" class="text-sm hover:text-green-200" data-i18n="election_calendar">Election Calendar</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold uppercase tracking-wider mb-4" data-i18n="information">Information</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-sm hover:text-green-200" data-i18n="about_iebc">About IEBC</a></li>
                        <li><a href="#" class="text-sm hover:text-green-200" data-i18n="electoral_laws">Electoral Laws</a></li>
                        <li><a href="#" class="text-sm hover:text-green-200" data-i18n="candidate_nomination">Candidate Nomination</a></li>
                        <li><a href="#" class="text-sm hover:text-green-200" data-i18n="election_results">Election Results</a></li>
                        <li><a href="#" class="text-sm hover:text-green-200" data-i18n="faqs">FAQs</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold uppercase tracking-wider mb-4" data-i18n="contact">Contact</h3>
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <i class="fas fa-map-marker-alt mt-1 mr-2"></i>
                            <span class="text-sm">Anniversary Towers, University Way, Nairobi</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone-alt mr-2"></i>
                            <span class="text-sm">020 276 9000</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-2"></i>
                            <span class="text-sm">info@iebc.or.ke</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-globe mr-2"></i>
                            <span class="text-sm">www.iebc.or.ke</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="mt-8 pt-8 border-t border-green-400 text-center text-xs">
                <p data-i18n="copyright">Â© 2023 Independent Electoral and Boundaries Commission. All rights reserved.</p>
                <p class="mt-1" data-i18n="security_warning">This is a secure government system. Unauthorized access is prohibited.</p>
                <div class="mt-2 flex items-center justify-center space-x-4">
                    <span class="security-indicator" data-i18n="secure_platform">Secure Platform</span>
                    <span class="security-indicator" data-i18n="ke_cirt">KE-CIRT Certified</span>
                    <span class="security-indicator" data-i18n="gdpr">GDPR Compliant</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Enhanced JavaScript with new features
        document.addEventListener('DOMContentLoaded', function() {
            // Load face-api.js models
            Promise.all([
                faceapi.nets.tinyFaceDetector.loadFromUri('/models'),
                faceapi.nets.faceLandmark68Net.loadFromUri('/models'),
                faceapi.nets.faceRecognitionNet.loadFromUri('/models')
            ]).then(startFaceDetection).catch(err => {
                console.error('Error loading face detection models:', err);
                document.getElementById('biometric-status').textContent = 'Face detection not available';
            });

            // Dark mode toggle
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            darkModeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                const icon = darkModeToggle.querySelector('i');
                if (document.body.classList.contains('dark-mode')) {
                    icon.classList.replace('fa-moon', 'fa-sun');
                    localStorage.setItem('darkMode', 'enabled');
                } else {
                    icon.classList.replace('fa-sun', 'fa-moon');
                    localStorage.setItem('darkMode', 'disabled');
                }
            });

            // Check for saved dark mode preference
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
                darkModeToggle.querySelector('i').classList.replace('fa-moon', 'fa-sun');
            }

            // High contrast mode toggle
            const highContrastToggle = document.getElementById('high-contrast');
            highContrastToggle.addEventListener('click', function() {
                document.body.classList.toggle('high-contrast');
                if (document.body.classList.contains('high-contrast')) {
                    localStorage.setItem('highContrast', 'enabled');
                } else {
                    localStorage.setItem('highContrast', 'disabled');
                }
            });

            // Check for saved high contrast preference
            if (localStorage.getItem('highContrast') === 'enabled') {
                document.body.classList.add('high-contrast');
            }

            // Text size adjustment
            const textIncrease = document.getElementById('text-increase');
            const textDecrease = document.getElementById('text-decrease');
            let fontSize = 1;

            textIncrease.addEventListener('click', function() {
                fontSize += 0.1;
                document.body.style.fontSize = `${fontSize}rem`;
                localStorage.setItem('fontSize', fontSize);
            });

            textDecrease.addEventListener('click', function() {
                fontSize -= 0.1;
                document.body.style.fontSize = `${fontSize}rem`;
                localStorage.setItem('fontSize', fontSize);
            });

            // Check for saved font size preference
            const savedFontSize = localStorage.getItem('fontSize');
            if (savedFontSize) {
                fontSize = parseFloat(savedFontSize);
                document.body.style.fontSize = `${fontSize}rem`;
            }

            // Screen reader mode
            const screenReaderToggle = document.getElementById('screen-reader');
            screenReaderToggle.addEventListener('click', function() {
                alert('Screen reader mode activated. Please use your screen reader to navigate the portal.');
            });

            // Form navigation
            const authForm = document.getElementById('auth-form');
            const authSection = document.getElementById('auth-section');
            const biometricSection = document.getElementById('biometric-section');
            const locationSection = document.getElementById('location-section');
            const ballotSection = document.getElementById('ballot-section');
            const progressFill = document.getElementById('progress-fill');

            // Update verification steps
            function updateVerificationSteps(currentStep) {
                document.querySelectorAll('.verification-step').forEach((step, index) => {
                    if (index + 1 < currentStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (index + 1 === currentStep) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                });
            }

            authForm.addEventListener('submit', function(e) {
                e.preventDefault();
                authSection.classList.add('hidden');
                biometricSection.classList.remove('hidden');
                progressFill.style.width = '66%';
                updateVerificationSteps(2);
                startFaceDetection();
            });

            document.getElementById('back-to-auth').addEventListener('click', function() {
                biometricSection.classList.add('hidden');
                authSection.classList.remove('hidden');
                progressFill.style.width = '33%';
                updateVerificationSteps(1);
            });

            document.getElementById('skip-biometric').addEventListener('click', function() {
                biometricSection.classList.add('hidden');
                locationSection.classList.remove('hidden');
                progressFill.style.width = '100%';
                updateVerificationSteps(3);
            });

            document.getElementById('try-fingerprint').addEventListener('click', function() {
                document.getElementById('biometric-status').textContent = 'Place your finger on the fingerprint sensor';
                simulateBiometricVerification();
            });

            // Location form handling
            const locationForm = document.getElementById('location-form');
            const countySelect = document.getElementById('county');
            const constituencySelect = document.getElementById('constituency');
            const wardSelect = document.getElementById('ward');

            // Sample data for constituencies and wards
            const countyData = {
                'nairobi': {
                    constituencies: ['Westlands', 'Dagoretti North', 'Dagoretti South', 'Langata', 'Kibra', 'Roysambu', 'Kasarani', 'Ruaraka', 'Embakasi South', 'Embakasi North', 'Embakasi Central', 'Embakasi East', 'Embakasi West', 'Makadara', 'Kamukunji', 'Starehe', 'Mathare'],
                    wards: {
                        'Westlands': ['Parklands/Highridge', 'Karura', 'Kangemi', 'Mountain View'],
                        'Dagoretti North': ['Kilimani', 'Kawangware', 'Gatina', 'Kileleshwa', 'Kabiro'],
                        // Add more wards for other constituencies
                    }
                },
                'kiambu': {
                    constituencies: ['Gatundu South', 'Gatundu North', 'Juja', 'Thika Town', 'Ruiru', 'Githunguri', 'Kiambaa', 'Kiambu', 'Kabete', 'Kikuyu', 'Limuru', 'Lari'],
                    wards: {
                        'Gatundu South': ['Gatundu South', 'Gatundu North', 'Gatundu Central'],
                        'Juja': ['Juja', 'Witeithie', 'Kalimoni', 'Theta'],
                        // Add more wards for other constituencies
                    }
                }
                // Add more counties as needed
            };

            countySelect.addEventListener('change', function() {
                const county = this.value;
                constituencySelect.innerHTML = '<option value="" data-i18n="select_constituency">Select Constituency</option>';
                wardSelect.innerHTML = '<option value="" data-i18n="select_ward">Select Ward</option>';
                
                if (county && countyData[county]) {
                    constituencySelect.disabled = false;
                    countyData[county].constituencies.forEach(constituency => {
                        const option = document.createElement('option');
                        option.value = constituency.toLowerCase().replace(' ', '-');
                        option.textContent = constituency;
                        constituencySelect.appendChild(option);
                    });
                } else {
                    constituencySelect.disabled = true;
                    wardSelect.disabled = true;
                }
            });

            constituencySelect.addEventListener('change', function() {
                const county = countySelect.value;
                const constituency = this.value;
                wardSelect.innerHTML = '<option value="" data-i18n="select_ward">Select Ward</option>';
                
                if (county && constituency && countyData[county] && countyData[county].wards[constituency]) {
                    wardSelect.disabled = false;
                    countyData[county].wards[constituency].forEach(ward => {
                        const option = document.createElement('option');
                        option.value = ward.toLowerCase().replace(' ', '-');
                        option.textContent = ward;
                        wardSelect.appendChild(option);
                    });
                } else {
                    wardSelect.disabled = true;
                }
            });

            locationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                locationSection.classList.add('hidden');
                ballotSection.classList.remove('hidden');
                
                // Set voter location indicator
                const county = countySelect.options[countySelect.selectedIndex].text;
                const constituency = constituencySelect.options[constituencySelect.selectedIndex].text;
                document.getElementById('voter-location').textContent = `${county}, ${constituency}`;
                
                updateVerificationSteps(4);
                startSessionTimer();
            });

            document.getElementById('back-to-biometric').addEventListener('click', function() {
                locationSection.classList.add('hidden');
                biometricSection.classList.remove('hidden');
                progressFill.style.width = '66%';
                updateVerificationSteps(2);
            });

            // Ballot navigation
            const tabs = ['president', 'governor', 'senator', 'mp', 'mca', 'referendum'];
            
            tabs.forEach(tab => {
                const tabButton = document.getElementById(`tab-${tab}`);
                const content = document.getElementById(`${tab}-content`);
                const backButton = document.getElementById(`${tab}-back`);
                const nextButton = document.getElementById(`${tab}-next`);
                
                tabButton.addEventListener('click', function() {
                    // Hide all contents
                    document.querySelectorAll('.ballot-content').forEach(el => el.classList.add('hidden'));
                    // Show selected content
                    content.classList.remove('hidden');
                    
                    // Update active tab
                    document.querySelectorAll('nav button').forEach(btn => {
                        btn.classList.remove('border-green-500', 'text-green-600', 'dark:border-green-400', 'dark:text-green-400');
                        btn.classList.add('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300', 'dark:text-gray-400', 'dark:hover:text-gray-300');
                    });
                    this.classList.add('border-green-500', 'text-green-600', 'dark:border-green-400', 'dark:text-green-400');
                    this.classList.remove('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300', 'dark:text-gray-400', 'dark:hover:text-gray-300');
                });
                
                if (backButton) {
                    backButton.addEventListener('click', function() {
                        const prevTab = tabs[tabs.indexOf(tab) - 1];
                        document.getElementById(`tab-${prevTab}`).click();
                    });
                }
                
                if (nextButton) {
                    nextButton.addEventListener('click', function() {
                        const nextTab = tabs[tabs.indexOf(tab) + 1];
                        document.getElementById(`tab-${nextTab}`).click();
                    });
                }
            });

            // Start with president tab active
            document.getElementById('tab-president').click();

            // Session timer
            function startSessionTimer() {
                let minutes = 14;
                let seconds = 59;
                const timerElement = document.getElementById('timer');
                
                const timer = setInterval(function() {
                    timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    if (minutes === 0 && seconds === 0) {
                        clearInterval(timer);
                        alert('Your session has expired. Please log in again.');
                        // Redirect to login or reset the form
                    } else if (seconds === 0) {
                        minutes--;
                        seconds = 59;
                    } else {
                        seconds--;
                    }
                    
                    // Change color when 5 minutes remain
                    if (minutes === 5 && seconds === 0) {
                        document.getElementById('time-remaining').classList.remove('bg-yellow-50', 'border-yellow-400', 'dark:bg-yellow-900/20', 'dark:border-yellow-600');
                        document.getElementById('time-remaining').classList.add('bg-red-50', 'border-red-400', 'dark:bg-red-900/20', 'dark:border-red-600');
                        document.getElementById('time-remaining').querySelector('i').classList.remove('text-yellow-500');
                        document.getElementById('time-remaining').querySelector('i').classList.add('text-red-500');
                        document.getElementById('timer').classList.remove('text-yellow-800', 'dark:text-yellow-200');
                        document.getElementById('timer').classList.add('text-red-800', 'dark:text-red-200');
                    }
                }, 1000);
            }

            // Photo upload functionality
            const photoUpload = document.getElementById('photo-upload');
            const photoInput = document.getElementById('photo-input');
            const photoPreview = document.getElementById('photo-preview');
            const uploadInstructions = document.getElementById('upload-instructions');
            
            photoUpload.addEventListener('click', function() {
                photoInput.click();
            });
            
            photoUpload.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('dragover');
            });
            
            photoUpload.addEventListener('dragleave', function() {
                this.classList.remove('dragover');
            });
            
            photoUpload.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('dragover');
                if (e.dataTransfer.files.length) {
                    photoInput.files = e.dataTransfer.files;
                    handlePhotoUpload(e.dataTransfer.files[0]);
                }
            });
            
            photoInput.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    handlePhotoUpload(this.files[0]);
                }
            });
            
            function handlePhotoUpload(file) {
                if (!file.type.match('image.*')) {
                    document.getElementById('photo-error').classList.remove('hidden');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    photoPreview.src = e.target.result;
                    photoPreview.style.display = 'block';
                    uploadInstructions.style.display = 'none';
                    document.getElementById('photo-error').classList.add('hidden');
                };
                reader.readAsDataURL(file);
            }

            // Face detection
            function startFaceDetection() {
                const video = document.getElementById('video');
                const canvas = document.getElementById('canvas');
                const faceDetectionFrame = document.getElementById('face-detection-frame');
                const faceIcon = document.getElementById('face-icon');
                const biometricStatus = document.getElementById('biometric-status');
                const biometricProgress = document.getElementById('biometric-progress');
                const biometricAnimation = document.getElementById('biometric-animation');
                
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function(stream) {
                        video.srcObject = stream;
                        video.style.display = 'block';
                        faceIcon.style.display = 'none';
                        
                        let detectionInterval = setInterval(async () => {
                            const detections = await faceapi.detectAllFaces(video, new faceapi.TinyFaceDetectorOptions())
                                .withFaceLandmarks()
                                .withFaceDescriptors();
                            
                            if (detections.length > 0) {
                                const detection = detections[0];
                                const box = detection.detection.box;
                                
                                // Adjust box coordinates to match the display size
                                const displaySize = { width: 160, height: 160 };
                                const resizedBox = {
                                    x: box.x * (displaySize.width / video.videoWidth),
                                    y: box.y * (displaySize.height / video.videoHeight),
                                    width: box.width * (displaySize.width / video.videoWidth),
                                    height: box.height * (displaySize.height / video.videoHeight)
                                };
                                
                                // Show face detection frame
                                faceDetectionFrame.style.display = 'block';
                                faceDetectionFrame.style.left = `${resizedBox.x}px`;
                                faceDetectionFrame.style.top = `${resizedBox.y}px`;
                                faceDetectionFrame.style.width = `${resizedBox.width}px`;
                                faceDetectionFrame.style.height = `${resizedBox.height}px`;
                                
                                // Update status
                                biometricStatus.textContent = 'Face detected. Verifying...';
                                
                                // Simulate verification progress
                                let progress = 0;
                                const progressInterval = setInterval(() => {
                                    progress += 5;
                                    biometricProgress.style.width = `${progress}%`;
                                    
                                    if (progress >= 100) {
                                        clearInterval(progressInterval);
                                        clearInterval(detectionInterval);
                                        biometricStatus.textContent = 'Verification successful!';
                                        biometricAnimation.style.display = 'block';
                                        biometricAnimation.style.borderColor = '#10b981';
                                        
                                        // Proceed to next step after delay
                                        setTimeout(() => {
                                            biometricSection.classList.add('hidden');
                                            locationSection.classList.remove('hidden');
                                            progressFill.style.width = '100%';
                                            updateVerificationSteps(3);
                                            
                                            // Stop video stream
                                            stream.getTracks().forEach(track => track.stop());
                                        }, 1000);
                                    }
                                }, 100);
                            } else {
                                faceDetectionFrame.style.display = 'none';
                                biometricStatus.textContent = 'Position your face within the frame';
                            }
                        }, 500);
                    })
                    .catch(function(err) {
                        console.error('Error accessing camera:', err);
                        biometricStatus.textContent = 'Camera access denied. Please try fingerprint verification.';
                    });
            }

            // Simulate biometric verification
            function simulateBiometricVerification() {
                const biometricStatus = document.getElementById('biometric-status');
                const biometricProgress = document.getElementById('biometric-progress');
                const biometricAnimation = document.getElementById('biometric-animation');
                
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 5;
                    biometricProgress.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(progressInterval);
                        biometricStatus.textContent = 'Verification successful!';
                        biometricAnimation.style.display = 'block';
                        biometricAnimation.style.borderColor = '#10b981';
                        
                        // Proceed to next step after delay
                        setTimeout(() => {
                            biometricSection.classList.add('hidden');
                            locationSection.classList.remove('hidden');
                            progressFill.style.width = '100%';
                            updateVerificationSteps(3);
                        }, 1000);
                    }
                }, 100);
            }

            // Candidate details modal
            const candidateDetailsBtns = document.querySelectorAll('.candidate-details-btn');
            const candidateModal = document.getElementById('candidate-modal');
            const closeCandidateModal = document.getElementById('close-candidate-modal');
            
            // Sample candidate data
            const candidates = {
                'president-1': {
                    name: 'William Ruto',
                    position: 'Presidential Candidate - United Democratic Alliance (UDA)',
                    photo: 'https://www.iebc.or.ke/wp-content/uploads/2022/08/william-ruto.jpg',
                    partyLogo: 'https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png',
                    partyName: 'United Democratic Alliance',
                    bio: 'Current President of Kenya, former Deputy President (2013-2022). Holds a PhD in Plant Ecology from the University of Nairobi. Former Minister for Agriculture and Minister for Higher Education.',
                    manifesto: [
                        'Economic empowerment through the "Bottom-Up" economic model',
                        'Affordable housing for all Kenyans',
                        'Universal healthcare coverage',
                        'Support for small and medium enterprises',
                        'Agricultural transformation and food security'
                    ],
                    education: [
                        'PhD in Plant Ecology, University of Nairobi',
                        'MSc in Plant Ecology, University of Nairobi',
                        'BSc in Botany and Zoology, University of Nairobi'
                    ]
                },
                'president-2': {
                    name: 'Raila Odinga',
                    position: 'Presidential Candidate - Orange Democratic Movement (ODM)',
                    photo: 'https://www.iebc.or.ke/wp-content/uploads/2022/08/raila-odinga.jpg',
                    partyLogo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Odm_logo.svg/1200px-Odm_logo.svg.png',
                    partyName: 'Orange Democratic Movement',
                    bio: 'Former Prime Minister of Kenya (2008-2013). Veteran politician and democracy activist. Holds a Master\'s degree in Mechanical Engineering from the Technical University of Magdeburg, Germany.',
                    manifesto: [
                        'Institutional reforms and good governance',
                        'Universal social protection program',
                        'Free secondary education and vocational training',
                        'Infrastructure development and industrialization',
                        'Land reforms and equitable distribution'
                    ],
                    education: [
                        'MSc in Mechanical Engineering, Technical University of Magdeburg',
                        'Diploma in Mechanical Engineering, Technical University of Magdeburg',
                        'Maranda High School'
                    ]
                },
                'president-3': {
                    name: 'George Wajackoyah',
                    position: 'Presidential Candidate - Roots Party Kenya',
                    photo: 'https://www.iebc.or.ke/wp-content/uploads/2022/08/george-wajackoyah.jpg',
                    partyLogo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Roots_Party_Kenya_logo.svg/1200px-Roots_Party_Kenya_logo.svg.png',
                    partyName: 'Roots Party Kenya',
                    bio: 'Lawyer and academic. Professor of Law with expertise in human rights and constitutional law. Former security officer and anti-narcotics agent.',
                    manifesto: [
                        'Legalization of marijuana for medicinal and economic benefits',
                        'Introduction of a four-day work week',
                        'Reintroduction of the death penalty for corruption',
                        'Focus on alternative medicine and traditional healing',
                        'Reform of the education system'
                    ],
                    education: [
                        'PhD in Law, University of London',
                        'LLM in Human Rights, University of London',
                        'LLB, University of Nairobi',
                        'St. Mary\'s School Yala'
                    ]
                },
                'governor-1': {
                    name: 'Johnson Sakaja',
                    position: 'Gubernatorial Candidate - United Democratic Alliance (UDA)',
                    photo: 'https://www.iebc.or.ke/wp-content/uploads/2022/08/johnson-sakaja.jpg',
                    partyLogo: 'https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png',
                    partyName: 'United Democratic Alliance',
                    bio: 'Current Senator for Nairobi County. Former Member of Parliament for Nairobi County. Founder of Tuvuke Initiative for peaceful elections.',
                    manifesto: [
                        'Affordable housing for Nairobi residents',
                        'Improved public transport system',
                        'Clean and green Nairobi initiative',
                        'Support for small businesses and informal sector',
                        'Improved healthcare services'
                    ],
                    education: [
                        'Actuarial Science, University of Nairobi',
                        'Strathmore School'
                    ]
                },
                'governor-2': {
                    name: 'Polycarp Igathe',
                    position: 'Gubernatorial Candidate - Jubilee Party',
                    photo: 'https://www.iebc.or.ke/wp-content/uploads/2022/08/polycarp-igathe.jpg',
                    partyLogo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Jubilee_Party_Logo.svg/1200px-Jubilee_Party_Logo.svg.png',
                    partyName: 'Jubilee Party',
                    bio: 'Business executive and former Deputy Governor of Nairobi County. Former CEO of Vivo Energy Kenya and former Managing Director of Haco Industries.',
                    manifesto: [
                        'Business-friendly policies for Nairobi',
                        'Improved county revenue collection',
                        'Public-private partnerships for development',
                        'Youth empowerment programs',
                        'Modernization of city infrastructure'
                    ],
                    education: [
                        'MBA, University of Nairobi',
                        'BCom, University of Nairobi',
                        'Alliance High School'
                    ]
                }
                // Add more candidates as needed
            };
            
            candidateDetailsBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const candidateId = this.getAttribute('data-candidate');
                    const candidate = candidates[candidateId];
                    
                    if (candidate) {
                        document.getElementById('candidate-name').textContent = candidate.name;
                        document.getElementById('candidate-position').textContent = candidate.position;
                        document.getElementById('candidate-photo').src = candidate.photo;
                        document.getElementById('party-logo').src = candidate.partyLogo;
                        document.getElementById('party-name').textContent = candidate.partyName;
                        document.getElementById('candidate-bio').textContent = candidate.bio;
                        
                        const manifestoPoints = document.getElementById('manifesto-points');
                        manifestoPoints.innerHTML = '';
                        candidate.manifesto.forEach(point => {
                            const li = document.createElement('li');
                            li.textContent = point;
                            manifestoPoints.appendChild(li);
                        });
                        
                        const education = document.getElementById('education');
                        education.innerHTML = '';
                        candidate.education.forEach(item => {
                            const li = document.createElement('li');
                            li.textContent = item;
                            education.appendChild(li);
                        });
                        
                        candidateModal.classList.remove('hidden');
                    }
                });
            });
            
            closeCandidateModal.addEventListener('click', function() {
                candidateModal.classList.add('hidden');
            });
            
            // Help modal
            const helpButton = document.getElementById('help-button');
            const helpModal = document.getElementById('help-modal');
            const closeHelpModal = document.getElementById('close-help-modal');
            
            helpButton.addEventListener('click', function() {
                helpModal.classList.remove('hidden');
            });
            
            closeHelpModal.addEventListener('click', function() {
                helpModal.classList.add('hidden');
            });
            
            // Emergency button
            document.getElementById('emergency-button').addEventListener('click', function() {
                alert('Emergency assistance has been requested. An IEBC official will contact you shortly.');
            });
            
            // Confirmation modal
            const submitBallot = document.getElementById('submit-ballot');
            const confirmationModal = document.getElementById('confirmation-modal');
            const closeModal = document.getElementById('close-modal');
            const downloadReceipt = document.getElementById('download-receipt');
            
            submitBallot.addEventListener('click', function() {
                // Validate that at least one selection has been made
                const selectedPresident = document.querySelector('input[name="president"]:checked');
                const selectedGovernor = document.querySelector('input[name="governor"]:checked');
                
                if (!selectedPresident && !selectedGovernor) {
                    alert('Please make at least one selection before submitting your ballot.');
                    return;
                }
                
                // Show confirmation modal
                confirmationModal.classList.remove('hidden');
                
                // Set current timestamp
                const now = new Date();
                document.getElementById('vote-timestamp').textContent = now.toLocaleString();
                
                // Create confetti effect
                createConfetti();
            });
            
            closeModal.addEventListener('click', function() {
                confirmationModal.classList.add('hidden');
            });
            
            // Print ballot
            document.getElementById('print-ballot').addEventListener('click', function() {
                window.print();
            });
            
            // Download receipt
            downloadReceipt.addEventListener('click', function() {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                doc.setFontSize(18);
                doc.setTextColor(0, 102, 0);
                doc.text('IEBC VOTING RECEIPT', 105, 20, null, null, 'center');
                
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text('Transaction ID: TX-7A83B92C-IEBC-2023', 105, 30, null, null, 'center');
                doc.text(`Timestamp: ${new Date().toLocaleString()}`, 105, 36, null, null, 'center');
                
                doc.setFontSize(14);
                doc.text('Your Selections:', 20, 50);
                
                let yPosition = 60;
                const selections = [
                    { position: 'President', id: 'president' },
                    { position: 'Governor', id: 'governor' },
                    { position: 'Senator', id: 'senator' },
                    { position: 'Member of Parliament', id: 'mp' },
                    { position: 'Member of County Assembly', id: 'mca' },
                    { position: 'Referendum', id: 'referendum' }
                ];
                
                selections.forEach(selection => {
                    const selected = document.querySelector(`input[name="${selection.id}"]:checked`);
                    if (selected) {
                        const label = document.querySelector(`label[for="${selected.id}"]`);
                        const candidateName = label.querySelector('p:first-child').textContent;
                        doc.setFontSize(12);
                        doc.text(`${selection.position}: ${candidateName}`, 20, yPosition);
                        yPosition += 7;
                    }
                });
                
                doc.setFontSize(10);
                doc.setTextColor(100);
                doc.text('This is your official voting receipt. Keep it for your records.', 105, 280, null, null, 'center');
                doc.text('IEBC - Ensuring Free, Fair and Credible Elections', 105, 285, null, null, 'center');
                
                doc.save('IEBC_Voting_Receipt.pdf');
            });
            
            // Create confetti effect
            function createConfetti() {
                const colors = ['#000000', '#BB0000', '#FFFFFF', '#006600', '#4CAF50'];
                
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                    confetti.style.height = Math.random() * 10 + 5 + 'px';
                    confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }
            }
            
            // Language toggle functionality
            const languageOptions = document.querySelectorAll('.language-option');
            
            languageOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    // In a real implementation, this would load translations for the selected language
                    alert(`Language changed to ${this.textContent}. In a real implementation, this would load translations.`);
                });
            });
        });
    </script>
</body>
</html>