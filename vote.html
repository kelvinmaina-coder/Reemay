<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IEBC Digital Voting Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap');

        :root {
            --primary-green: #1a5c1a;
            --secondary-green: #2e8b57;
            --accent-green: #4caf50;
            --deep-green: #0d3b1e;
            --light-green: #e8f5e9;
            --success-green: #10b981;
            --warning-orange: #ff9800;
            --error-red: #f44336;
            --gold-accent: #ffd700;
            --ivory: #fffff0;
            --dark-bg: #121212;
            --card-dark: #1e1e1e;
            --text-dark: #e0e0e0;
            --kenya-black: #000000;
            --kenya-red: #BB0000;
            --kenya-green: #006600;
            --kenya-white: #FFFFFF;
        }

        /* Base Styles with Kenyan Theme */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light-green);
            color: #333;
            scroll-behavior: smooth;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            transition: all 0.3s ease;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0icmdiYSgwLDAsMCwwLjAyKSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNwYXR0ZXJuKSIvPjwvc3ZnPg==');
        }

        /* Typography Enhancements */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            color: var(--deep-green);
        }

        /* Kenyan Flag Inspired Header */
        .gradient-bg {
            background: linear-gradient(135deg, 
                var(--kenya-black) 0%, 
                var(--kenya-black) 25%, 
                var(--kenya-red) 25%, 
                var(--kenya-red) 50%, 
                var(--kenya-white) 50%, 
                var(--kenya-white) 75%, 
                var(--kenya-green) 75%, 
                var(--kenya-green) 100%);
            background-size: 400% 400%;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            animation: flagWave 15s ease infinite;
        }

        @keyframes flagWave {
            0% { background-position: 0% 50% }
            50% { background-position: 100% 50% }
            100% { background-position: 0% 50% }
        }

        .gradient-bg::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, 
                rgba(255, 255, 255, 0.1) 0%, 
                transparent 70%);
        }

        /* Enhanced Card Design with Kenyan Shield */
        .ballot-card {
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border-radius: 16px;
            overflow: hidden;
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIj48cGF0aCBkPSJNMTUwLDEwMEMxNTAsMTI3LjYxIDEyNy42MSwxNTAgMTAwLDE1MEM3Mi4zOSwxNTAgNTAsMTI3LjYxIDUwLDEwMEM1MCw3Mi4zOSA3Mi4zOSw1MCAxMDAsNTBDMTI3LjYxLDUwIDE1MCw3Mi4zOSAxNTAsMTAwWiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMCwwLDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3N2Zz4=');
        }

        .ballot-card::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--kenya-black), var(--kenya-red), var(--kenya-white), var(--kenya-green));
        }

        .ballot-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            z-index: 10;
        }

        /* Elegant Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .pulse {
            animation: pulse 3s infinite;
        }

        .float {
            animation: float 6s ease-in-out infinite;
        }

        .fade-in {
            animation: fadeIn 0.8s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }

        /* Kenyan Shield Badge */
        .kenya-shield {
            width: 60px;
            height: 70px;
            background: linear-gradient(135deg, var(--kenya-black) 0%, var(--kenya-red) 50%, var(--kenya-green) 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .kenya-shield::before {
            content: "";
            position: absolute;
            width: 40px;
            height: 50px;
            background-color: var(--kenya-white);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        }

        .kenya-shield::after {
            content: "âœŠ";
            position: absolute;
            font-size: 24px;
            color: var(--kenya-red);
            z-index: 2;
        }

        /* Progress Bar with Kenyan Colors */
        .progress-bar {
            height: 8px;
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, 
                var(--kenya-black), 
                var(--kenya-red),
                var(--kenya-white),
                var(--kenya-green));
            transition: width 0.6s cubic-bezier(0.65, 0, 0.35, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.2) 0%, 
                rgba(255, 255, 255, 0.5) 50%, 
                rgba(255, 255, 255, 0.2) 100%);
            animation: progressShine 2s infinite;
        }

        /* Candidate Photos with Kenyan Frame */
        .candidate-photo {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            position: relative;
        }

        .candidate-photo::after {
            content: "";
            position: absolute;
            top: -6px;
            left: -6px;
            right: -6px;
            bottom: -6px;
            border: 2px solid var(--kenya-green);
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .candidate-photo:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
        }

        .candidate-photo:hover::after {
            opacity: 1;
        }

        .party-logo {
            width: 36px;
            height: 36px;
            object-fit: contain;
            margin-right: 10px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
            border-radius: 50%;
            background: white;
            padding: 2px;
        }

        /* Security Elements with Kenyan Theme */
        .security-badge {
            background: linear-gradient(135deg, 
                rgba(0, 102, 0, 0.15) 0%, 
                rgba(187, 0, 0, 0.15) 100%);
            border: 1px solid var(--kenya-green);
            border-radius: 50px;
            padding: 8px 16px;
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }

        .security-badge::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0.3) 0%,
                rgba(255, 255, 255, 0) 60%
            );
            transform: rotate(30deg);
        }

        /* Floating Help Button with Kenyan Colors */
        .floating-help {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--kenya-black), var(--kenya-green));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .floating-help:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip-text {
            visibility: hidden;
            width: 220px;
            background-color: rgba(51, 51, 51, 0.9);
            color: #fff;
            text-align: center;
            border-radius: 12px;
            padding: 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(-5px);
        }

        /* Dark Mode */
        .dark-mode {
            background-color: var(--dark-bg);
            color: var(--text-dark);
            background-image: none;
        }

        .dark-mode .ballot-card {
            background-color: var(--card-dark);
            color: var(--text-dark);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            background-image: none;
        }

        .dark-mode h1, 
        .dark-mode h2, 
        .dark-mode h3, 
        .dark-mode h4, 
        .dark-mode h5, 
        .dark-mode h6 {
            color: var(--ivory);
        }

        .dark-mode .text-gray-800 {
            color: var(--text-dark);
        }

        .dark-mode .text-gray-700 {
            color: #d1d5db;
        }

        .dark-mode .text-gray-500 {
            color: #9ca3af;
        }

        .dark-mode .bg-white {
            background-color: var(--card-dark);
        }

        .dark-mode .border-gray-300 {
            border-color: #4b5563;
        }

        /* Custom Radio Buttons with Kenyan Theme */
        input[type="radio"].iebc-radio {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 22px;
            height: 22px;
            border: 2px solid #ddd;
            border-radius: 50%;
            outline: none;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            background-color: white;
        }

        input[type="radio"].iebc-radio:checked {
            border-color: var(--kenya-green);
            background-color: var(--kenya-green);
            box-shadow: 0 0 0 3px rgba(0, 102, 0, 0.2);
        }

        input[type="radio"].iebc-radio:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: white;
        }

        /* Focus Styles */
        button:focus, 
        input:focus, 
        select:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 102, 0, 0.5);
        }

        /* Photo Verification Section */
        .photo-upload-container {
            border: 2px dashed rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }

        .photo-upload-container:hover {
            border-color: var(--kenya-green);
            background-color: rgba(0, 102, 0, 0.05);
            transform: translateY(-2px);
        }

        .photo-upload-container.dragover {
            border-color: var(--kenya-green);
            background-color: rgba(0, 102, 0, 0.1);
            box-shadow: 0 5px 15px rgba(0, 102, 0, 0.1);
        }

        .photo-preview {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 12px;
            border: 2px solid rgba(0, 0, 0, 0.1);
            display: none;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        /* IEBC Seal */
        .iebc-seal {
            width: 140px;
            height: 140px;
            background: radial-gradient(circle, white 60%, #f0f0f0 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid var(--kenya-green);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            position: relative;
        }

        .iebc-seal::before {
            content: "";
            position: absolute;
            width: 90%;
            height: 90%;
            border-radius: 50%;
            border: 2px dashed var(--kenya-green);
            opacity: 0.3;
        }

        /* Watermark with Kenyan Motto */
        .watermark {
            position: fixed;
            opacity: 0.03;
            font-size: 180px;
            z-index: -1;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-30deg);
            font-weight: bold;
            color: var(--kenya-green);
            pointer-events: none;
            user-select: none;
            font-family: 'Playfair Display', serif;
            text-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        /* Language Toggle */
        .language-toggle {
            position: relative;
            display: inline-block;
        }

        .language-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: calc(100% + 10px);
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            z-index: 50;
            min-width: 140px;
            overflow: hidden;
            transform-origin: top right;
            transform: scale(0.95);
            opacity: 0;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .language-toggle:hover .language-dropdown {
            display: block;
            transform: scale(1);
            opacity: 1;
        }

        .language-option {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .language-option:last-child {
            border-bottom: none;
        }

        .language-option:hover {
            background-color: rgba(0, 0, 0, 0.03);
            transform: translateX(5px);
        }

        .language-flag {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .dark-mode .language-dropdown {
            background-color: #2d3748;
            border: 1px solid #4a5568;
        }

        .dark-mode .language-option:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        /* Voting Button with Kenyan Colors */
        .vote-button {
            background: linear-gradient(135deg, var(--kenya-black), var(--kenya-green));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(0, 102, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .vote-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 102, 0, 0.4);
        }

        .vote-button::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0.3) 0%,
                rgba(255, 255, 255, 0) 60%
            );
            transform: rotate(30deg);
            transition: all 0.5s ease;
        }

        .vote-button:hover::after {
            left: 100%;
        }

        /* Section Headers */
        .section-header {
            position: relative;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }

        .section-header::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, var(--kenya-black), var(--kenya-green));
            border-radius: 2px;
        }

        /* Modal Enhancements */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            transform: translateY(20px);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 90%;
            width: 600px;
            overflow: hidden;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .dark-mode .modal-content {
            background: var(--card-dark);
            color: var(--text-dark);
        }

        /* Blockchain Verification Badge */
        .blockchain-badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            background: linear-gradient(135deg, #f1c40f, #f39c12);
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .blockchain-badge i {
            margin-right: 5px;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .ballot-card {
                margin-bottom: 20px;
            }
            
            .floating-help {
                width: 50px;
                height: 50px;
                bottom: 20px;
                right: 20px;
            }
            
            .watermark {
                font-size: 120px;
            }
            
            .section-header::after {
                width: 40px;
            }

            .gradient-bg {
                animation: none;
                background: linear-gradient(135deg, var(--kenya-black), var(--kenya-green));
            }
        }

        /* Print Styles */
        @media print {
            .no-print {
                display: none;
            }
            
            body {
                background: white;
                color: black;
                font-size: 12pt;
            }
            
            .ballot-card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
                margin-bottom: 20px;
                page-break-inside: avoid;
            }
            
            .gradient-bg {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }

        /* New: Face Detection Frame */
        .face-detection-frame {
            position: absolute;
            border: 3px solid var(--kenya-green);
            border-radius: 8px;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 10;
        }

        /* New: Verification Steps */
        .verification-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }

        .verification-steps::before {
            content: "";
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e0e0e0;
            z-index: 1;
        }

        .verification-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .step-label {
            font-size: 12px;
            color: #666;
            text-align: center;
        }

        .verification-step.active .step-number {
            background: var(--kenya-green);
            color: white;
            transform: scale(1.1);
        }

        .verification-step.active .step-label {
            color: var(--kenya-green);
            font-weight: 500;
        }

        .verification-step.completed .step-number {
            background: var(--kenya-green);
            color: white;
        }

        .verification-step.completed .step-label {
            color: var(--kenya-green);
        }

        /* New: Blockchain Transaction Viewer */
        .blockchain-viewer {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            overflow-x: auto;
            max-height: 200px;
            border: 1px solid #e0e0e0;
        }

        .blockchain-line {
            margin-bottom: 5px;
            white-space: nowrap;
        }

        .blockchain-key {
            color: var(--kenya-green);
            font-weight: bold;
        }

        /* New: Accessibility Features */
        .accessibility-tools {
            position: fixed;
            bottom: 100px;
            right: 30px;
            z-index: 90;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .accessibility-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--kenya-red);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .accessibility-btn:hover {
            transform: scale(1.1);
        }

        /* New: High Contrast Mode */
        .high-contrast {
            --primary-green: #000000;
            --secondary-green: #000000;
            --accent-green: #FFFFFF;
            --deep-green: #000000;
            --light-green: #FFFFFF;
            --success-green: #000000;
            --warning-orange: #000000;
            --error-red: #000000;
            --gold-accent: #FFFFFF;
            --ivory: #FFFFFF;
            --dark-bg: #000000;
            --card-dark: #000000;
            --text-dark: #FFFFFF;
            --kenya-black: #000000;
            --kenya-red: #000000;
            --kenya-green: #FFFFFF;
            --kenya-white: #FFFFFF;
        }

        .high-contrast body {
            background: white !important;
            color: black !important;
        }

        .high-contrast .ballot-card {
            border: 3px solid black !important;
        }

        /* New: Vote Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: var(--kenya-green);
            opacity: 0;
            z-index: 9999;
            animation: confetti-fall 5s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Watermark -->
    <div class="watermark no-print">HARAMBEE</div>
    
    <!-- Accessibility Tools -->
    <div class="accessibility-tools no-print">
        <button id="text-increase" class="accessibility-btn" title="Increase Text Size">
            <i class="fas fa-text-height"></i>
        </button>
        <button id="text-decrease" class="accessibility-btn" title="Decrease Text Size">
            <i class="fas fa-text-width"></i>
        </button>
        <button id="high-contrast" class="accessibility-btn" title="High Contrast Mode">
            <i class="fas fa-adjust"></i>
        </button>
        <button id="screen-reader" class="accessibility-btn" title="Screen Reader Mode">
            <i class="fas fa-assistive-listening-systems"></i>
        </button>
    </div>
    
    <!-- Header with IEBC Logo -->
    <header class="gradient-bg text-white shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <div class="kenya-shield mr-2"></div>
                <img src="https://www.iebc.or.ke/wp-content/uploads/2020/04/cropped-iebc-logo.png" alt="IEBC Logo" class="h-14">
                <div>
                    <h1 class="text-xl md:text-2xl font-bold" data-i18n="iebc_title">INDEPENDENT ELECTORAL & BOUNDARIES COMMISSION</h1>
                    <p class="text-xs md:text-sm opacity-80" data-i18n="portal_subtitle">Secure Digital Voting Portal - Official Government Platform</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="hidden md:flex items-center space-x-2 security-badge px-3 py-1 rounded-full">
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-xs" data-i18n="secure_connection">Secure TLS 1.3 Connection</span>
                    <span class="blockchain-badge">
                        <i class="fas fa-link"></i> Blockchain
                    </span>
                </div>
                <button id="dark-mode-toggle" class="p-2 rounded-full hover:bg-green-700 transition-colors">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="language-toggle group">
                    <button class="p-2 rounded-full hover:bg-green-700 transition-colors">
                        <i class="fas fa-language"></i>
                    </button>
                    <div class="language-dropdown dark:bg-gray-700 dark:border-gray-600">
                        <div class="language-option" data-lang="en">
                            <img src="https://flagcdn.com/w20/gb.png" class="language-flag" alt="English">
                            <span>English</span>
                        </div>
                        <div class="language-option" data-lang="sw">
                            <img src="https://flagcdn.com/w20/ke.png" class="language-flag" alt="Kiswahili">
                            <span>Kiswahili</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Progress Bar -->
        <div class="progress-bar">
            <div id="progress-fill" class="progress-fill" style="width: 33%"></div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Verification Steps -->
        <div class="verification-steps max-w-3xl mx-auto mb-8">
            <div class="verification-step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label" data-i18n="auth_title">Authentication</div>
            </div>
            <div class="verification-step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label" data-i18n="biometric_title">Biometric</div>
            </div>
            <div class="verification-step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label" data-i18n="location_title">Location</div>
            </div>
            <div class="verification-step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label" data-i18n="ballot_title">Voting</div>
            </div>
        </div>

        <!-- Authentication Section -->
        <section id="auth-section" class="max-w-3xl mx-auto bg-white rounded-xl shadow-md overflow-hidden mb-8 fade-in dark:bg-gray-800">
            <div class="md:flex">
                <div class="p-6 md:p-8 w-full">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="auth_title">Voter Authentication</h2>
                            <p class="text-sm text-gray-500" data-i18n="auth_subtitle">Verify your identity to access the voting portal</p>
                        </div>
                        <div class="flex space-x-2">
                            <span class="px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full dark:bg-green-900 dark:text-green-100" data-i18n="step_1">Step 1 of 4</span>
                        </div>
                    </div>
                    
                    <div class="mb-6 p-4 bg-green-50 rounded-lg dark:bg-green-900/30">
                        <div class="flex items-start">
                            <div class="iebc-seal mr-4 flex-shrink-0">
                                <img src="https://www.iebc.or.ke/wp-content/uploads/2020/04/cropped-iebc-logo.png" alt="IEBC Seal" class="h-16 w-16">
                            </div>
                            <div>
                                <p class="text-sm text-green-800 dark:text-green-200 font-medium" data-i18n="security_info">Your information is protected with end-to-end encryption certified by the National KE-CIRT.</p>
                                <p class="text-xs text-green-600 dark:text-green-300 mt-1" data-i18n="security_details">This system uses AES-256 encryption and blockchain verification to ensure vote integrity. Learn more about our <a href="#" class="underline" data-i18n="security_measures">security measures</a>.</p>
                            </div>
                        </div>
                    </div>
                    
                    <form id="auth-form" class="space-y-6">
                        <div>
                            <label for="national-id" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="national_id_label">National ID Number</label>
                            <div class="mt-1 relative">
                                <input type="text" id="national-id" name="national-id" 
                                       class="block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" 
                                       placeholder="Enter your National ID" required
                                       pattern="\d{8}" title="8-digit National ID number">
                                <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                    <i class="fas fa-id-card text-gray-400"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label for="iebc-code" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="voter_code_label">IEBC Voter Code</label>
                            <div class="mt-1 relative">
                                <input type="text" id="iebc-code" name="iebc-code" 
                                       class="block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" 
                                       placeholder="Enter your IEBC voter code" required
                                       pattern="[A-Z0-9]{6}" title="6-character alphanumeric code">
                                <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                    <i class="fas fa-lock text-gray-400"></i>
                                </div>
                            </div>
                            <p class="mt-1 text-sm text-gray-500 dark:text-gray-400" data-i18n="code_info">This code was sent to you via SMS or provided at registration</p>
                            <button type="button" class="mt-1 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300">
                                <i class="fas fa-question-circle mr-1"></i> <span data-i18n="forgot_code">Forgot your code?</span>
                            </button>
                        </div>
                        
                        <!-- Photo Verification Section -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="photo_verification">Photo Verification</label>
                            <div id="photo-upload" class="photo-upload-container">
                                <div id="upload-instructions">
                                    <i class="fas fa-camera text-3xl text-gray-400 mb-2"></i>
                                    <p class="text-sm text-gray-600 dark:text-gray-400" data-i18n="upload_instructions">Click to upload your photo or drag and drop</p>
                                    <p class="text-xs text-gray-500 mt-1" data-i18n="upload_purpose">For verification against your registered voter photo</p>
                                </div>
                                <img id="photo-preview" class="photo-preview mx-auto mt-2" alt="Preview">
                                <input type="file" id="photo-input" accept="image/*" class="hidden" capture="user">
                            </div>
                            <div id="photo-error" class="text-xs text-red-600 mt-1 hidden" data-i18n="photo_error">Please upload a clear photo of your face</div>
                        </div>
                        
                        <div class="pt-4">
                            <button type="submit" 
                                    class="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 pulse">
                                <span data-i18n="verify_identity">Verify Identity</span>
                                <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </form>
                    
                    <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <h3 class="text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="first_time_voting">First time voting?</h3>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1" data-i18n="registration_info">If you haven't registered as a voter, please visit your nearest IEBC office to register before proceeding.</p>
                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300">
                            <i class="fas fa-map-marker-alt mr-1"></i> <span data-i18n="find_centers">Find registration centers</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Biometric Verification Section (Hidden Initially) -->
        <section id="biometric-section" class="max-w-3xl mx-auto bg-white rounded-xl shadow-md overflow-hidden mb-8 hidden fade-in dark:bg-gray-800">
            <div class="md:flex">
                <div class="p-6 md:p-8 w-full">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="biometric_title">Biometric Verification</h2>
                            <p class="text-sm text-gray-500" data-i18n="biometric_subtitle">Additional security step to confirm your identity</p>
                        </div>
                        <div class="flex space-x-2">
                            <span class="px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full dark:bg-green-900 dark:text-green-100" data-i18n="step_2">Step 2 of 4</span>
                        </div>
                    </div>
                    
                    <div class="mb-6 p-4 bg-green-50 rounded-lg dark:bg-green-900/30">
                        <div class="flex items-start">
                            <i class="fas fa-fingerprint text-green-500 mt-1 mr-2"></i>
                            <div>
                                <p class="text-sm text-green-800 dark:text-green-200" data-i18n="biometric_info">For enhanced security, please complete biometric verification using your registered fingerprint or facial recognition.</p>
                                <p class="text-xs text-green-600 dark:text-green-300 mt-1" data-i18n="biometric_details">This matches against your biometric data collected during voter registration.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center py-8">
                        <div class="mx-auto w-40 h-40 bg-gray-100 rounded-full flex items-center justify-center mb-6 dark:bg-gray-700 relative" id="face-detection-container">
                            <i class="fas fa-user-circle text-5xl text-gray-400" id="face-icon"></i>
                            <div id="face-detection-frame" class="face-detection-frame"></div>
                            <video id="video" width="160" height="160" autoplay muted playsinline style="display: none;"></video>
                            <canvas id="canvas" width="160" height="160" style="display: none;"></canvas>
                            <div id="biometric-animation" class="absolute inset-0 rounded-full border-4 border-transparent animate-ping opacity-75" style="display: none;"></div>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800 dark:text-white" data-i18n="facial_recognition">Facial Recognition</h3>
                        <p class="text-sm text-gray-500 mt-2 dark:text-gray-400" data-i18n="face_instructions">Position your face within the frame and hold still</p>
                        
                        <div class="mt-6 w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
                            <div id="biometric-progress" class="bg-green-600 h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                        <p id="biometric-status" class="text-xs text-gray-500 mt-2 dark:text-gray-400" data-i18n="face_status">Waiting for face detection...</p>
                        
                        <div class="mt-6">
                            <button id="try-fingerprint" class="text-sm text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300">
                                <i class="fas fa-fingerprint mr-1"></i> <span data-i18n="try_fingerprint">Try Fingerprint Instead</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <button id="back-to-auth" class="text-sm text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300">
                            <i class="fas fa-arrow-left mr-1"></i> <span data-i18n="back">Back</span>
                        </button>
                        <button id="skip-biometric" class="text-sm text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300">
                            <span data-i18n="skip_for_now">Skip for now</span> <i class="fas fa-arrow-right ml-1"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Location Selection Section (Hidden Initially) -->
        <section id="location-section" class="max-w-3xl mx-auto bg-white rounded-xl shadow-md overflow-hidden mb-8 hidden fade-in dark:bg-gray-800">
            <div class="md:flex">
                <div class="p-6 md:p-8 w-full">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="location_title">Confirm Your Voting Location</h2>
                            <p class="text-sm text-gray-500" data-i18n="location_subtitle">We'll show you candidates specific to your area</p>
                        </div>
                        <div class="flex space-x-2">
                            <span class="px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full dark:bg-green-900 dark:text-green-100" data-i18n="step_3">Step 3 of 4</span>
                        </div>
                    </div>
                    
                    <div class="mb-6 p-4 bg-green-50 rounded-lg dark:bg-green-900/30">
                        <div class="flex items-start">
                            <i class="fas fa-map-marked-alt text-green-500 mt-1 mr-2"></i>
                            <div>
                                <p class="text-sm text-green-800 dark:text-green-200" data-i18n="location_info">Your voting location helps us display the correct candidates for your electoral area. This should match your registration details.</p>
                                <p class="text-xs text-green-600 dark:text-green-300 mt-1" data-i18n="location_details">If this doesn't match your registration, please visit an IEBC office to update your details.</p>
                            </div>
                        </div>
                    </div>
                    
                    <form id="location-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label for="county" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="county_label">County</label>
                                <select id="county" name="county" 
                                        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                                    <option value="" data-i18n="select_county">Select County</option>
                                    <option value="baringo">Baringo</option>
                                    <option value="bomet">Bomet</option>
                                    <option value="bungoma">Bungoma</option>
                                    <option value="busia">Busia</option>
                                    <option value="elgeyo-marakwet">Elgeyo-Marakwet</option>
                                    <option value="embu">Embu</option>
                                    <option value="garissa">Garissa</option>
                                    <option value="homa-bay">Homa Bay</option>
                                    <option value="isiolo">Isiolo</option>
                                    <option value="kajiado">Kajiado</option>
                                    <option value="kakamega">Kakamega</option>
                                    <option value="kericho">Kericho</option>
                                    <option value="kiambu">Kiambu</option>
                                    <option value="kilifi">Kilifi</option>
                                    <option value="kirinyaga">Kirinyaga</option>
                                    <option value="kisii">Kisii</option>
                                    <option value="kisumu">Kisumu</option>
                                    <option value="kitui">Kitui</option>
                                    <option value="kwale">Kwale</option>
                                    <option value="laikipia">Laikipia</option>
                                    <option value="lamu">Lamu</option>
                                    <option value="machakos">Machakos</option>
                                    <option value="makueni">Makueni</option>
                                    <option value="mandera">Mandera</option>
                                    <option value="marsabit">Marsabit</option>
                                    <option value="meru">Meru</option>
                                    <option value="migori">Migori</option>
                                    <option value="mombasa">Mombasa</option>
                                    <option value="muranga">Murang'a</option>
                                    <option value="nairobi">Nairobi</option>
                                    <option value="nakuru">Nakuru</option>
                                    <option value="nandi">Nandi</option>
                                    <option value="narok">Narok</option>
                                    <option value="nyamira">Nyamira</option>
                                    <option value="nyandarua">Nyandarua</option>
                                    <option value="nyeri">Nyeri</option>
                                    <option value="samburu">Samburu</option>
                                    <option value="siaya">Siaya</option>
                                    <option value="taita-taveta">Taita-Taveta</option>
                                    <option value="tana-river">Tana River</option>
                                    <option value="tharaka-nithi">Tharaka-Nithi</option>
                                    <option value="trans-nzoia">Trans Nzoia</option>
                                    <option value="turkana">Turkana</option>
                                    <option value="uasin-gishu">Uasin Gishu</option>
                                    <option value="vihiga">Vihiga</option>
                                    <option value="wajir">Wajir</option>
                                    <option value="west-pokot">West Pokot</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="constituency" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="constituency_label">Constituency</label>
                                <select id="constituency" name="constituency" disabled
                                        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 bg-gray-100 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                                    <option value="" data-i18n="select_county_first">Select County First</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="ward" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="ward_label">Ward</label>
                                <select id="ward" name="ward" disabled
                                        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 bg-gray-100 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                                    <option value="" data-i18n="select_constituency_first">Select Constituency First</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="pt-4 flex justify-between">
                            <button id="back-to-biometric" type="button" 
                                    class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                                <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                            </button>
                            <button type="submit" 
                                    class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                <span data-i18n="confirm_location">Confirm Location</span> <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </form>
                    
                    <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <h3 class="text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="wrong_location">Not your registered location?</h3>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1" data-i18n="location_update">If this doesn't match your registration details, please visit your nearest IEBC office to update your information.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Voting Ballot Section (Hidden Initially) -->
        <section id="ballot-section" class="max-w-4xl mx-auto hidden fade-in">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="ballot_title">Your Digital Ballot</h2>
                    <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="ballot_subtitle">Make your selections carefully. You cannot change your vote after submission.</p>
                </div>
                <div class="flex space-x-2 mt-2 md:mt-0">
                    <span class="px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full dark:bg-green-900 dark:text-green-100" data-i18n="step_4">Step 4 of 4</span>
                    <span id="voter-location" class="px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full dark:bg-green-900 dark:text-green-100"></span>
                    <button id="print-ballot" class="px-3 py-1 bg-gray-100 text-gray-800 text-xs font-medium rounded-full hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600">
                        <i class="fas fa-print mr-1"></i> <span data-i18n="print">Print</span>
                    </button>
                </div>
            </div>
            
            <!-- Time Remaining Counter -->
            <div id="time-remaining" class="mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-lg dark:bg-yellow-900/20 dark:border-yellow-600">
                <div class="flex items-center">
                    <i class="fas fa-clock text-yellow-500 mr-3 text-xl"></i>
                    <div>
                        <h3 class="text-sm font-medium text-yellow-800 dark:text-yellow-200" data-i18n="time_remaining">Session Time Remaining</h3>
                        <div class="flex items-center mt-1">
                            <span id="timer" class="text-xl font-bold text-yellow-800 dark:text-yellow-200">15:00</span>
                            <span class="ml-2 text-sm text-yellow-700 dark:text-yellow-300" data-i18n="minutes">minutes</span>
                        </div>
                        <p class="mt-1 text-xs text-yellow-700 dark:text-yellow-300" data-i18n="session_warning">Your session will expire automatically for security reasons.</p>
                    </div>
                </div>
            </div>
            
            <!-- Ballot Navigation Tabs -->
            <div class="mb-6 border-b border-gray-200 dark:border-gray-700">
                <nav class="-mb-px flex space-x-8 overflow-x-auto">
                    <button id="tab-president" class="border-b-2 border-green-500 text-green-600 px-4 py-3 text-sm font-medium dark:border-green-400 dark:text-green-400">
                        <span data-i18n="president">President</span>
                    </button>
                    <button id="tab-governor" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 px-4 py-3 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                        <span data-i18n="governor">Governor</span>
                    </button>
                    <button id="tab-senator" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 px-4 py-3 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                        <span data-i18n="senator">Senator</span>
                    </button>
                    <button id="tab-mp" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 px-4 py-3 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                        <span data-i18n="mp">MP</span>
                    </button>
                    <button id="tab-mca" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 px-4 py-3 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                        <span data-i18n="mca">MCA</span>
                    </button>
                    <button id="tab-referendum" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 px-4 py-3 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                        <span data-i18n="referendum">Referendum</span>
                    </button>
                </nav>
            </div>
            
            <!-- Presidential Ballot -->
            <div id="president-content" class="ballot-content">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-landmark text-green-500 mr-2"></i>
                            <span data-i18n="president_deputy">President & Deputy President</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_one_pair">Vote for one candidate pair</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <!-- Candidate 1 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="president-1" name="president" type="radio" class="iebc-radio mt-3">
                                <label for="president-1" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/william-ruto.jpg" alt="William Ruto">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png" alt="UDA Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">William Ruto</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="uda_party">United Democratic Alliance</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200" data-i18n="incumbent">
                                                Incumbent
                                            </span>
                                        </div>
                                        <div class="mt-2 flex items-center">
                                            <i class="fas fa-user-friends text-gray-400 text-xs mr-1"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="deputy">Deputy: Rigathi Gachagua</p>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="president-1">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 2 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="president-2" name="president" type="radio" class="iebc-radio mt-3">
                                <label for="president-2" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/raila-odinga.jpg" alt="Raila Odinga">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Odm_logo.svg/1200px-Odm_logo.svg.png" alt="ODM Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Raila Odinga</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="odm_party">Orange Democratic Movement</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200" data-i18n="former_pm">
                                                Former PM
                                            </span>
                                        </div>
                                        <div class="mt-2 flex items-center">
                                            <i class="fas fa-user-friends text-gray-400 text-xs mr-1"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="deputy">Deputy: Martha Karua</p>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="president-2">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 3 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="president-3" name="president" type="radio" class="iebc-radio mt-3">
                                <label for="president-3" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/george-wajackoyah.jpg" alt="George Wajackoyah">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Roots_Party_Kenya_logo.svg/1200px-Roots_Party_Kenya_logo.svg.png" alt="Roots Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">George Wajackoyah</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="roots_party">Roots Party Kenya</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200" data-i18n="professor">
                                                Professor
                                            </span>
                                        </div>
                                        <div class="mt-2 flex items-center">
                                            <i class="fas fa-user-friends text-gray-400 text-xs mr-1"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="deputy">Deputy: Justina Wamae</p>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="president-3">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="president-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="president-next" class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        <span data-i18n="next_governor">Next: Governor</span> <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- Governor Ballot (Hidden Initially) -->
            <div id="governor-content" class="ballot-content hidden">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-university text-green-500 mr-2"></i>
                            <span data-i18n="governor_deputy">Governor & Deputy Governor</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_one_county">Vote for one candidate pair in your county</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <!-- Candidate 1 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="governor-1" name="governor" type="radio" class="iebc-radio mt-3">
                                <label for="governor-1" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/johnson-sakaja.jpg" alt="Johnson Sakaja">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png" alt="UDA Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Johnson Sakaja</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="uda_party">United Democratic Alliance</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200" data-i18n="senator">
                                                Senator
                                            </span>
                                        </div>
                                        <div class="mt-2 flex items-center">
                                            <i class="fas fa-user-friends text-gray-400 text-xs mr-1"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="deputy">Deputy: James Muchiri</p>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="governor-1">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 2 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="governor-2" name="governor" type="radio" class="iebc-radio mt-3">
                                <label for="governor-2" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/polycarp-igathe.jpg" alt="Polycarp Igathe">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Jubilee_Party_Logo.svg/1200px-Jubilee_Party_Logo.svg.png" alt="Jubilee Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Polycarp Igathe</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="jubilee_party">Jubilee Party</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200" data-i18n="businessman">
                                                Businessman
                                            </span>
                                        </div>
                                        <div class="mt-2 flex items-center">
                                            <i class="fas fa-user-friends text-gray-400 text-xs mr-1"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="deputy">Deputy: Nancy Mwashigadi</p>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="governor-2">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="governor-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="governor-next" class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        <span data-i18n="next_senator">Next: Senator</span> <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- Senator Ballot (Hidden Initially) -->
            <div id="senator-content" class="ballot-content hidden">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-user-tie text-green-500 mr-2"></i>
                            <span data-i18n="senator">Senator</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_one_county">Vote for one candidate in your county</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <!-- Candidate 1 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="senator-1" name="senator" type="radio" class="iebc-radio mt-3">
                                <label for="senator-1" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/tabitha-mutinda.jpg" alt="Tabitha Mutinda">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png" alt="UDA Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Tabitha Mutinda</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="uda_party">United Democratic Alliance</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200" data-i18n="lawyer">
                                                Lawyer
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="senator-1">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 2 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="senator-2" name="senator" type="radio" class="iebc-radio mt-3">
                                <label for="senator-2" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://www.iebc.or.ke/wp-content/uploads/2022/08/edwin-sifuna.jpg" alt="Edwin Sifuna">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Odm_logo.svg/1200px-Odm_logo.svg.png" alt="ODM Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Edwin Sifuna</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="odm_party">Orange Democratic Movement</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200" data-i18n="secretary_general">
                                                Secretary General
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="senator-2">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="senator-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="senator-next" class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        <span data-i18n="next_mp">Next: MP</span> <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- MP Ballot (Hidden Initially) -->
            <div id="mp-content" class="ballot-content hidden">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-users text-green-500 mr-2"></i>
                            <span data-i18n="member_parliament">Member of Parliament</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_one_constituency">Vote for one candidate in your constituency</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <!-- Candidate 1 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="mp-1" name="mp" type="radio" class="iebc-radio mt-3">
                                <label for="mp-1" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://randomuser.me/api/portraits/women/32.jpg" alt="Jane Muthoni">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png" alt="UDA Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Jane Muthoni</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="uda_party">United Democratic Alliance</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200" data-i18n="businesswoman">
                                                Businesswoman
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="mp-1">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 2 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="mp-2" name="mp" type="radio" class="iebc-radio mt-3">
                                <label for="mp-2" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://randomuser.me/api/portraits/men/45.jpg" alt="John Kamau">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Odm_logo.svg/1200px-Odm_logo.svg.png" alt="ODM Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">John Kamau</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="odm_party">Orange Democratic Movement</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200" data-i18n="incumbent">
                                                Incumbent
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="mp-2">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="mp-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="mp-next" class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        <span data-i18n="next_mca">Next: MCA</span> <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- MCA Ballot (Hidden Initially) -->
            <div id="mca-content" class="ballot-content hidden">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-home text-green-500 mr-2"></i>
                            <span data-i18n="member_county_assembly">Member of County Assembly</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_one_ward">Vote for one candidate in your ward</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <!-- Candidate 1 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="mca-1" name="mca" type="radio" class="iebc-radio mt-3">
                                <label for="mca-1" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://randomuser.me/api/portraits/men/28.jpg" alt="David Omondi">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png" alt="UDA Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">David Omondi</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="uda_party">United Democratic Alliance</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200" data-i18n="youth">
                                                Youth
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="mca-1">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Candidate 2 -->
                            <div class="flex items-start p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="mca-2" name="mca" type="radio" class="iebc-radio mt-3">
                                <label for="mca-2" class="ml-3 flex flex-col md:flex-row md:items-center w-full">
                                    <div class="flex-shrink-0 flex items-start">
                                        <div class="relative">
                                            <img class="candidate-photo" src="https://randomuser.me/api/portraits/women/42.jpg" alt="Grace Wambui">
                                            <div class="absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md">
                                                <img class="party-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Odm_logo.svg/1200px-Odm_logo.svg.png" alt="ODM Party">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-4 mt-2 md:mt-0 flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900 dark:text-white">Grace Wambui</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="odm_party">Orange Democratic Movement</p>
                                            </div>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200" data-i18n="incumbent">
                                                Incumbent
                                            </span>
                                        </div>
                                        <button class="mt-2 text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 candidate-details-btn" data-candidate="mca-2">
                                            <i class="fas fa-info-circle mr-1"></i> <span data-i18n="view_manifesto">View manifesto & credentials</span>
                                        </button>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="mca-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="mca-next" class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        <span data-i18n="next_referendum">Next: Referendum</span> <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- Referendum Ballot (Hidden Initially) -->
            <div id="referendum-content" class="ballot-content hidden">
                <div class="ballot-card bg-white rounded-xl shadow-md overflow-hidden mb-6 dark:bg-gray-800">
                    <div class="p-6 border-b border-gray-200 bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
                        <h3 class="text-lg font-medium text-gray-900 flex items-center dark:text-white">
                            <i class="fas fa-vote-yea text-green-500 mr-2"></i>
                            <span data-i18n="constitutional_referendum">Constitutional Referendum</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1 dark:text-gray-400" data-i18n="vote_amendments">Vote on the proposed constitutional amendments</p>
                    </div>
                    <div class="p-6">
                        <div class="mb-4">
                            <h4 class="text-md font-medium text-gray-800 dark:text-white" data-i18n="amendment_article">Proposed Amendment to Article 1 of the Constitution</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1" data-i18n="amendment_description">This amendment seeks to establish a parliamentary system of government with a Prime Minister as head of government and a President as head of state.</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="referendum-yes" name="referendum" type="radio" class="iebc-radio">
                                <label for="referendum-yes" class="ml-3 flex items-center w-full">
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-900 dark:text-white" data-i18n="yes">Yes</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="support_amendment">I support the proposed amendment</p>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="flex items-center p-4 border border-gray-200 rounded-lg hover:border-green-300 dark:border-gray-700 dark:hover:border-green-500">
                                <input id="referendum-no" name="referendum" type="radio" class="iebc-radio">
                                <label for="referendum-no" class="ml-3 flex items-center w-full">
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-900 dark:text-white" data-i18n="no">No</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="reject_amendment">I reject the proposed amendment</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="referendum-back" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                        <i class="fas fa-arrow-left mr-2"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button id="submit-ballot" 
                            class="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 pulse">
                        <i class="fas fa-check-circle mr-2"></i> <span data-i18n="submit_vote">Submit Your Vote</span>
                    </button>
                </div>
            </div>
        </section>
            
        <!-- Confirmation Modal (Hidden Initially) -->
        <div id="confirmation-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6 mx-4 dark:bg-gray-800">
                <div class="text-center">
                    <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30">
                        <i class="fas fa-check text-green-600 text-2xl dark:text-green-400"></i>
                    </div>
                    <h3 class="mt-4 text-lg font-medium text-gray-900 dark:text-white" data-i18n="vote_submitted">Vote Submitted Successfully!</h3>
                    <div class="mt-4 px-4 py-3 bg-green-50 rounded-md dark:bg-green-900/30">
                        <p class="text-sm text-green-800 dark:text-green-200" data-i18n="vote_recorded">Your vote has been securely recorded with transaction ID:</p>
                        <p class="font-mono text-sm font-bold mt-1 text-green-900 dark:text-green-300">TX-7A83B92C-IEBC-2023</p>
                        <p class="text-xs text-green-700 dark:text-green-300 mt-1">Timestamp: <span id="vote-timestamp"></span></p>
                    </div>
                    
                    <!-- Blockchain Transaction Viewer -->
                    <div class="mt-4">
                        <h4 class="text-sm font-medium text-gray-800 dark:text-gray-200 mb-2" data-i18n="blockchain_details">Blockchain Transaction Details</h4>
                        <div class="blockchain-viewer dark:bg-gray-700 dark:text-gray-300">
                            <div class="blockchain-line"><span class="blockchain-key">Block:</span> #1,245,678</div>
                            <div class="blockchain-line"><span class="blockchain-key">Hash:</span> 0x4a8e...3f2d</div>
                            <div class="blockchain-line"><span class="blockchain-key">From:</span> VoterWallet:0x1a2b...3c4d</div>
                            <div class="blockchain-line"><span class="blockchain-key">To:</span> IEBCWallet:0x5e6f...7g8h</div>
                            <div class="blockchain-line"><span class="blockchain-key">Value:</span> 1 VOTE</div>
                            <div class="blockchain-line"><span class="blockchain-key">Status:</span> Confirmed (12 confirmations)</div>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <p class="text-sm text-gray-600 dark:text-gray-300" data-i18n="download_receipt">You can download your voting receipt for your records.</p>
                        <div class="mt-4 flex justify-center space-x-3">
                            <button id="download-receipt" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                <i class="fas fa-download mr-2"></i> <span data-i18n="download_receipt_btn">Download Receipt</span>
                            </button>
                            <button id="close-modal" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:bg-gray-600">
                                <i class="fas fa-times mr-2"></i> <span data-i18n="close">Close</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Candidate Details Modal (Hidden Initially) -->
        <div id="candidate-modal" class="modal-overlay">
            <div class="modal-content max-w-2xl">
                <div class="p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 id="candidate-name" class="text-xl font-bold text-gray-900 dark:text-white"></h3>
                            <p id="candidate-position" class="text-sm text-gray-500 dark:text-gray-400"></p>
                        </div>
                        <button id="close-candidate-modal" class="text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="md:col-span-1">
                            <div class="flex flex-col items-center">
                                <img id="modal-candidate-photo" class="candidate-photo w-32 h-32" src="" alt="Candidate Photo">
                                <div class="mt-4 flex items-center">
                                    <img id="modal-party-logo" class="party-logo w-8 h-8" src="" alt="Party Logo">
                                    <span id="modal-party-name" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-300"></span>
                                </div>
                                <div class="mt-4 flex space-x-2">
                                    <a href="#" class="text-blue-500 hover:text-blue-700 dark:text-blue-400" id="candidate-facebook">
                                        <i class="fab fa-facebook-f"></i>
                                    </a>
                                    <a href="#" class="text-blue-400 hover:text-blue-600 dark:text-blue-300" id="candidate-twitter">
                                        <i class="fab fa-twitter"></i>
                                    </a>
                                    <a href="#" class="text-red-500 hover:text-red-700 dark:text-red-400" id="candidate-website">
                                        <i class="fas fa-globe"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="md:col-span-2">
                            <div class="space-y-4">
                                <div>
                                    <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="education">Education</h4>
                                    <p id="candidate-education" class="mt-1 text-sm text-gray-600 dark:text-gray-400"></p>
                                </div>
                                
                                <div>
                                    <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="experience">Experience</h4>
                                    <p id="candidate-experience" class="mt-1 text-sm text-gray-600 dark:text-gray-400"></p>
                                </div>
                                
                                <div>
                                    <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="manifesto">Manifesto Highlights</h4>
                                    <ul id="candidate-manifesto" class="mt-1 text-sm text-gray-600 dark:text-gray-400 list-disc list-inside space-y-1"></ul>
                                </div>
                                
                                <div>
                                    <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="achievements">Key Achievements</h4>
                                    <ul id="candidate-achievements" class="mt-1 text-sm text-gray-600 dark:text-gray-400 list-disc list-inside space-y-1"></ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- AI-Powered Candidate Analysis -->
                    <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center">
                            <i class="fas fa-robot text-purple-500 mr-2"></i>
                            <span data-i18n="ai_analysis">AI-Powered Candidate Analysis</span>
                        </h4>
                        <div class="mt-2 grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-3 bg-blue-50 rounded-lg dark:bg-blue-900/20">
                                <div class="flex items-center">
                                    <div class="p-2 rounded-full bg-blue-100 dark:bg-blue-800/30">
                                        <i class="fas fa-balance-scale text-blue-500 dark:text-blue-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-xs font-medium text-blue-800 dark:text-blue-200" data-i18n="policy_alignment">Policy Alignment</p>
                                        <div class="mt-1 w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700">
                                            <div id="policy-alignment" class="bg-blue-600 h-1.5 rounded-full" style="width: 78%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="p-3 bg-green-50 rounded-lg dark:bg-green-900/20">
                                <div class="flex items-center">
                                    <div class="p-2 rounded-full bg-green-100 dark:bg-green-800/30">
                                        <i class="fas fa-check-circle text-green-500 dark:text-green-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-xs font-medium text-green-800 dark:text-green-200" data-i18n="promise_fulfillment">Promise Fulfillment</p>
                                        <div class="mt-1 w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700">
                                            <div id="promise-fulfillment" class="bg-green-600 h-1.5 rounded-full" style="width: 65%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="p-3 bg-purple-50 rounded-lg dark:bg-purple-900/20">
                                <div class="flex items-center">
                                    <div class="p-2 rounded-full bg-purple-100 dark:bg-purple-800/30">
                                        <i class="fas fa-users text-purple-500 dark:text-purple-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-xs font-medium text-purple-800 dark:text-purple-200" data-i18n="constituency_engagement">Constituency Engagement</p>
                                        <div class="mt-1 w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700">
                                            <div id="constituency-engagement" class="bg-purple-600 h-1.5 rounded-full" style="width: 82%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="mt-2 text-xs text-gray-500 dark:text-gray-400 italic" data-i18n="ai_disclaimer">*AI analysis based on public records, speeches, and past performance. Not an IEBC endorsement.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Blockchain Verification Modal -->
        <div id="blockchain-modal" class="modal-overlay">
            <div class="modal-content max-w-3xl">
                <div class="p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="text-xl font-bold text-gray-900 dark:text-white flex items-center">
                                <i class="fas fa-link text-yellow-500 mr-2"></i>
                                <span data-i18n="blockchain_verification">Blockchain Vote Verification</span>
                            </h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1" data-i18n="blockchain_description">Your vote is securely recorded on the IEBC blockchain network</p>
                        </div>
                        <button id="close-blockchain-modal" class="text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="mt-6">
                        <div class="bg-gray-50 p-4 rounded-lg dark:bg-gray-700">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="h-10 w-10 rounded-full bg-green-100 flex items-center justify-center dark:bg-green-900/30">
                                        <i class="fas fa-check text-green-500 dark:text-green-400"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <h4 class="text-sm font-medium text-gray-900 dark:text-white" data-i18n="vote_verified">Vote Successfully Verified</h4>
                                    <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="vote_immutable">Your vote is immutable and tamper-proof on the blockchain</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="vote_details">Vote Details</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-500 dark:text-gray-400" data-i18n="voter_id">Voter ID</span>
                                        <span id="blockchain-voter-id" class="text-sm font-medium text-gray-900 dark:text-white">ID-7A83B92C</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-500 dark:text-gray-400" data-i18n="transaction_id">Transaction ID</span>
                                        <span id="blockchain-tx-id" class="text-sm font-medium text-gray-900 dark:text-white">TX-7A83B92C-IEBC</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-500 dark:text-gray-400" data-i18n="timestamp">Timestamp</span>
                                        <span id="blockchain-timestamp" class="text-sm font-medium text-gray-900 dark:text-white">2023-08-15 14:32:45 UTC</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-500 dark:text-gray-400" data-i18n="block_number">Block Number</span>
                                        <span id="blockchain-block" class="text-sm font-medium text-gray-900 dark:text-white">1,245,678</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="blockchain_network">Blockchain Network</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-500 dark:text-gray-400" data-i18n="network">Network</span>
                                        <span class="text-sm font-medium text-gray-900 dark:text-white">IEBC Sovereign Chain</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-500 dark:text-gray-400" data-i18n="consensus">Consensus</span>
                                        <span class="text-sm font-medium text-gray-900 dark:text-white">Proof-of-Authority</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-500 dark:text-gray-400" data-i18n="encryption">Encryption</span>
                                        <span class="text-sm font-medium text-gray-900 dark:text-white">SHA-384 + AES-256</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-500 dark:text-gray-400" data-i18n="nodes">Validation Nodes</span>
                                        <span class="text-sm font-medium text-gray-900 dark:text-white">47 Independent Nodes</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="transaction_proof">Transaction Proof</h4>
                            <div class="bg-gray-100 p-4 rounded-lg dark:bg-gray-700">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="h-8 w-8 rounded-full bg-green-100 flex items-center justify-center dark:bg-green-900/30">
                                            <i class="fas fa-check text-green-500 dark:text-green-400 text-xs"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-xs font-medium text-gray-900 dark:text-white" data-i18n="vote_recorded">Vote Recorded</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="block_confirmed">Block confirmed by 12/47 nodes</p>
                                        </div>
                                    </div>
                                    <button class="text-xs text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300" data-i18n="view_explorer">
                                        View on Blockchain Explorer
                                    </button>
                                </div>
                                
                                <div class="mt-4 flex items-center">
                                    <div class="flex-1 bg-gray-200 rounded-full h-2 dark:bg-gray-600">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                                    </div>
                                    <span class="ml-2 text-xs text-gray-500 dark:text-gray-400">100% Verified</span>
                                </div>
                                
                                <div class="mt-4 grid grid-cols-3 gap-2">
                                    <div class="p-2 bg-white rounded-md shadow-sm text-center dark:bg-gray-800">
                                        <p class="text-xs font-medium text-gray-900 dark:text-white">12</p>
                                        <p class="text-xxs text-gray-500 dark:text-gray-400" data-i18n="confirmations">Confirmations</p>
                                    </div>
                                    <div class="p-2 bg-white rounded-md shadow-sm text-center dark:bg-gray-800">
                                        <p class="text-xs font-medium text-gray-900 dark:text-white">47</p>
                                        <p class="text-xxs text-gray-500 dark:text-gray-400" data-i18n="nodes">Nodes</p>
                                    </div>
                                    <div class="p-2 bg-white rounded-md shadow-sm text-center dark:bg-gray-800">
                                        <p class="text-xs font-medium text-gray-900 dark:text-white">0.4s</p>
                                        <p class="text-xxs text-gray-500 dark:text-gray-400" data-i18n="finality">Finality Time</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Floating Help Button -->
        <div class="floating-help no-print" id="help-button">
            <i class="fas fa-question text-xl"></i>
        </div>

        <!-- Help Modal -->
        <div id="help-modal" class="modal-overlay">
            <div class="modal-content max-w-2xl">
                <div class="p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="text-xl font-bold text-gray-900 dark:text-white" data-i18n="help_center">Voting Portal Help Center</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="assistance_available">24/7 assistance available</p>
                        </div>
                        <button id="close-help-modal" class="text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="p-4 bg-blue-50 rounded-lg dark:bg-blue-900/20">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center dark:bg-blue-800/30">
                                        <i class="fas fa-phone-alt text-blue-500 dark:text-blue-400"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <h4 class="text-sm font-medium text-gray-900 dark:text-white" data-i18n="call_support">Call Support</h4>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">+254 700 000 000</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-green-50 rounded-lg dark:bg-green-900/20">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="h-10 w-10 rounded-full bg-green-100 flex items-center justify-center dark:bg-green-800/30">
                                        <i class="fas fa-comment-alt text-green-500 dark:text-green-400"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <h4 class="text-sm font-medium text-gray-900 dark:text-white" data-i18n="live_chat">Live Chat</h4>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1" data-i18n="chat_available">Available 24/7</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-purple-50 rounded-lg dark:bg-purple-900/20">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center dark:bg-purple-800/30">
                                        <i class="fas fa-video text-purple-500 dark:text-purple-400"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <h4 class="text-sm font-medium text-gray-900 dark:text-white" data-i18n="video_guide">Video Guide</h4>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1" data-i18n="how_to_vote">How to vote online</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-yellow-50 rounded-lg dark:bg-yellow-900/20">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="h-10 w-10 rounded-full bg-yellow-100 flex items-center justify-center dark:bg-yellow-800/30">
                                        <i class="fas fa-map-marker-alt text-yellow-500 dark:text-yellow-400"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <h4 class="text-sm font-medium text-gray-900 dark:text-white" data-i18n="find_center">Find a Center</h4>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1" data-i18n="physical_locations">Physical voting locations</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="frequently_asked">Frequently Asked Questions</h4>
                        <div class="space-y-3">
                            <div class="border-b border-gray-200 pb-3 dark:border-gray-700">
                                <button class="faq-question flex justify-between items-center w-full text-left text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100">
                                    <span data-i18n="faq1">How do I know my vote is secure?</span>
                                    <i class="fas fa-chevron-down text-xs transform transition-transform duration-200"></i>
                                </button>
                                <div class="faq-answer mt-2 text-sm text-gray-500 dark:text-gray-400 hidden" data-i18n="faq1_answer">
                                    Your vote is protected by end-to-end encryption and recorded on the IEBC blockchain network, making it immutable and verifiable. We use the same security standards as online banking.
                                </div>
                            </div>
                            
                            <div class="border-b border-gray-200 pb-3 dark:border-gray-700">
                                <button class="faq-question flex justify-between items-center w-full text-left text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100">
                                    <span data-i18n="faq2">Can I change my vote after submission?</span>
                                    <i class="fas fa-chevron-down text-xs transform transition-transform duration-200"></i>
                                </button>
                                <div class="faq-answer mt-2 text-sm text-gray-500 dark:text-gray-400 hidden" data-i18n="faq2_answer">
                                    No, once submitted your vote is final and cannot be changed to maintain election integrity. Please review your selections carefully before submitting.
                                </div>
                            </div>
                            
                            <div class="border-b border-gray-200 pb-3 dark:border-gray-700">
                                <button class="faq-question flex justify-between items-center w-full text-left text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100">
                                    <span data-i18n="faq3">What if I experience technical issues?</span>
                                    <i class="fas fa-chevron-down text-xs transform transition-transform duration-200"></i>
                                </button>
                                <div class="faq-answer mt-2 text-sm text-gray-500 dark:text-gray-400 hidden" data-i18n="faq3_answer">
                                    Contact our 24/7 support team immediately. If we cannot resolve the issue, you'll be directed to the nearest physical voting center with priority access.
                                </div>
                            </div>
                            
                            <div class="border-b border-gray-200 pb-3 dark:border-gray-700">
                                <button class="faq-question flex justify-between items-center w-full text-left text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100">
                                    <span data-i18n="faq4">How is my privacy protected?</span>
                                    <i class="fas fa-chevron-down text-xs transform transition-transform duration-200"></i>
                                </button>
                                <div class="faq-answer mt-2 text-sm text-gray-500 dark:text-gray-400 hidden" data-i18n="faq4_answer">
                                    Your identity is separated from your vote through cryptographic techniques. Only anonymized voting data is recorded on the blockchain.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 no-print">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-medium mb-4" data-i18n="about_iebc">About IEBC</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="about_us">About Us</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="commissioners">Commissioners</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="strategic_plan">Strategic Plan</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="annual_reports">Annual Reports</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-medium mb-4" data-i18n="elections">Elections</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="election_calendar">Election Calendar</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="past_elections">Past Elections</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="electoral_areas">Electoral Areas</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="political_parties">Political Parties</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-medium mb-4" data-i18n="voter_services">Voter Services</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="register_to_vote">Register to Vote</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="check_status">Check Voter Status</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="voter_education">Voter Education</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white text-sm" data-i18n="faqs">FAQs</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-medium mb-4" data-i18n="contact_us">Contact Us</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center">
                            <i class="fas fa-map-marker-alt text-gray-400 mr-2"></i>
                            <span class="text-sm text-gray-300">IEBC Headquarters, Nairobi</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone-alt text-gray-400 mr-2"></i>
                            <span class="text-sm text-gray-300">+254 700 000 000</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope text-gray-400 mr-2"></i>
                            <span class="text-sm text-gray-300">info@iebc.or.ke</span>
                        </li>
                    </ul>
                    <div class="mt-4 flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 pt-8 border-t border-gray-700">
                <div class="md:flex md:items-center md:justify-between">
                    <div class="flex justify-center md:order-2 space-x-6">
                        <button id="language-toggle-footer" class="text-gray-400 hover:text-white text-sm flex items-center">
                            <i class="fas fa-language mr-1"></i>
                            <span data-i18n="language">Language</span>
                        </button>
                        <button id="accessibility-footer" class="text-gray-400 hover:text-white text-sm flex items-center">
                            <i class="fas fa-universal-access mr-1"></i>
                            <span data-i18n="accessibility">Accessibility</span>
                        </button>
                    </div>
                    <div class="mt-4 md:mt-0 md:order-1">
                        <p class="text-center text-sm text-gray-400" data-i18n="copyright">&copy; 2023 Independent Electoral and Boundaries Commission. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
       // Language translations
        const translations = {
            en: {
                // Authentication Section
                "iebc_title": "INDEPENDENT ELECTORAL & BOUNDARIES COMMISSION",
                "portal_subtitle": "Secure Digital Voting Portal - Official Government Platform",
                "secure_connection": "Secure TLS 1.3 Connection",
                "auth_title": "Voter Authentication",
                "auth_subtitle": "Verify your identity to access the voting portal",
                "step_1": "Step 1 of 4",
                "security_info": "Your information is protected with end-to-end encryption certified by the National KE-CIRT.",
                "security_details": "This system uses AES-256 encryption and blockchain verification to ensure vote integrity. Learn more about our security measures.",
                "national_id_label": "National ID Number",
                "voter_code_label": "IEBC Voter Code",
                "code_info": "This code was sent to you via SMS or provided at registration",
                "forgot_code": "Forgot your code?",
                "photo_verification": "Photo Verification",
                "upload_instructions": "Click to upload your photo or drag and drop",
                "upload_purpose": "For verification against your registered voter photo",
                "photo_error": "Please upload a clear photo of your face",
                "verify_identity": "Verify Identity",
                "first_time_voting": "First time voting?",
                "registration_info": "If you haven't registered as a voter, please visit your nearest IEBC office to register before proceeding.",
                "find_centers": "Find registration centers",
                
                // Biometric Section
                "biometric_title": "Biometric Verification",
                "biometric_subtitle": "Additional security step to confirm your identity",
                "step_2": "Step 2 of 4",
                "biometric_info": "For enhanced security, please complete biometric verification using your registered fingerprint or facial recognition.",
                "biometric_details": "This matches against your biometric data collected during voter registration.",
                "facial_recognition": "Facial Recognition",
                "face_instructions": "Position your face within the frame and hold still",
                "face_status": "Waiting for face detection...",
                "try_fingerprint": "Try Fingerprint Instead",
                "back": "Back",
                "skip_for_now": "Skip for now",
                
                // Location Section
                "location_title": "Confirm Your Voting Location",
                "location_subtitle": "We'll show you candidates specific to your area",
                "step_3": "Step 3 of 4",
                "location_info": "Your voting location helps us display the correct candidates for your electoral area. This should match your registration details.",
                "location_details": "If this doesn't match your registration, please visit an IEBC office to update your details.",
                "county_label": "County",
                "select_county": "Select County",
                "constituency_label": "Constituency",
                "select_county_first": "Select County First",
                "ward_label": "Ward",
                "select_constituency_first": "Select Constituency First",
                "confirm_location": "Confirm Location",
                "wrong_location": "Not your registered location?",
                "location_update": "If this doesn't match your registration details, please visit your nearest IEBC office to update your information.",
                
                // Ballot Section
                "ballot_title": "Your Digital Ballot",
                "ballot_subtitle": "Make your selections carefully. You cannot change your vote after submission.",
                "step_4": "Step 4 of 4",
                "print": "Print",
                "time_remaining": "Session Time Remaining",
                "minutes": "minutes",
                "session_warning": "Your session will expire automatically for security reasons.",
                "president": "President",
                "governor": "Governor",
                "senator": "Senator",
                "mp": "MP",
                "mca": "MCA",
                "referendum": "Referendum",
                "president_deputy": "President & Deputy President",
                "vote_one_pair": "Vote for one candidate pair",
                "uda_party": "United Democratic Alliance",
                "incumbent": "Incumbent",
                "deputy": "Deputy",
                "view_manifesto": "View manifesto & credentials",
                "odm_party": "Orange Democratic Movement",
                "former_pm": "Former PM",
                "roots_party": "Roots Party Kenya",
                "professor": "Professor",
                "next_governor": "Next: Governor",
                "governor_deputy": "Governor & Deputy Governor",
                "vote_one_county": "Vote for one candidate pair in your county",
                "senator": "Senator",
                "next_senator": "Next: Senator",
                "lawyer": "Lawyer",
                "secretary_general": "Secretary General",
                "member_parliament": "Member of Parliament",
                "vote_one_constituency": "Vote for one candidate in your constituency",
                "businesswoman": "Businesswoman",
                "next_mp": "Next: MP",
                "member_county_assembly": "Member of County Assembly",
                "vote_one_ward": "Vote for one candidate in your ward",
                "youth": "Youth",
                "next_mca": "Next: MCA",
                "constitutional_referendum": "Constitutional Referendum",
                "vote_amendments": "Vote on the proposed constitutional amendments",
                "amendment_article": "Proposed Amendment to Article 1 of the Constitution",
                "amendment_description": "This amendment seeks to establish a parliamentary system of government with a Prime Minister as head of government and a President as head of state.",
                "yes": "Yes",
                "support_amendment": "I support the proposed amendment",
                "no": "No",
                "reject_amendment": "I reject the proposed amendment",
                "next_referendum": "Next: Referendum",
                "submit_vote": "Submit Your Vote",
                
                // Confirmation Modal
                "vote_submitted": "Vote Submitted Successfully!",
                "vote_recorded": "Your vote has been securely recorded with transaction ID:",
                "blockchain_details": "Blockchain Transaction Details",
                "download_receipt": "You can download your voting receipt for your records.",
                "download_receipt_btn": "Download Receipt",
                "close": "Close",
                
                // Candidate Modal
                "education": "Education",
                "experience": "Experience",
                "manifesto": "Manifesto Highlights",
                "achievements": "Key Achievements",
                "ai_analysis": "AI-Powered Candidate Analysis",
                "policy_alignment": "Policy Alignment",
                "promise_fulfillment": "Promise Fulfillment",
                "constituency_engagement": "Constituency Engagement",
                "ai_disclaimer": "*AI analysis based on public records, speeches, and past performance. Not an IEBC endorsement.",
                
                // Blockchain Modal
                "blockchain_verification": "Blockchain Vote Verification",
                "blockchain_description": "Your vote is securely recorded on the IEBC blockchain network",
                "vote_verified": "Vote Successfully Verified",
                "vote_immutable": "Your vote is immutable and tamper-proof on the blockchain",
                "vote_details": "Vote Details",
                "voter_id": "Voter ID",
                "transaction_id": "Transaction ID",
                "timestamp": "Timestamp",
                "block_number": "Block Number",
                "blockchain_network": "Blockchain Network",
                "network": "Network",
                "consensus": "Consensus",
                "encryption": "Encryption",
                "nodes": "Validation Nodes",
                "transaction_proof": "Transaction Proof",
                "block_confirmed": "Block confirmed by 12/47 nodes",
                "confirmations": "Confirmations",
                "finality": "Finality Time",
                "view_explorer": "View on Blockchain Explorer",
                
                // Help Modal
                "help_center": "Voting Portal Help Center",
                "assistance_available": "24/7 assistance available",
                "call_support": "Call Support",
                "live_chat": "Live Chat",
                "chat_available": "Available 24/7",
                "video_guide": "Video Guide",
                "how_to_vote": "How to vote online",
                "find_center": "Find a Center",
                "physical_locations": "Physical voting locations",
                "frequently_asked": "Frequently Asked Questions",
                "faq1": "How do I know my vote is secure?",
                "faq1_answer": "Your vote is protected by end-to-end encryption and recorded on the IEBC blockchain network, making it immutable and verifiable. We use the same security standards as online banking.",
                "faq2": "Can I change my vote after submission?",
                "faq2_answer": "No, once submitted your vote is final and cannot be changed to maintain election integrity. Please review your selections carefully before submitting.",
                "faq3": "What if I experience technical issues?",
                "faq3_answer": "Contact our 24/7 support team immediately. If we cannot resolve the issue, you'll be directed to the nearest physical voting center with priority access.",
                "faq4": "How is my privacy protected?",
                "faq4_answer": "Your identity is separated from your vote through cryptographic techniques. Only anonymized voting data is recorded on the blockchain.",
                
                // Footer
                "about_iebc": "About IEBC",
                "about_us": "About Us",
                "commissioners": "Commissioners",
                "strategic_plan": "Strategic Plan",
                "annual_reports": "Annual Reports",
                "elections": "Elections",
                "election_calendar": "Election Calendar",
                "past_elections": "Past Elections",
                "electoral_areas": "Electoral Areas",
                "political_parties": "Political Parties",
                "voter_services": "Voter Services",
                "register_to_vote": "Register to Vote",
                "check_status": "Check Voter Status",
                "voter_education": "Voter Education",
                "faqs": "FAQs",
                "contact_us": "Contact Us",
                "language": "Language",
                "accessibility": "Accessibility",
                "copyright": "Â© 2023 Independent Electoral and Boundaries Commission. All rights reserved."
            },
            sw: {
                // Authentication Section
                "iebc_title": "TUME HURU YA UCHAGUZI NA MIPAKA",
                "portal_subtitle": "Jukwaa Salama la Kupigia Kura Dijiti - Jukwaa Rasmi la Serikali",
                "secure_connection": "Muunganisho Salama wa TLS 1.3",
                "auth_title": "Uthibitishaji wa Mpiga Kura",
                "auth_subtitle": "Thibitisha utambulisho wako kwa kupata ufikiaji wa jukwaa la kupigia kura",
                "step_1": "Hatua ya 1 kati ya 4",
                "security_info": "Maelezo yako yanalindwa kwa usimbaji fiche wa mwisho hadi mwisho ulioidhinishwa na KE-CIRT ya Taifa.",
                "security_details": "Mfumo huu unatumia usimbaji fiche wa AES-256 na uthibitishaji wa blockchain kuhakikisha uadilifu wa kura. Jifunze zaidi kuhusu hatua zetu za usalama.",
                "national_id_label": "Nambari ya Kitambulisho cha Taifa",
                "voter_code_label": "Msimbo wa Mpiga Kura wa IEBC",
                "code_info": "Msimbo huu ulitumwa kwako kupitia SMS au ulitolewa wakati wa usajili",
                "forgot_code": "Umesahau msimbo wako?",
                "photo_verification": "Uthibitishaji wa Picha",
                "upload_instructions": "Bonyeza kupakia picha yako au buruta na udondoshe",
                "upload_purpose": "Kwa ajili ya uthibitishaji dhidi ya picha yako ya mpiga kura iliyosajiliwa",
                "photo_error": "Tafadhali pakia picha wazi ya uso wako",
                "verify_identity": "Thibitisha Utambulisho",
                "first_time_voting": "Unapiga kura kwa mara ya kwanza?",
                "registration_info": "Ikiwa haujasajiliwa kama mpiga kura, tafadhali tembelea ofisi ya karibu ya IEBC kujisajili kabla ya kuendelea.",
                "find_centers": "Tafuta vituo vya usajili",
                
                // Biometric Section
                "biometric_title": "Uthibitishaji wa Kibayometrici",
                "biometric_subtitle": "Hatua ya ziada ya usalama kuthibitisha utambulisho wako",
                "step_2": "Hatua ya 2 kati ya 4",
                "biometric_info": "Kwa usalama ulioimarishwa, tafadhali kamilisha uthibitishaji wa kibayometrici kwa kutumia alama yako ya kidole au utambuzi wa uso uliyosajiliwa.",
                "biometric_details": "Hii inalinganishwa na data yako ya kibayometrici iliyokusanywa wakati wa usajili wa mpiga kura.",
                "facial_recognition": "Utambuzi wa Uso",
                "face_instructions": "Weka uso wako ndani ya fremu na usimame",
                "face_status": "Inasubiri kugunduliwa kwa uso...",
                "try_fingerprint": "Jaribu Alama ya Kidole Badala Yake",
                "back": "Rudi",
                "skip_for_now": "Ruka kwa sasa",
                
                // Location Section
                "location_title": "Thibitisha Eneo Lako la Kupigia Kura",
                "location_subtitle": "Tutakuonyesha wagombea maalum kwa eneo lako",
                "step_3": "Hatua ya 3 kati ya 4",
                "location_info": "Eneo lako la kupigia kura linatusaidia kuonyesha wagombea sahihi kwa eneo lako la uchaguzi. Hii inapaswa kufanana na maelezo yako ya usajili.",
                "location_details": "Ikiwa hii haifanani na usajili wako, tafadhali tembelea ofisi ya IEBC ili kusasisha maelezo yako.",
                "county_label": "Kaunti",
                "select_county": "Chagua Kaunti",
                "constituency_label": "Jimbo",
                "select_county_first": "Chagua Kaunti Kwanza",
                "ward_label": "Kata",
                "select_constituency_first": "Chagua Jimbo Kwanza",
                "confirm_location": "Thibitisha Eneo",
                "wrong_location": "Sio eneo lako lililosajiliwa?",
                "location_update": "Ikiwa hii haifanani na maelezo yako ya usajili, tafadhali tembelea ofisi ya karibu ya IEBC ili kusasisha maelezo yako.",
                
                // Ballot Section
                "ballot_title": "Kura Yako ya Dijiti",
                "ballot_subtitle": "Fanya uchaguzi wako kwa makini. Hauwezi kubadilisha kura yako baada ya kuwasilisha.",
                "step_4": "Hatua ya 4 kati ya 4",
                "print": "Print",
                "time_remaining": "Muda Uliobaki wa Kikao",
                "minutes": "dakika",
                "session_warning": "Kikao chako kitamalizika kiotomatiki kwa sababu za usalama.",
                "president": "Rais",
                "governor": "Gavana",
                "senator": "Seneta",
                "mp": "MB",
                "mca": "MCA",
                "referendum": "Kura ya Maoni",
                "president_deputy": "Rais na Makamu wa Rais",
                "vote_one_pair": "Piga kura kwa jozi moja ya mgombea",
                "uda_party": "Chama cha Umoja wa Demokrasia",
                "incumbent": "Mwenye kiti",
                "deputy": "Makamu",
                "view_manifesto": "Tazama manifesto na vyeti",
                "odm_party": "Chama cha Demokrasia ya Machungwa",
                "former_pm": "Waziri Mkuu wa Zamani",
                "roots_party": "Chama cha Roots Kenya",
                "professor": "Profesa",
                "next_governor": "Inayofuata: Gavana",
                "governor_deputy": "Gavana na Makamu wa Gavana",
                "vote_one_county": "Piga kura kwa jozi moja ya mgombea katika kaunti yako",
                "senator": "Seneta",
                "next_senator": "Inayofuata: Seneta",
                "lawyer": "Wakili",
                "secretary_general": "Katibu Mkuu",
                "member_parliament": "Mbunge",
                "vote_one_constituency": "Piga kura kwa mgombea mmoja katika jimbo lako",
                "businesswoman": "Mfanyabiashara wa kike",
                "next_mp": "Inayofuata: MB",
                "member_county_assembly": "Mwanachama wa Baraza la Kaunti",
                "vote_one_ward": "Piga kura kwa mgombea mmoja katika kata yako",
                "youth": "Vijana",
                "next_mca": "Inayofuata: MCA",
                "constitutional_referendum": "Kura ya Maoni ya Katiba",
                "vote_amendments": "Piga kura kuhusu marekebisho yaliyopendekezwa ya katiba",
                "amendment_article": "Marekebisho yaliyopendekezwa ya Kifungu cha 1 cha Katiba",
                "amendment_description": "Marekebisho haya yanalenga kuanzisha mfumo wa serikali ya bunge na Waziri Mkuu kama kiongozi wa serikali na Rais kama kiongozi wa nchi.",
                "yes": "Ndiyo",
                "support_amendment": "Ninaunga mkono marekebisho yaliyopendekezwa",
                "no": "Hapana",
                "reject_amendment": "Ninakataa marekebisho yaliyopendekezwa",
                "next_referendum": "Inayofuata: Kura ya Maoni",
                "submit_vote": "Wasilisha Kura Yako",
                
                // Confirmation Modal
                "vote_submitted": "Kura Imewasilishwa Kikamilifu!",
                "vote_recorded": "Kura yako imerekodiwa kwa usalama na kitambulisho cha mwenendo:",
                "blockchain_details": "Maelezo ya Mwenendo wa Blockchain",
                "download_receipt": "Unaweza kupakua risiti yako ya kupigia kura kwa rekodi zako.",
                "download_receipt_btn": "Pakua Risiti",
                "close": "Funga",
                
                // Candidate Modal
                "education": "Elimu",
                "experience": "Uzoefu",
                "manifesto": "Yaliyomo kwenye Manifesto",
                "achievements": "Mafanikio Muhimu",
                "ai_analysis": "Uchambuzi wa Mgombea Unaotumia AI",
                "policy_alignment": "Ulinganifu wa Sera",
                "promise_fulfillment": "Utimizaji wa Ahadi",
                "constituency_engagement": "Ushiriki wa Jimbo",
                "ai_disclaimer": "*Uchambuzi wa AI unatokana na rekodi za umma, hotuba, na utendaji wa zamani. Sio uthibitisho wa IEBC.",
                
                // Blockchain Modal
                "blockchain_verification": "Uthibitishaji wa Blockchain wa Kura",
                "blockchain_description": "Kura yako imerekodiwa kwa usalama kwenye mtandao wa blockchain wa IEBC",
                "vote_verified": "Kura Imethibitishwa Kikamilifu",
                "vote_immutable": "Kura yako haibadiliki na haifutiki kwenye blockchain",
                "vote_details": "Maelezo ya Kura",
                "voter_id": "Kitambulisho cha Mpiga Kura",
                "transaction_id": "Kitambulisho cha Mwenendo",
                "timestamp": "Muda",
                "block_number": "Nambari ya Block",
                "blockchain_network": "Mtandao wa Blockchain",
                "network": "Mtandao",
                "consensus": "Makubaliano",
                "encryption": "Usimbaji Fiche",
                "nodes": "Nodes za Uthibitishaji",
                "transaction_proof": "Uthibitisho wa Mwenendo",
                "block_confirmed": "Block imethibitishwa na nodes 12/47",
                "confirmations": "Uthibitishaji",
                "finality": "Muda wa Mwisho",
                "view_explorer": "Tazama kwenye Kivinjari cha Blockchain",
                
                // Help Modal
                "help_center": "Kituo cha Usaidizi cha Jukwaa la Kupigia Kura",
                "assistance_available": "Usaidizi unaopatikana saa 24/7",
                "call_support": "Piga Usaidizi",
                "live_chat": "Mazungumzo ya Moja kwa Moja",
                "chat_available": "Inapatikana saa 24/7",
                "video_guide": "Mwongozo wa Video",
                "how_to_vote": "Jinsi ya kupigia kura mtandaoni",
                "find_center": "Tafuta Kituo",
                "physical_locations": "Vituo vya kupigia kura kimwili",
                "frequently_asked": "Maswali Yanayoulizwa Mara kwa Mara",
                "faq1": "Najuaje kura yangu iko salama?",
                "faq1_answer": "Kura yako inalindwa kwa usimbaji fiche wa mwisho hadi mwisho na kurekodiwa kwenye mtandao wa blockchain wa IEBC, na kufanya kuwa haibadiliki na inaweza kuthibitishwa. Tunatumia viwango vya usalama sawa na benki mtandaoni.",
                "faq2": "Naweza kubadilisha kura yangu baada ya kuwasilisha?",
                "faq2_answer": "Hapana, mara tu kura yako imewasilishwa, ni ya mwisho na haiwezi kubadilishwa ili kudumisha uadilifu wa uchaguzi. Tafadhali hakikisha uchaguzi wako kwa makini kabla ya kuwasilisha.",
                "faq3": "Nini ikiwa nitakumbana na matatizo ya kiufundi?",
                "faq3_answer": "Wasiliana na timu yetu ya usaidizi 24/7 mara moja. Ikiwa hatuwezi kutatua tatizo, utaelekezwa kwenye kituo cha karibu cha kupigia kura kimwili kwa ufikiaji wa kipaumbele.",
                "faq4": "Faragha yangu inalindwaje?",
                "faq4_answer": "Utambulisho wako umetenganishwa na kura yako kupitia mbinu za kriptografia. Data ya kura isiyojulikana tu ndio inarekodiwa kwenye blockchain.",
                
                // Footer
                "about_iebc": "Kuhusu IEBC",
                "about_us": "Kuhusu Sisi",
                "commissioners": "Makamishna",
                "strategic_plan": "Mpango wa Mkakati",
                "annual_reports": "Ripoti za Mwaka",
                "elections": "Uchaguzi",
                "election_calendar": "Kalenda ya Uchaguzi",
                "past_elections": "Uchaguzi wa Zamani",
                "electoral_areas": "Maeneo ya Uchaguzi",
                "political_parties": "Vyama vya Siasa",
                "voter_services": "Huduma za Mpiga Kura",
                "register_to_vote": "Jisajili Kupiga Kura",
                "check_status": "Angalia Hali ya Mpiga Kura",
                "voter_education": "Elimu ya Mpiga Kura",
                "faqs": "Maswali Yanayoulizwa Mara kwa Mara",
                "contact_us": "Wasiliana Nasi",
                "language": "Lugha",
                "accessibility": "Ufikiaji",
                "copyright": "Â© 2023 Tume Huru ya Uchaguzi na Mipaka. Haki zote zimehifadhiwa."
            }
        };

        // Current language
        let currentLanguage = 'en';

        // DOM Elements
        const languageOptions = document.querySelectorAll('.language-option');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const authForm = document.getElementById('auth-form');
        const biometricSection = document.getElementById('biometric-section');
        const locationSection = document.getElementById('location-section');
        const ballotSection = document.getElementById('ballot-section');
        const authSection = document.getElementById('auth-section');
        const backToAuth = document.getElementById('back-to-auth');
        const skipBiometric = document.getElementById('skip-biometric');
        const backToBiometric = document.getElementById('back-to-biometric');
        const locationForm = document.getElementById('location-form');
        const countySelect = document.getElementById('county');
        const constituencySelect = document.getElementById('constituency');
        const wardSelect = document.getElementById('ward');
        const photoUpload = document.getElementById('photo-upload');
        const photoInput = document.getElementById('photo-input');
        const photoPreview = document.getElementById('photo-preview');
        const uploadInstructions = document.getElementById('upload-instructions');
        const photoError = document.getElementById('photo-error');
        const progressFill = document.getElementById('progress-fill');
        const verificationSteps = document.querySelectorAll('.verification-step');
        const faceDetectionContainer = document.getElementById('face-detection-container');
        const faceIcon = document.getElementById('face-icon');
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const faceDetectionFrame = document.getElementById('face-detection-frame');
        const biometricProgress = document.getElementById('biometric-progress');
        const biometricStatus = document.getElementById('biometric-status');
        const tryFingerprint = document.getElementById('try-fingerprint');
        const biometricAnimation = document.getElementById('biometric-animation');
        const voterLocation = document.getElementById('voter-location');
        const timeRemaining = document.getElementById('time-remaining');
        const timer = document.getElementById('timer');
        const printBallot = document.getElementById('print-ballot');
        const presidentBack = document.getElementById('president-back');
        const presidentNext = document.getElementById('president-next');
        const governorBack = document.getElementById('governor-back');
        const governorNext = document.getElementById('governor-next');
        const senatorBack = document.getElementById('senator-back');
        const senatorNext = document.getElementById('senator-next');
        const mpBack = document.getElementById('mp-back');
        const mpNext = document.getElementById('mp-next');
        const mcaBack = document.getElementById('mca-back');
        const mcaNext = document.getElementById('mca-next');
        const referendumBack = document.getElementById('referendum-back');
        const submitBallot = document.getElementById('submit-ballot');
        const confirmationModal = document.getElementById('confirmation-modal');
        const closeModal = document.getElementById('close-modal');
        const downloadReceipt = document.getElementById('download-receipt');
        const voteTimestamp = document.getElementById('vote-timestamp');
        const candidateDetailsBtns = document.querySelectorAll('.candidate-details-btn');
        const candidateModal = document.getElementById('candidate-modal');
        const closeCandidateModal = document.getElementById('close-candidate-modal');
        const candidateName = document.getElementById('candidate-name');
        const candidatePosition = document.getElementById('candidate-position');
        const modalCandidatePhoto = document.getElementById('modal-candidate-photo');
        const modalPartyLogo = document.getElementById('modal-party-logo');
        const modalPartyName = document.getElementById('modal-party-name');
        const candidateEducation = document.getElementById('candidate-education');
        const candidateExperience = document.getElementById('candidate-experience');
        const candidateManifesto = document.getElementById('candidate-manifesto');
        const candidateAchievements = document.getElementById('candidate-achievements');
        const candidateFacebook = document.getElementById('candidate-facebook');
        const candidateTwitter = document.getElementById('candidate-twitter');
        const candidateWebsite = document.getElementById('candidate-website');
        const blockchainModal = document.getElementById('blockchain-modal');
        const closeBlockchainModal = document.getElementById('close-blockchain-modal');
        const helpButton = document.getElementById('help-button');
        const helpModal = document.getElementById('help-modal');
        const closeHelpModal = document.getElementById('close-help-modal');
        const faqQuestions = document.querySelectorAll('.faq-question');
        const textIncrease = document.getElementById('text-increase');
        const textDecrease = document.getElementById('text-decrease');
        const highContrast = document.getElementById('high-contrast');
        const screenReader = document.getElementById('screen-reader');
        const ballotTabs = document.querySelectorAll('#ballot-section nav button');
        const ballotContents = document.querySelectorAll('.ballot-content');

        // County, Constituency, and Ward data
        const electoralData = {
            "nairobi": {
                "constituencies": {
                    "westlands": ["Parklands/Highridge", "Karura", "Kangemi", "Mountain View"],
                    "dagoretti-north": ["Kilimani", "Kawangware", "Gatina", "Kileleshwa", "Kabiro"],
                    "dagoretti-south": ["Mutu-ini", "Ngando", "Riruta", "Uthiru/Ruthimitu", "Waithaka"],
                    "langata": ["Karen", "Nairobi West", "Mugumo-ini", "South C", "Nyayo Highrise"],
                    "kibra": ["Laini Saba", "Lindi", "Makina", "Woodley/Kenyatta Golf Course", "Sarang'ombe"],
                    "roysambu": ["Githurai", "Kahawa West", "Zimmerman", "Roysambu", "Kahawa"],
                    "kasarani": ["Clay City", "Mwiki", "Kasarani", "Njiru", "Ruai"],
                    "ruaraka": ["Baba Dogo", "Utalii", "Mathare North", "Lucky Summer", "Korogocho"],
                    "embakasi-south": ["Imara Daima", "Kwa Njenga", "Kwa Reuben", "Pipeline", "Kware"],
                    "embakasi-north": ["Kariobangi North", "Dandora Area I", "Dandora Area II", "Dandora Area III", "Dandora Area IV"],
                    "embakasi-central": ["Kayole North", "Kayole Central", "Kayole South", "Komarock", "Matopeni/Spring Valley"],
                    "embakasi-east": ["Upper Savanna", "Lower Savanna", "Embakasi", "Utawala", "Mihango"],
                    "embakasi-west": ["Umoja I", "Umoja II", "Mowlem", "Kariobangi South"],
                    "kamukunji": ["Pumwani", "Eastleigh North", "Eastleigh South", "Airbase", "California"],
                    "starehe": ["Nairobi Central", "Ngara", "Pangani", "Ziwani/Kariokor", "Landimawe", "Nairobi South"],
                    "mathare": ["Hospital", "Mabatini", "Huruma", "Ngei", "Mlango Kubwa", "Kiamaiko"]
                }
            },
            "kiambu": {
                "constituencies": {
                    "githunguri": ["Githunguri", "Githiga", "Ikinu", "Ngewa", "Komothai"],
                    "kiambaa": ["Cianda", "Karuri", "Ndenderu", "Muchatha", "Kihara"],
                    "kiambu": ["Ting'ang'a", "Ndumberi", "Riabai", "Township", "Karai"],
                    "kabete": ["Gitaru", "Muguga", "Nyadhuna", "Kikuyu", "Kinoo"],
                    "limuru": ["Bibirioni", "Limuru Central", "Ndeiya", "Limuru East", "Ngecha Tigoni"],
                    "kikuyu": ["Kikuyu", "Kinoo", "Karai", "Nachu", "Sigona"],
                    "juja": ["Juja", "Witeithie", "Kalimoni", "Theta", "Murera"],
                    "thika-town": ["Township", "Kamenu", "Hospital", "Gatuanyaga", "Ngoliba"],
                    "ruiru": ["Gitothua", "Biashara", "Gatongora", "Kahawa Sukari", "Kahawa Wendani", "Mwiki", "Ruiru"],
                    "gatundu-south": ["Kiamwangi", "Kiganjo", "Ndarugu", "Ngenda"],
                    "gatundu-north": ["Gitwamba", "Gatundu", "Kanyoni", "Kamwangi", "Kiama"],
                    "lari": ["Kaeris", "Lari/Kirenga", "Kijabe", "Kamburu", "Kinale"]
                }
            }
            // More counties can be added here
        };

        // Candidate data
        const candidatesData = {
            "president-1": {
                "name": "William Ruto",
                "position": "President & Deputy President",
                "photo": "https://www.iebc.or.ke/wp-content/uploads/2022/08/william-ruto.jpg",
                "party": "United Democratic Alliance",
                "partyLogo": "https://upload.wikimedia.org/wikipedia/en/thumb/6/6e/United_Democratic_Alliance_logo.svg/1200px-United_Democratic_Alliance_logo.svg.png",
                "deputy": "Rigathi Gachagua",
                "education": "PhD in Plant Ecology (University of Nairobi), MSc in Plant Ecology, BSc in Botany and Zoology",
                "experience": "Current President of Kenya, Former Deputy President (2013-2022), Minister for Agriculture (2008-2010), Minister for Higher Education (2010-2013), MP for Eldoret North (1997-2013)",
                "manifesto": [
                    "Bottom-up economic model focusing on empowering small businesses",
                    "Create 1.2 million jobs annually through industrialization",
                    "Increase healthcare funding to 10% of national budget",
                    "Provide affordable housing through public-private partnerships",
                    "Reform education system to focus on skills and vocational training"
                ],
                "achievements": [
                    "Instrumental in Kenya's devolution process as Deputy President",
                    "Expanded university education access through HELB loans",
                    "Initiated major road infrastructure projects across Kenya",
                    "Championed affordable healthcare through NHIF reforms"
                ],
                "social": {
                    "facebook": "https://facebook.com/WilliamRuto",
                    "twitter": "https://twitter.com/WilliamsRuto",
                    "website": "https://udakenya.org"
                }
            },
            "president-2": {
                "name": "Raila Odinga",
                "position": "President & Deputy President",
                "photo": "https://www.iebc.or.ke/wp-content/uploads/2022/08/raila-odinga.jpg",
                "party": "Orange Democratic Movement",
                "partyLogo": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Odm_logo.svg/1200px-Odm_logo.svg.png",
                "deputy": "Martha Karua",
                "education": "MSc in Mechanical Engineering (Technical University of Berlin), BSc in Mechanical Engineering (University of Leipzig)",
                "experience": "Former Prime Minister (2008-2013), MP for Langata (1992-2013), Minister for Energy (2001-2002), Minister for Roads (2003-2005), Minister for Energy (2005-2007)",
                "manifesto": [
                    "Universal healthcare coverage for all Kenyans",
                    "Social protection program for vulnerable groups",
                    "Economic stimulus program for SMEs and youth enterprises",
                    "Comprehensive land reforms and digitization of records",
                    "Free education from primary to university level"
                ],
                "achievements": [
                    "Architect of Kenya's 2010 Constitution as Prime Minister",
                    "Initiated major infrastructure projects including Thika Superhighway",
                    "Championed for multi-party democracy in Kenya",
                    "Negotiated power-sharing agreement to end 2007/8 post-election violence"
                ],
                "social": {
                    "facebook": "https://facebook.com/RailaOdinga",
                    "twitter": "https://twitter.com/RailaOdinga",
                    "website": "https://odm.co.ke"
                }
            },
            "president-3": {
                "name": "George Wajackoyah",
                "position": "President & Deputy President",
                "photo": "https://www.iebc.or.ke/wp-content/uploads/2022/08/george-wajackoyah.jpg",
                "party": "Roots Party Kenya",
                "partyLogo": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Roots_Party_Kenya_logo.svg/1200px-Roots_Party_Kenya_logo.svg.png",
                "deputy": "Justina Wamae",
                "education": "PhD in Law (University of London), LLM (University of Pretoria), LLB (University of Nairobi)",
                "experience": "Former head of Interpol in Kenya, Security consultant, University lecturer in law, Private legal practice",
                "manifesto": [
                    "Legalize and commercialize marijuana for economic growth",
                    "Introduce 3-day work week to boost productivity",
                    "Focus on alternative medicine and natural therapies",
                    "Reform education system to include life skills training",
                    "Decentralize government services to grassroots level"
                ],
                "achievements": [
                    "Pioneered forensic investigations in Kenya",
                    "Authored several legal publications",
                    "International experience in security and law enforcement",
                    "Advocate for alternative economic models"
                ],
                "social": {
                    "facebook": "https://facebook.com/GeorgeWajackoyah",
                    "twitter": "https://twitter.com/WajackoyahGeorge",
                    "website": "https://rootsparty.co.ke"
                }
            },
            // More candidate data can be added here
        };

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date for vote timestamp
            const now = new Date();
            voteTimestamp.textContent = now.toLocaleString();
            
            // Initialize dark mode from localStorage
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
                darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            // Initialize high contrast mode from localStorage
            if (localStorage.getItem('highContrast') === 'enabled') {
                document.body.classList.add('high-contrast');
            }
            
            // Initialize language from localStorage
            if (localStorage.getItem('language')) {
                currentLanguage = localStorage.getItem('language');
                updateLanguage(currentLanguage);
            }
            
            // Setup county dropdown
            setupCountyDropdown();
            
            // Start session timer (15 minutes)
            startTimer(15);
        });

        // Language toggle functionality
        languageOptions.forEach(option => {
            option.addEventListener('click', function() {
                const lang = this.getAttribute('data-lang');
                currentLanguage = lang;
                localStorage.setItem('language', lang);
                updateLanguage(lang);
            });
        });

        // Update all elements with data-i18n attribute
        function updateLanguage(lang) {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            
            // Update HTML lang attribute
            document.documentElement.lang = lang;
            
            // Update language dropdown display
            document.querySelectorAll('.language-option').forEach(option => {
                if (option.getAttribute('data-lang') === lang) {
                    option.classList.add('font-medium', 'text-green-600', 'dark:text-green-400');
                } else {
                    option.classList.remove('font-medium', 'text-green-600', 'dark:text-green-400');
                }
            });
        }

        // Dark mode toggle
        darkModeToggle.addEventListener('click', function() {
            document.body.classList.toggle('dark-mode');
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
                this.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                localStorage.setItem('darkMode', 'disabled');
                this.innerHTML = '<i class="fas fa-moon"></i>';
            }
        });

        // Photo upload functionality
        photoUpload.addEventListener('click', function() {
            photoInput.click();
        });

        photoInput.addEventListener('change', function(e) {
            if (e.target.files.length) {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    photoPreview.src = event.target.result;
                    photoPreview.style.display = 'block';
                    uploadInstructions.style.display = 'none';
                    photoError.classList.add('hidden');
                    
                    // Simulate face detection
                    setTimeout(() => {
                        const faceDetected = Math.random() > 0.2; // 80% chance of success
                        if (!faceDetected) {
                            photoError.classList.remove('hidden');
                        }
                    }, 1000);
                };
                
                reader.readAsDataURL(file);
            }
        });

        // Drag and drop for photo upload
        photoUpload.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.classList.add('dragover');
        });

        photoUpload.addEventListener('dragleave', function() {
            this.classList.remove('dragover');
        });

        photoUpload.addEventListener('drop', function(e) {
            e.preventDefault();
            this.classList.remove('dragover');
            
            if (e.dataTransfer.files.length) {
                photoInput.files = e.dataTransfer.files;
                const event = new Event('change');
                photoInput.dispatchEvent(event);
            }
        });

        // Authentication form submission
        authForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate form
            const nationalId = document.getElementById('national-id').value;
            const iebcCode = document.getElementById('iebc-code').value;
            const photoUploaded = photoPreview.style.display === 'block';
            
            if (!nationalId || !iebcCode || !photoUploaded) {
                // Show error messages if needed
                if (!photoUploaded) {
                    photoError.classList.remove('hidden');
                }
                return;
            }
            
            // Simulate authentication
            simulateAuthentication();
        });

        function simulateAuthentication() {
            // Show loading state
            const submitBtn = authForm.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Verifying...';
            submitBtn.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Update progress
                progressFill.style.width = '66%';
                
                // Mark step as completed
                verificationSteps[0].classList.remove('active');
                verificationSteps[0].classList.add('completed');
                verificationSteps[1].classList.add('active');
                
                // Hide auth section, show biometric
                authSection.classList.add('hidden');
                biometricSection.classList.remove('hidden');
                
                // Reset submit button
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                
                // Start face detection
                startFaceDetection();
            }, 2000);
        }

        // Face detection functionality
        function startFaceDetection() {
            // Show loading state
            faceIcon.classList.add('hidden');
            biometricAnimation.style.display = 'block';
            biometricAnimation.classList.add('bg-green-500');
            biometricStatus.textContent = translations[currentLanguage]['face_status'] || 'Waiting for face detection...';
            
            // Simulate face detection process
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                biometricProgress.style.width = `${progress}%`;
                
                if (progress >= 30) {
                    biometricAnimation.classList.remove('bg-green-500');
                    biometricAnimation.classList.add('bg-blue-500');
                    biometricStatus.textContent = translations[currentLanguage]['face_detected'] || 'Face detected. Please hold still...';
                }
                
                if (progress >= 70) {
                    biometricAnimation.classList.remove('bg-blue-500');
                    biometricAnimation.classList.add('bg-purple-500');
                    biometricStatus.textContent = translations[currentLanguage]['matching_records'] || 'Matching with registered records...';
                }
                
                if (progress >= 100) {
                    clearInterval(interval);
                    biometricAnimation.style.display = 'none';
                    
                    // 80% chance of successful match
                    const matchSuccess = Math.random() > 0.2;
                    
                    if (matchSuccess) {
                        biometricStatus.textContent = translations[currentLanguage]['verification_success'] || 'Verification successful!';
                        biometricStatus.classList.remove('text-gray-500');
                        biometricStatus.classList.add('text-green-600');
                        
                        // Show success icon
                        const successIcon = document.createElement('i');
                        successIcon.className = 'fas fa-check-circle text-green-500 text-4xl';
                        faceDetectionContainer.appendChild(successIcon);
                        
                        // Proceed to next step after delay
                        setTimeout(() => {
                            proceedToLocationStep();
                        }, 1500);
                    } else {
                        biometricStatus.textContent = translations[currentLanguage]['verification_failed'] || 'Verification failed. Please try again.';
                        biometricStatus.classList.remove('text-gray-500');
                        biometricStatus.classList.add('text-red-600');
                        
                        // Show error icon
                        const errorIcon = document.createElement('i');
                        errorIcon.className = 'fas fa-times-circle text-red-500 text-4xl';
                        faceDetectionContainer.appendChild(errorIcon);
                        
                        // Show retry button
                        const retryBtn = document.createElement('button');
                        retryBtn.className = 'mt-4 px-4 py-2 bg-red-500 text-white rounded-md text-sm';
                        retryBtn.innerHTML = '<i class="fas fa-redo mr-2"></i>' + (translations[currentLanguage]['try_again'] || 'Try Again');
                        retryBtn.addEventListener('click', () => {
                            faceDetectionContainer.innerHTML = `
                                <i class="fas fa-user-circle text-5xl text-gray-400" id="face-icon"></i>
                                <video id="video" width="160" height="160" autoplay muted playsinline style="display: none;"></video>
                                <canvas id="canvas" width="160" height="160" style="display: none;"></canvas>
                                <div id="biometric-animation" class="absolute inset-0 rounded-full border-4 border-transparent animate-ping opacity-75" style="display: none;"></div>
                            `;
                            startFaceDetection();
                        });
                        faceDetectionContainer.appendChild(retryBtn);
                    }
                }
            }, 200);
        }

        // Try fingerprint instead
        tryFingerprint.addEventListener('click', function() {
            faceDetectionContainer.innerHTML = `
                <i class="fas fa-fingerprint text-5xl text-gray-400"></i>
                <p class="text-sm text-gray-500 mt-4">${translations[currentLanguage]['scan_fingerprint'] || 'Scan your fingerprint on your device'}</p>
            `;
            
            // Simulate fingerprint scan
            setTimeout(() => {
                proceedToLocationStep();
            }, 2000);
        });

        // Skip biometric verification
        skipBiometric.addEventListener('click', proceedToLocationStep);

        function proceedToLocationStep() {
            // Update progress
            progressFill.style.width = '100%';
            
            // Mark step as completed
            verificationSteps[1].classList.remove('active');
            verificationSteps[1].classList.add('completed');
            verificationSteps[2].classList.add('active');
            
            // Hide biometric section, show location
            biometricSection.classList.add('hidden');
            locationSection.classList.remove('hidden');
        }

        // Back to auth from biometric
        backToAuth.addEventListener('click', function() {
            // Update progress
            progressFill.style.width = '33%';
            
            // Mark step as not completed
            verificationSteps[0].classList.add('active');
            verificationSteps[0].classList.remove('completed');
            verificationSteps[1].classList.remove('active');
            
            // Hide biometric section, show auth
            biometricSection.classList.add('hidden');
            authSection.classList.remove('hidden');
        });

        // Back to biometric from location
        backToBiometric.addEventListener('click', function() {
            // Update progress
            progressFill.style.width = '66%';
            
            // Mark step as not completed
            verificationSteps[1].classList.add('active');
            verificationSteps[1].classList.remove('completed');
            verificationSteps[2].classList.remove('active');
            
            // Hide location section, show biometric
            locationSection.classList.add('hidden');
            biometricSection.classList.remove('hidden');
        });

        // Setup county dropdown
        function setupCountyDropdown() {
            countySelect.innerHTML = '<option value="">' + (translations[currentLanguage]['select_county'] || 'Select County') + '</option>';
            
            for (const county in electoralData) {
                const option = document.createElement('option');
                option.value = county;
                option.textContent = county.charAt(0).toUpperCase() + county.slice(1).replace('-', ' ');
                countySelect.appendChild(option);
            }
            
            countySelect.addEventListener('change', function() {
                const selectedCounty = this.value;
                constituencySelect.disabled = !selectedCounty;
                wardSelect.disabled = true;
                
                if (selectedCounty) {
                    constituencySelect.innerHTML = '<option value="">' + (translations[currentLanguage]['select_constituency'] || 'Select Constituency') + '</option>';
                    
                    const constituencies = electoralData[selectedCounty].constituencies;
                    for (const constituency in constituencies) {
                        const option = document.createElement('option');
                        option.value = constituency;
                        option.textContent = constituency.charAt(0).toUpperCase() + constituency.slice(1).replace('-', ' ');
                        constituencySelect.appendChild(option);
                    }
                } else {
                    constituencySelect.innerHTML = '<option value="">' + (translations[currentLanguage]['select_county_first'] || 'Select County First') + '</option>';
                    wardSelect.innerHTML = '<option value="">' + (translations[currentLanguage]['select_constituency_first'] || 'Select Constituency First') + '</option>';
                }
            });
            
            constituencySelect.addEventListener('change', function() {
                const selectedCounty = countySelect.value;
                const selectedConstituency = this.value;
                wardSelect.disabled = !selectedConstituency;
                
                if (selectedCounty && selectedConstituency) {
                    wardSelect.innerHTML = '<option value="">' + (translations[currentLanguage]['select_ward'] || 'Select Ward') + '</option>';
                    
                    const wards = electoralData[selectedCounty].constituencies[selectedConstituency];
                    wards.forEach(ward => {
                        const option = document.createElement('option');
                        option.value = ward.toLowerCase().replace(/[^a-z0-9]/g, '-');
                        option.textContent = ward;
                        wardSelect.appendChild(option);
                    });
                } else {
                    wardSelect.innerHTML = '<option value="">' + (translations[currentLanguage]['select_constituency_first'] || 'Select Constituency First') + '</option>';
                }
            });
        }

        // Location form submission
        locationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const county = countySelect.value;
            const constituency = constituencySelect.value;
            const ward = wardSelect.value;
            
            if (!county || !constituency || !ward) {
                return;
            }
            
            // Format location for display
            const formattedCounty = county.charAt(0).toUpperCase() + county.slice(1).replace('-', ' ');
            const formattedConstituency = constituency.charAt(0).toUpperCase() + constituency.slice(1).replace('-', ' ');
            const formattedWard = ward.charAt(0).toUpperCase() + ward.slice(1).replace(/[^a-z0-9]/g, ' ');
            
            voterLocation.textContent = `${formattedCounty} / ${formattedConstituency}`;
            
            // Mark step as completed
            verificationSteps[2].classList.remove('active');
            verificationSteps[2].classList.add('completed');
            verificationSteps[3].classList.add('active');
            
            // Hide location section, show ballot
            locationSection.classList.add('hidden');
            ballotSection.classList.remove('hidden');
            
            // Reset progress bar (for ballot steps)
            progressFill.style.width = '0%';
        });

        // Ballot navigation
        presidentNext.addEventListener('click', function() {
            document.getElementById('president-content').classList.add('hidden');
            document.getElementById('governor-content').classList.remove('hidden');
            updateBallotTab('tab-governor');
        });

        governorBack.addEventListener('click', function() {
            document.getElementById('governor-content').classList.add('hidden');
            document.getElementById('president-content').classList.remove('hidden');
            updateBallotTab('tab-president');
        });

        governorNext.addEventListener('click', function() {
            document.getElementById('governor-content').classList.add('hidden');
            document.getElementById('senator-content').classList.remove('hidden');
            updateBallotTab('tab-senator');
        });

        senatorBack.addEventListener('click', function() {
            document.getElementById('senator-content').classList.add('hidden');
            document.getElementById('governor-content').classList.remove('hidden');
            updateBallotTab('tab-governor');
        });

        senatorNext.addEventListener('click', function() {
            document.getElementById('senator-content').classList.add('hidden');
            document.getElementById('mp-content').classList.remove('hidden');
            updateBallotTab('tab-mp');
        });

        mpBack.addEventListener('click', function() {
            document.getElementById('mp-content').classList.add('hidden');
            document.getElementById('senator-content').classList.remove('hidden');
            updateBallotTab('tab-senator');
        });

        mpNext.addEventListener('click', function() {
            document.getElementById('mp-content').classList.add('hidden');
            document.getElementById('mca-content').classList.remove('hidden');
            updateBallotTab('tab-mca');
        });

        mcaBack.addEventListener('click', function() {
            document.getElementById('mca-content').classList.add('hidden');
            document.getElementById('mp-content').classList.remove('hidden');
            updateBallotTab('tab-mp');
        });

        mcaNext.addEventListener('click', function() {
            document.getElementById('mca-content').classList.add('hidden');
            document.getElementById('referendum-content').classList.remove('hidden');
            updateBallotTab('tab-referendum');
        });

        referendumBack.addEventListener('click', function() {
            document.getElementById('referendum-content').classList.add('hidden');
            document.getElementById('mca-content').classList.remove('hidden');
            updateBallotTab('tab-mca');
        });

        // Ballot tab navigation
        ballotTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.id;
                const contentId = tabId.replace('tab-', '') + '-content';
                
                // Hide all ballot contents
                ballotContents.forEach(content => {
                    content.classList.add('hidden');
                });
                
                // Show selected content
                document.getElementById(contentId).classList.remove('hidden');
                
                // Update active tab
                updateBallotTab(tabId);
            });
        });

        function updateBallotTab(activeTabId) {
            ballotTabs.forEach(tab => {
                if (tab.id === activeTabId) {
                    tab.classList.add('border-green-500', 'text-green-600', 'dark:border-green-400', 'dark:text-green-400');
                    tab.classList.remove('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300', 'dark:text-gray-400', 'dark:hover:text-gray-300');
                } else {
                    tab.classList.remove('border-green-500', 'text-green-600', 'dark:border-green-400', 'dark:text-green-400');
                    tab.classList.add('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300', 'dark:text-gray-400', 'dark:hover:text-gray-300');
                }
            });
        }

        // Submit ballot
        submitBallot.addEventListener('click', function() {
            // Validate selections
            const presidentSelected = document.querySelector('input[name="president"]:checked');
            const governorSelected = document.querySelector('input[name="governor"]:checked');
            const senatorSelected = document.querySelector('input[name="senator"]:checked');
            const mpSelected = document.querySelector('input[name="mp"]:checked');
            const mcaSelected = document.querySelector('input[name="mca"]:checked');
            const referendumSelected = document.querySelector('input[name="referendum"]:checked');
            
            if (!presidentSelected || !governorSelected || !senatorSelected || !mpSelected || !mcaSelected || !referendumSelected) {
                alert(translations[currentLanguage]['complete_all_ballots'] || 'Please complete all ballot sections before submitting.');
                return;
            }
            
            // Show loading state
            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> ' + (translations[currentLanguage]['processing_vote'] || 'Processing your vote...');
            this.disabled = true;
            
            // Simulate vote processing
            setTimeout(() => {
                // Show confirmation modal
                confirmationModal.classList.remove('hidden');
                confirmationModal.classList.add('flex');
                
                // Reset submit button
                this.innerHTML = originalText;
                this.disabled = false;
                
                // Create confetti effect
                createConfetti();
            }, 2000);
        });

        // Close confirmation modal
        closeModal.addEventListener('click', function() {
            confirmationModal.classList.add('hidden');
            confirmationModal.classList.remove('flex');
            
            // Redirect to home or thank you page
            window.location.href = 'thank-you.html';
        });

        // Download receipt
        downloadReceipt.addEventListener('click', function() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add IEBC logo
            const logo = new Image();
            logo.src = 'https://www.iebc.or.ke/wp-content/uploads/2020/04/cropped-iebc-logo.png';
            
            logo.onload = function() {
                doc.addImage(logo, 'PNG', 10, 10, 30, 30);
                
                // Add title
                doc.setFontSize(18);
                doc.setTextColor(0, 102, 0); // Kenya green
                doc.text('IEBC VOTING RECEIPT', 105, 20, { align: 'center' });
                
                // Add voter info
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text('Voter ID: ID-7A83B92C', 10, 50);
                doc.text('Transaction ID: TX-7A83B92C-IEBC-2023', 10, 60);
                doc.text('Date: ' + new Date().toLocaleString(), 10, 70);
                doc.text('Location: ' + voterLocation.textContent, 10, 80);
                
                // Add line
                doc.setDrawColor(0, 102, 0);
                doc.setLineWidth(0.5);
                doc.line(10, 85, 200, 85);
                
                // Add vote summary
                doc.setFontSize(14);
                doc.setTextColor(0, 102, 0);
                doc.text('YOUR VOTE SUMMARY', 105, 95, { align: 'center' });
                
                doc.setFontSize(10);
                doc.setTextColor(0, 0, 0);
                
                const president = document.querySelector('input[name="president"]:checked').nextElementSibling.querySelector('p:first-child').textContent;
                doc.text('President: ' + president, 10, 105);
                
                const governor = document.querySelector('input[name="governor"]:checked').nextElementSibling.querySelector('p:first-child').textContent;
                doc.text('Governor: ' + governor, 10, 115);
                
                const senator = document.querySelector('input[name="senator"]:checked').nextElementSibling.querySelector('p:first-child').textContent;
                doc.text('Senator: ' + senator, 10, 125);
                
                const mp = document.querySelector('input[name="mp"]:checked').nextElementSibling.querySelector('p:first-child').textContent;
                doc.text('MP: ' + mp, 10, 135);
                
                const mca = document.querySelector('input[name="mca"]:checked').nextElementSibling.querySelector('p:first-child').textContent;
                doc.text('MCA: ' + mca, 10, 145);
                
                const referendum = document.querySelector('input[name="referendum"]:checked').nextElementSibling.querySelector('p:first-child').textContent;
                doc.text('Referendum: ' + referendum, 10, 155);
                
                // Add blockchain info
                doc.setFontSize(8);
                doc.setTextColor(100, 100, 100);
                doc.text('This receipt is digitally signed and recorded on the IEBC blockchain network.', 105, 180, { align: 'center' });
                doc.text('Transaction hash: 0x4a8e...3f2d | Block: #1,245,678', 105, 185, { align: 'center' });
                
                // Add watermark
                doc.setFontSize(60);
                doc.setTextColor(200, 200, 200);
                doc.text('VALID', 105, 140, { align: 'center', angle: 45 });
                
                // Save the PDF
                doc.save('IEBC_Voting_Receipt.pdf');
            };
        });

        // Print ballot
        printBallot.addEventListener('click', function() {
            window.print();
        });

        // Candidate details modal
        candidateDetailsBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const candidateId = this.getAttribute('data-candidate');
                const candidate = candidatesData[candidateId];
                
                if (candidate) {
                    // Populate modal with candidate data
                    candidateName.textContent = candidate.name;
                    candidatePosition.textContent = candidate.position;
                    modalCandidatePhoto.src = candidate.photo;
                    modalPartyLogo.src = candidate.partyLogo;
                    modalPartyName.textContent = candidate.party;
                    candidateEducation.textContent = candidate.education;
                    candidateExperience.textContent = candidate.experience;
                    
                    // Clear previous lists
                    candidateManifesto.innerHTML = '';
                    candidateAchievements.innerHTML = '';
                    
                    // Add manifesto items
                    candidate.manifesto.forEach(item => {
                        const li = document.createElement('li');
                        li.textContent = item;
                        candidateManifesto.appendChild(li);
                    });
                    
                    // Add achievements
                    candidate.achievements.forEach(item => {
                        const li = document.createElement('li');
                        li.textContent = item;
                        candidateAchievements.appendChild(li);
                    });
                    
                    // Social links
                    candidateFacebook.href = candidate.social.facebook;
                    candidateTwitter.href = candidate.social.twitter;
                    candidateWebsite.href = candidate.social.website;
                    
                    // Show modal
                    candidateModal.classList.add('active');
                }
            });
        });

        // Close candidate modal
        closeCandidateModal.addEventListener('click', function() {
            candidateModal.classList.remove('active');
        });

        // Blockchain modal
        document.querySelectorAll('.blockchain-badge, [data-action="view-blockchain"]').forEach(el => {
            el.addEventListener('click', function() {
                blockchainModal.classList.add('active');
            });
        });

        // Close blockchain modal
        closeBlockchainModal.addEventListener('click', function() {
            blockchainModal.classList.remove('active');
        });

        // Help button
        helpButton.addEventListener('click', function() {
            helpModal.classList.add('active');
        });

        // Close help modal
        closeHelpModal.addEventListener('click', function() {
            helpModal.classList.remove('active');
        });

        // FAQ toggles
        faqQuestions.forEach(question => {
            question.addEventListener('click', function() {
                const answer = this.nextElementSibling;
                const icon = this.querySelector('i');
                
                answer.classList.toggle('hidden');
                icon.classList.toggle('rotate-180');
            });
        });

        // Accessibility tools
        textIncrease.addEventListener('click', function() {
            document.body.style.fontSize = (parseFloat(getComputedStyle(document.body).fontSize) + 1) + 'px';
        });

        textDecrease.addEventListener('click', function() {
            document.body.style.fontSize = (parseFloat(getComputedStyle(document.body).fontSize) - 1) + 'px';
        });

        highContrast.addEventListener('click', function() {
            document.body.classList.toggle('high-contrast');
            localStorage.setItem('highContrast', document.body.classList.contains('high-contrast') ? 'enabled' : 'disabled');
        });

        screenReader.addEventListener('click', function() {
            alert(translations[currentLanguage]['screen_reader_notice'] || 'Screen reader mode activated. Please use your screen reader to navigate the voting portal.');
        });

        // Session timer
        function startTimer(minutes) {
            let time = minutes * 60;
            const timerInterval = setInterval(() => {
                const mins = Math.floor(time / 60);
                let secs = time % 60;
                
                secs = secs < 10 ? '0' + secs : secs;
                timer.textContent = `${mins}:${secs}`;
                
                if (time <= 0) {
                    clearInterval(timerInterval);
                    alert(translations[currentLanguage]['session_expired'] || 'Your session has expired for security reasons. Please log in again.');
                    window.location.reload();
                }
                
                time--;
                
                // Change color when less than 5 minutes remaining
                if (mins < 5) {
                    timer.classList.add('text-red-600');
                    timeRemaining.classList.remove('bg-yellow-50');
                    timeRemaining.classList.add('bg-red-50');
                    timeRemaining.querySelector('i').classList.remove('text-yellow-500');
                    timeRemaining.querySelector('i').classList.add('text-red-500');
                }
            }, 1000);
        }

        // Create confetti effect
        function createConfetti() {
            const colors = ['#1a5c1a', '#BB0000', '#006600', '#FFFFFF', '#FFD700'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                document.body.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Initialize face-api.js (commented out as it requires actual models)
        /*
        async function loadFaceApiModels() {
            await faceapi.nets.tinyFaceDetector.loadFromUri('/models');
            await faceapi.nets.faceLandmark68Net.loadFromUri('/models');
            await faceapi.nets.faceRecognitionNet.loadFromUri('/models');
        }
        
        loadFaceApiModels();
        
        function startVideo() {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    video.srcObject = stream;
                    video.play();
                    detectFace();
                })
                .catch(err => {
                    console.error("Error accessing camera:", err);
                });
        }
        
        function detectFace() {
            setInterval(async () => {
                const detections = await faceapi.detectAllFaces(video, new faceapi.TinyFaceDetectorOptions())
                    .withFaceLandmarks()
                    .withFaceDescriptors();
                
                if (detections.length > 0) {
                    // Face detected
                    const alignedRect = detections[0].alignedRect;
                    faceDetectionFrame.style.display = 'block';
                    faceDetectionFrame.style.width = `${alignedRect.width}px`;
                    faceDetectionFrame.style.height = `${alignedRect.height}px`;
                    faceDetectionFrame.style.left = `${alignedRect.left}px`;
                    faceDetectionFrame.style.top = `${alignedRect.top}px`;
                } else {
                    faceDetectionFrame.style.display = 'none';
                }
            }, 100);
        }
        */
    </script>
</body>
</html>