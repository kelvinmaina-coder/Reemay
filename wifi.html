<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=yes" />
  <title>VINNYCONNECT | Premium WiFi â€¢ Centered Design</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
<style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #00ff88;
      --secondary: #00ccff;
      --accent: #9933ff;
      --dark: #0a0f1e;
      --darker: #050814;
      --success: #00ff88;
      --warning: #ffaa00;
      --danger: #ff4444;
      --info: #3b82f6;
      --whatsapp: #25D366;
      --glass-bg: rgba(10, 15, 30, 0.85);
      --glass-border: rgba(255, 255, 255, 0.08);
    }

    /* Base Styles */
    html {
      font-size: 14px; /* Reduced from 16px */
      -webkit-tap-highlight-color: transparent;
    }

    body {
      position: relative;
      min-height: 100vh;
      background: radial-gradient(circle at 10% 20%, #1a1f35, #0a0f1e);
      color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      overflow-x: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px; /* Reduced from 20px */
    }

    /* Particle System - Optimized */
    #particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      background: rgba(0, 255, 136, 0.1); /* Reduced opacity */
      border-radius: 50%;
      pointer-events: none;
      animation: float 20s infinite linear;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) translateX(0) rotate(0deg);
        opacity: 0;
      }
      10% { opacity: 0.6; } /* Reduced */
      90% { opacity: 0.6; } /* Reduced */
      100% {
        transform: translateY(-100vh) translateX(100px) rotate(360deg);
        opacity: 0;
      }
    }

    /* Glass Card Effect - Optimized */
    .glass-card {
      background: var(--glass-bg);
      backdrop-filter: blur(12px) saturate(180%); /* Reduced blur */
      -webkit-backdrop-filter: blur(12px) saturate(180%);
      border: 1px solid var(--glass-border);
      border-radius: 20px; /* Reduced from 24px */
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4); /* Reduced shadow */
      transition: all 0.3s ease;
    }

    .glass-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 20px 40px rgba(0, 255, 136, 0.15);
      border-color: rgba(0, 255, 136, 0.3);
    }

    /* Gradient Text - Smaller */
    .gradient-text {
      background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-weight: 700; /* Reduced from 800 */
      font-size: 1.8rem; /* Smaller */
    }

    /* Animated Button - Compact */
    .btn-primary {
      position: relative;
      background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
      background-size: 200% 200%;
      border: none;
      border-radius: 14px; /* Reduced */
      padding: 12px 20px; /* Reduced padding */
      font-weight: 600; /* Reduced */
      font-size: 0.95rem; /* Smaller */
      color: var(--darker);
      cursor: pointer;
      transition: all 0.3s ease;
      animation: gradientShift 3s ease infinite;
      box-shadow: 0 6px 15px rgba(0, 255, 136, 0.25); /* Reduced shadow */
      width: 100%;
    }

    .btn-primary:active {
      transform: scale(0.98);
    }

    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* WhatsApp Button - Smaller */
    .whatsapp-support {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background: var(--whatsapp);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      box-shadow: 0 8px 20px rgba(37, 211, 102, 0.3);
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 100;
      animation: whatsappPulse 2s infinite;
    }

    .whatsapp-support:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 30px rgba(37, 211, 102, 0.5);
    }

    @keyframes whatsappPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.08); } /* Reduced pulse */
    }

    /* Main Container - Optimized */
    .main-container {
      max-width: 1000px; /* Reduced from 1100px */
      width: 100%;
      margin: 0 auto;
      padding: 0 16px; /* Reduced padding */
    }

    /* Plan Cards - More Compact */
    .plans-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px; /* Reduced from 16px */
    }

    .plan-card {
      position: relative;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 16px; /* Reduced */
      padding: 14px; /* Reduced from 18px */
      cursor: pointer;
      transition: all 0.3s ease;
      overflow: hidden;
    }

    .plan-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(0, 204, 255, 0.1));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .plan-card:hover {
      transform: translateY(-3px); /* Reduced */
      border-color: var(--primary);
      box-shadow: 0 15px 25px -8px rgba(0, 255, 136, 0.25); /* Reduced */
    }

    .plan-card.selected {
      border: 2px solid var(--primary);
      background: rgba(0, 255, 136, 0.05);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.25); /* Reduced */
    }

    .plan-card.selected::after {
      content: 'âœ“';
      position: absolute;
      top: 8px;
      right: 8px;
      width: 20px; /* Smaller */
      height: 20px; /* Smaller */
      background: var(--primary);
      color: var(--darker);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 12px; /* Smaller */
      box-shadow: 0 0 15px var(--primary);
    }

    /* Badge - Smaller */
    .badge {
      display: inline-block;
      padding: 2px 6px; /* Reduced */
      border-radius: 20px;
      font-size: 0.65rem; /* Smaller */
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }

    .badge-popular {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--darker);
    }

    .badge-value {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: #fff;
    }

    /* Support Section - Compact */
    .support-section {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px; /* Reduced */
      margin-top: 12px; /* Reduced */
    }

    .support-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 14px; /* Reduced */
      padding: 8px; /* Reduced */
      display: flex;
      align-items: center;
      gap: 8px; /* Reduced */
      transition: all 0.3s ease;
    }

    .support-card:hover {
      border-color: var(--primary);
      transform: translateY(-2px);
    }

    .support-icon {
      width: 32px; /* Smaller */
      height: 32px; /* Smaller */
      border-radius: 10px; /* Reduced */
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px; /* Smaller */
    }

    .support-details {
      flex: 1;
    }

    .support-label {
      font-size: 10px; /* Smaller */
      color: rgba(255, 255, 255, 0.5);
    }

    .support-value {
      font-weight: 600;
      font-size: 12px; /* Smaller */
    }

    .support-value.whatsapp {
      color: #25D366;
    }

    /* POPUP STYLES - More Compact */
    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 1999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .popup-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .payment-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      width: 92%;
      max-width: 360px; /* Smaller */
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 2px solid rgba(0, 255, 136, 0.3);
      border-radius: 24px; /* Reduced */
      padding: 20px; /* Reduced */
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.5);
    }

    .payment-popup.active {
      opacity: 1;
      visibility: visible;
      transform: translate(-50%, -50%) scale(1);
    }

    /* Input Fields - Smaller */
    .input-field {
      width: 100%;
      padding: 12px 14px; /* Reduced */
      background: rgba(0, 0, 0, 0.3);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px; /* Reduced */
      color: #fff;
      font-size: 13px; /* Smaller */
      transition: all 0.3s ease;
    }

    .input-field:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0, 255, 136, 0.15); /* Reduced */
      background: rgba(0, 0, 0, 0.5);
    }

    .input-group {
      position: relative;
      margin-bottom: 14px; /* Reduced */
    }

    .input-prefix {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.6);
      font-weight: 500;
      font-size: 13px;
    }

    .input-field.with-prefix {
      padding-left: 55px; /* Reduced */
    }

    /* Network Options - Smaller */
    .network-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px; /* Reduced */
      margin-bottom: 14px; /* Reduced */
    }

    .network-option {
      padding: 8px; /* Reduced */
      background: rgba(255, 255, 255, 0.03);
      border: 2px solid rgba(255, 255, 255, 0.05);
      border-radius: 12px; /* Reduced */
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .network-option i {
      font-size: 18px; /* Smaller */
      margin-bottom: 2px;
      display: block;
    }

    .network-option span {
      font-weight: 600;
      font-size: 12px; /* Smaller */
    }

    /* PIN Input - Smaller */
    .pin-container {
      display: flex;
      gap: 8px; /* Reduced */
      justify-content: center;
      margin: 14px 0; /* Reduced */
    }

    .pin-box {
      width: 40px; /* Smaller */
      height: 40px; /* Smaller */
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px; /* Reduced */
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px; /* Smaller */
      font-weight: 800;
      color: var(--primary);
      transition: all 0.2s ease;
    }

    .pin-box.filled {
      border-color: var(--primary);
      box-shadow: 0 0 12px var(--primary);
      transform: scale(1.05);
    }

    .pin-input-hidden {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    /* STK Simulation - Compact */
    .stk-simulation {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(0, 255, 136, 0.2);
      border-radius: 12px;
      padding: 10px;
      margin: 14px 0;
      display: none;
    }

    .stk-simulation.active {
      display: block;
    }

    .stk-progress {
      height: 3px; /* Thinner */
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
      margin: 8px 0;
      overflow: hidden;
    }

    .stk-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      width: 0%;
      animation: stkProgress 3s linear infinite;
    }

    @keyframes stkProgress {
      0% { width: 0%; }
      50% { width: 70%; }
      100% { width: 100%; }
    }

    /* Smart Badge - Smaller */
    .smart-badge {
      position: absolute;
      top: 6px;
      left: 6px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(5px);
      padding: 2px 5px;
      border-radius: 16px;
      font-size: 8px; /* Smaller */
      display: flex;
      align-items: center;
      gap: 2px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Connection Status - Compact */
    .connection-bar {
      background: rgba(0, 255, 136, 0.1);
      border: 1px solid rgba(0, 255, 136, 0.2);
      border-radius: 30px;
      padding: 5px 10px; /* Reduced */
      display: flex;
      align-items: center;
      gap: 6px; /* Reduced */
      font-size: 0.8rem; /* Smaller */
    }

    .status-dot {
      width: 6px; /* Smaller */
      height: 6px; /* Smaller */
      border-radius: 50%;
      background: var(--success);
      box-shadow: 0 0 10px var(--success);
    }

    /* Speed Meter - Thinner */
    .speed-meter {
      height: 3px; /* Thinner */
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
      overflow: hidden;
      margin: 6px 0;
    }

    .speed-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 2px;
      transition: width 0.3s ease;
    }

    .wifi-bars {
      display: flex;
      align-items: flex-end;
      height: 12px; /* Smaller */
      gap: 2px;
    }

    .wifi-bar {
      width: 3px;
      background: var(--primary);
      border-radius: 2px;
    }

    .wifi-bar:nth-child(1) { height: 4px; }
    .wifi-bar:nth-child(2) { height: 6px; }
    .wifi-bar:nth-child(3) { height: 8px; }
    .wifi-bar:nth-child(4) { height: 10px; }

    /* Usage Stats - Compact */
    .usage-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 5px; /* Reduced */
      margin-top: 8px; /* Reduced */
    }

    .stat-item {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 8px; /* Reduced */
      padding: 5px; /* Reduced */
      text-align: center;
    }

    .stat-value {
      font-size: 14px; /* Smaller */
      font-weight: bold;
      color: var(--primary);
    }

    .stat-label {
      font-size: 8px; /* Smaller */
      color: rgba(255, 255, 255, 0.5);
    }

    /* Data Saver Toggle - Compact */
    .data-saver-toggle {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px; /* Reduced */
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px; /* Reduced */
      margin: 10px 0; /* Reduced */
      font-size: 12px; /* Smaller */
    }

    .toggle-switch {
      width: 40px; /* Smaller */
      height: 20px; /* Smaller */
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .toggle-switch.active {
      background: var(--primary);
    }

    .toggle-switch::after {
      content: '';
      width: 16px; /* Smaller */
      height: 16px; /* Smaller */
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 2px;
      left: 2px;
      transition: all 0.3s ease;
    }

    .toggle-switch.active::after {
      left: 22px;
    }

    /* Modal - Compact */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(12px);
      z-index: 3000;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      max-width: 360px; /* Smaller */
      width: 100%;
      background: var(--glass-bg);
      backdrop-filter: blur(24px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 24px; /* Reduced */
      padding: 20px; /* Reduced */
      animation: modalSlideUp 0.4s ease;
    }

    @keyframes modalSlideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Spinner - Smaller */
    .spinner {
      width: 40px; /* Smaller */
      height: 40px; /* Smaller */
      border: 3px solid rgba(0, 255, 136, 0.2);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Notification - Smaller */
    .notification {
      position: fixed;
      top: 15px;
      right: 15px;
      left: 15px;
      max-width: 320px; /* Smaller */
      margin: 0 auto;
      padding: 12px 16px; /* Reduced */
      background: var(--glass-bg);
      backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 12px; /* Reduced */
      color: #fff;
      font-weight: 500;
      font-size: 13px; /* Smaller */
      z-index: 4000;
      display: none;
      align-items: center;
      gap: 8px;
      animation: slideDown 0.3s ease;
    }

    /* Celebration - Optimized */
    .confetti {
      position: fixed;
      pointer-events: none;
      z-index: 5000;
      animation: confettiFall 2.5s ease-out forwards; /* Faster */
    }

    @keyframes confettiFall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }

    /* Responsive - Optimized for all devices */
    @media (max-width: 768px) {
      html {
        font-size: 13px; /* Smaller on tablets */
      }
      
      .main-container {
        padding: 0 12px;
      }
      
      .plans-grid {
        gap: 10px;
      }
      
      .support-section {
        grid-template-columns: repeat(2, 1fr); /* 2 columns on tablet */
      }
      
      .whatsapp-support {
        width: 45px;
        height: 45px;
        font-size: 22px;
        bottom: 15px;
        right: 15px;
      }
    }

    @media (max-width: 640px) {
      html {
        font-size: 12px; /* Even smaller on phones */
      }
      
      .main-container {
        padding: 0 10px;
      }
      
      .plans-grid {
        grid-template-columns: 1fr; /* Single column on mobile */
        gap: 8px;
      }
      
      .support-section {
        grid-template-columns: 1fr; /* Single column on mobile */
      }
      
      body {
        padding: 8px;
      }
      
      .gradient-text {
        font-size: 1.5rem; /* Smaller on mobile */
      }
      
      .payment-popup {
        max-width: 320px;
        padding: 16px;
      }
    }

    /* Small phones */
    @media (max-width: 380px) {
      .payment-popup {
        max-width: 290px;
        padding: 14px;
      }
      
      .pin-box {
        width: 35px;
        height: 35px;
        font-size: 18px;
      }
    }

    /* Large screens - maintain proportions */
    @media (min-width: 1400px) {
      html {
        font-size: 15px; /* Slightly larger on big screens */
      }
      
      .main-container {
        max-width: 1100px;
      }
    }

    /* Touch optimizations */
    @media (hover: none) {
      .glass-card:hover,
      .plan-card:hover,
      .btn-primary:hover {
        transform: none;
      }
    }

    /* Landscape mode */
    @media (max-height: 600px) and (orientation: landscape) {
      body {
        padding: 5px;
      }
      
      .main-container {
        max-width: 90%;
      }
      
      .plans-grid {
        grid-template-columns: repeat(3, 1fr); /* 3 columns in landscape */
      }
      
      .payment-popup {
        max-width: 340px;
        max-height: 90vh;
        overflow-y: auto;
      }
    }
  </style>

</head>
<body>
  <!-- Particles Background -->
  <div id="particles"></div>

  <!-- WhatsApp Floating Button - Direct to 0787730624 -->
  <a href="https://wa.me/254787730624?text=Hello%20VinnyConnect%2C%20I%20need%20help%20with%20WiFi" 
     class="whatsapp-support" 
     target="_blank"
     title="Chat on WhatsApp">
    <i class="fab fa-whatsapp"></i>
  </a>

  <!-- Notification -->
  <div id="notification" class="notification">
    <i class="fas fa-info-circle"></i>
    <span id="notificationMessage"></span>
  </div>

  <!-- Popup Overlay -->
  <div id="popupOverlay" class="popup-overlay"></div>

  <!-- Payment Popup -->
  <div id="paymentPopup" class="payment-popup">
    <div class="popup-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
      <h2 class="popup-title" style="font-size: 20px; font-weight: 800; background: linear-gradient(135deg, #00ff88, #00ccff); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Complete Payment</h2>
      <button id="closePopup" style="width: 32px; height: 32px; border-radius: 50%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; cursor: pointer;">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- Plan Summary -->
    <div id="popupPlanSummary" style="background: rgba(0,255,136,0.05); border: 1px solid rgba(0,255,136,0.2); border-radius: 14px; padding: 12px; margin-bottom: 16px; display: flex; justify-content: space-between;">
      <div>
        <span style="font-size: 11px; color: #9ca3af;">Selected Plan</span>
        <p style="font-weight: bold; color: #00ff88; margin: 0; font-size: 14px;" id="popupPlanDetails">-</p>
      </div>
      <div style="text-align: right;">
        <span style="font-size: 11px; color: #9ca3af;">Amount</span>
        <p style="font-weight: bold; color: #00ff88; margin: 0; font-size: 14px;" id="popupPlanAmount">-</p>
      </div>
    </div>

    <!-- Network Selection -->
    <div class="network-options">
      <div class="network-option mpesa active" id="popupMpesa">
        <i class="fas fa-mobile-alt"></i>
        <span>M-Pesa</span>
      </div>
      <div class="network-option airtel" id="popupAirtel">
        <i class="fas fa-mobile-alt"></i>
        <span>Airtel Money</span>
      </div>
    </div>

    <!-- Phone Number Input -->
    <div class="input-group">
      <span class="input-prefix">+254</span>
      <input type="tel" id="popupPhoneInput" class="input-field with-prefix" placeholder="712345678" maxlength="9" inputmode="numeric">
    </div>

    <!-- STK Push Simulation -->
    <div id="stkSimulation" class="stk-simulation">
      <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
        <i class="fas fa-mobile-alt text-green-400"></i>
        <span style="font-size: 13px;">STK Push sent to your phone</span>
      </div>
      <div class="stk-progress">
        <div class="stk-progress-bar"></div>
      </div>
      <p style="font-size: 11px; color: #9ca3af; margin-top: 6px;">Check your phone for payment request</p>
    </div>

    <!-- PIN Section -->
    <div id="popupPinSection" style="display: none;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <span style="font-size: 13px; color: #9ca3af;">Enter 4-digit PIN</span>
        <span style="font-size: 11px; color: #6b7280;">Paybill: 0768359087</span>
      </div>
      
      <input type="text" id="popupPinInput" class="pin-input-hidden" maxlength="4" inputmode="numeric">

      <div class="pin-container">
        <div class="pin-box"></div>
        <div class="pin-box"></div>
        <div class="pin-box"></div>
        <div class="pin-box"></div>
      </div>
    </div>

    <!-- Buttons -->
    <button id="popupContinueBtn" class="btn-primary" style="padding: 12px; font-size: 14px;" disabled>
      Send STK Push
    </button>
    <button id="popupPayBtn" class="btn-primary" style="padding: 12px; font-size: 14px; display: none;">
      Confirm Payment
    </button>
  </div>

  <!-- Main Container - Centered -->
  <div class="main-container">
    <!-- Header -->
    <div class="glass-card" style="padding: 20px; margin-bottom: 16px;">
      <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
        <div style="display: flex; align-items: center; gap: 12px;">
          <div style="width: 48px; height: 48px; border-radius: 16px; background: linear-gradient(135deg, #00ff88, #00ccff); display: flex; align-items: center; justify-content: center; font-size: 24px;">
            <i class="fas fa-wifi"></i>
          </div>
          <div>
            <h1 style="font-size: 24px; font-weight: 800; background: linear-gradient(135deg, #00ff88, #00ccff, #9933ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0;">VinnyConnect</h1>
            <p style="font-size: 11px; color: #9ca3af; margin: 0;">Premium WiFi â€¢ Paybill: 0768359087</p>
          </div>
        </div>
        <button id="adminToggle" style="width: 40px; height: 40px; border-radius: 50%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #9ca3af; cursor: pointer;">
          <i class="fas fa-cog"></i>
        </button>
      </div>

      <!-- Connection Status -->
      <div style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 16px; padding: 12px;">
        <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 8px; margin-bottom: 6px;">
          <div style="display: flex; align-items: center; gap: 8px;">
            <div class="status-dot" id="connectionDot"></div>
            <span style="font-weight: 500; font-size: 13px;">VinnyConnect_5G</span>
            <span style="font-size: 11px; color: #9ca3af;" id="connectionTime">00:00:00</span>
          </div>
          <div style="display: flex; align-items: center; gap: 10px;">
            <span style="font-size: 11px; color: #9ca3af;">Speed</span>
            <span style="font-weight: bold; color: #00ff88; font-size: 13px;" id="speedDisplay">85 Mbps</span>
            <div class="wifi-bars">
              <div class="wifi-bar"></div>
              <div class="wifi-bar"></div>
              <div class="wifi-bar"></div>
              <div class="wifi-bar"></div>
            </div>
          </div>
        </div>
        <div class="speed-meter">
          <div class="speed-fill" id="speedMeter" style="width: 85%"></div>
        </div>

        <!-- Usage Stats -->
        <div class="usage-stats">
          <div class="stat-item">
            <div class="stat-value" id="dataUsed">0</div>
            <div class="stat-label">Data Used</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="timeLeft">2h</div>
            <div class="stat-label">Time Left</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="devicesCount">1</div>
            <div class="stat-label">Devices</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Smart Recommendations -->
    <div class="glass-card" style="padding: 14px; margin-bottom: 16px;">
      <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
        <i class="fas fa-robot" style="color: #9933ff; font-size: 14px;"></i>
        <span style="font-weight: 500; font-size: 13px;">Smart Recommendations</span>
      </div>
      <div style="display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px;">
        <div style="background: rgba(153,51,255,0.2); border: 1px solid rgba(153,51,255,0.3); border-radius: 20px; padding: 6px 12px; font-size: 11px; white-space: nowrap;">
          <i class="fas fa-clock" style="color: #9933ff; margin-right: 4px;"></i>
          Most popular: 24 Hours
        </div>
        <div style="background: rgba(0,204,255,0.2); border: 1px solid rgba(0,204,255,0.3); border-radius: 20px; padding: 6px 12px; font-size: 11px; white-space: nowrap;">
          <i class="fas fa-users" style="color: #00ccff; margin-right: 4px;"></i>
          Family: 1 Week (2 devices)
        </div>
        <div style="background: rgba(0,255,136,0.2); border: 1px solid rgba(0,255,136,0.3); border-radius: 20px; padding: 6px 12px; font-size: 11px; white-space: nowrap;">
          <i class="fas fa-star" style="color: #00ff88; margin-right: 4px;"></i>
          Best value: 1 Month (600 KES)
        </div>
      </div>
    </div>

    <!-- Voucher Input -->
    <div class="glass-card" style="padding: 16px; margin-bottom: 16px;">
      <div style="display: flex; gap: 8px;">
        <input type="text" id="voucherInput" placeholder="Enter voucher code" class="input-field" style="flex: 1; padding: 12px;">
        <button id="applyVoucher" style="padding: 0 16px; background: linear-gradient(135deg, #9933ff, #ff44aa); border: none; border-radius: 14px; color: white; font-weight: bold; font-size: 13px; cursor: pointer;">
          Apply
        </button>
      </div>
    </div>

    <!-- Plan Selection -->
    <div class="glass-card" style="padding: 20px; margin-bottom: 16px;">
      <h2 style="font-size: 18px; font-weight: bold; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
        <i class="fas fa-bolt" style="color: #00ff88;"></i>
        Select WiFi Plan
      </h2>

      <!-- Category Filters -->
      <div style="display: flex; gap: 4px; margin-bottom: 16px; background: rgba(0,0,0,0.2); padding: 4px; border-radius: 30px;">
        <button class="category-btn active" style="flex: 1; padding: 8px; border-radius: 26px; font-size: 12px; font-weight: 500; border: none; background: #00ff88; color: black; cursor: pointer;" data-category="all">All</button>
        <button class="category-btn" style="flex: 1; padding: 8px; border-radius: 26px; font-size: 12px; font-weight: 500; border: none; background: transparent; color: white; cursor: pointer;" data-category="hourly">Hourly</button>
        <button class="category-btn" style="flex: 1; padding: 8px; border-radius: 26px; font-size: 12px; font-weight: 500; border: none; background: transparent; color: white; cursor: pointer;" data-category="weekly">Weekly</button>
        <button class="category-btn" style="flex: 1; padding: 8px; border-radius: 26px; font-size: 12px; font-weight: 500; border: none; background: transparent; color: white; cursor: pointer;" data-category="monthly">Monthly</button>
      </div>

      <!-- Plans Grid - 2 Columns -->
      <div class="plans-grid" id="plansGrid">
        <!-- 2 Hours - 19 KES - 2 devices -->
        <div class="plan-card" data-plan="19" data-duration="2 Hours" data-devices="2" data-category="hourly">
          <div class="smart-badge">
            <i class="fas fa-bolt" style="color: #ffaa00;"></i>
            <span>Quick</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px;">
            <span style="font-size: 22px; font-weight: bold; color: #00ff88;">19 KES</span>
            <span class="badge badge-popular">ðŸ”¥ HOT</span>
          </div>
          <p style="font-size: 16px; font-weight: 600; margin: 2px 0;">2 Hours</p>
          <p style="font-size: 11px; color: #9ca3af; margin-bottom: 6px;">50 Mbps â€¢ 2 Devices</p>
          <div style="display: flex; align-items: center; gap: 4px; font-size: 11px; color: #9ca3af;">
            <i class="fas fa-clock" style="color: #00ff88;"></i>
            <span>Quick access</span>
          </div>
        </div>

        <!-- 12 Hours - 29 KES - 1 device -->
        <div class="plan-card" data-plan="29" data-duration="12 Hours" data-devices="1" data-category="hourly">
          <div class="smart-badge">
            <i class="fas fa-briefcase" style="color: #00ccff;"></i>
            <span>Work</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px;">
            <span style="font-size: 22px; font-weight: bold; color: #00ff88;">29 KES</span>
            <span class="badge badge-value">âš¡ HALF DAY</span>
          </div>
          <p style="font-size: 16px; font-weight: 600; margin: 2px 0;">12 Hours</p>
          <p style="font-size: 11px; color: #9ca3af; margin-bottom: 6px;">50 Mbps â€¢ 1 Device</p>
          <div style="display: flex; align-items: center; gap: 4px; font-size: 11px; color: #9ca3af;">
            <i class="fas fa-briefcase" style="color: #00ff88;"></i>
            <span>Perfect for work</span>
          </div>
        </div>

        <!-- 24 Hours - 39 KES - 1 device -->
        <div class="plan-card" data-plan="39" data-duration="24 Hours" data-devices="1" data-category="hourly">
          <div class="smart-badge">
            <i class="fas fa-sun" style="color: #ffaa00;"></i>
            <span>Popular</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px;">
            <span style="font-size: 22px; font-weight: bold; color: #00ff88;">39 KES</span>
            <span class="badge badge-value">ðŸŒŸ FULL DAY</span>
          </div>
          <p style="font-size: 16px; font-weight: 600; margin: 2px 0;">24 Hours</p>
          <p style="font-size: 11px; color: #9ca3af; margin-bottom: 6px;">50 Mbps â€¢ 1 Device</p>
          <div style="display: flex; align-items: center; gap: 4px; font-size: 11px; color: #9ca3af;">
            <i class="fas fa-sun" style="color: #00ff88;"></i>
            <span>Full day access</span>
          </div>
        </div>

        <!-- 1 Week - 200 KES - 1 device -->
        <div class="plan-card" data-plan="200" data-duration="1 Week" data-devices="1" data-category="weekly">
          <div class="smart-badge">
            <i class="fas fa-calendar" style="color: #3b82f6;"></i>
            <span>Weekly</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px;">
            <span style="font-size: 22px; font-weight: bold; color: #3b82f6;">200 KES</span>
            <span class="badge badge-value">ðŸ“… WEEKLY</span>
          </div>
          <p style="font-size: 16px; font-weight: 600; margin: 2px 0;">1 Week</p>
          <p style="font-size: 11px; color: #9ca3af; margin-bottom: 6px;">50 Mbps â€¢ 1 Device</p>
          <div style="display: flex; align-items: center; gap: 4px; font-size: 11px; color: #9ca3af;">
            <i class="fas fa-calendar" style="color: #3b82f6;"></i>
            <span>7 days access</span>
          </div>
        </div>

        <!-- 1 Week - 500 KES - 2 devices -->
        <div class="plan-card" data-plan="500" data-duration="1 Week" data-devices="2" data-category="weekly">
          <div class="smart-badge">
            <i class="fas fa-users" style="color: #9933ff;"></i>
            <span>Family</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px;">
            <span style="font-size: 22px; font-weight: bold; color: #9933ff;">500 KES</span>
            <span class="badge badge-popular">ðŸ‘¥ FAMILY</span>
          </div>
          <p style="font-size: 16px; font-weight: 600; margin: 2px 0;">1 Week</p>
          <p style="font-size: 11px; color: #9ca3af; margin-bottom: 6px;">50 Mbps â€¢ 2 Devices</p>
          <div style="display: flex; align-items: center; gap: 4px; font-size: 11px; color: #9ca3af;">
            <i class="fas fa-users" style="color: #9933ff;"></i>
            <span>Share with family</span>
          </div>
        </div>

        <!-- 1 Month - 600 KES - 1 device -->
        <div class="plan-card" data-plan="600" data-duration="1 Month" data-devices="1" data-category="monthly">
          <div class="smart-badge">
            <i class="fas fa-star" style="color: #ffaa00;"></i>
            <span>Best Value</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px;">
            <span style="font-size: 22px; font-weight: bold; color: #ffaa00;">600 KES</span>
            <span class="badge badge-value">ðŸ“† MONTHLY</span>
          </div>
          <p style="font-size: 16px; font-weight: 600; margin: 2px 0;">1 Month</p>
          <p style="font-size: 11px; color: #9ca3af; margin-bottom: 6px;">50 Mbps â€¢ 1 Device</p>
          <div style="display: flex; align-items: center; gap: 4px; font-size: 11px; color: #9ca3af;">
            <i class="fas fa-star" style="color: #ffaa00;"></i>
            <span>Best value</span>
          </div>
        </div>

        <!-- 1 Month - 800 KES - 2 devices - Full width -->
        <div class="plan-card" style="grid-column: span 2;" data-plan="800" data-duration="1 Month" data-devices="2" data-category="monthly">
          <div class="smart-badge">
            <i class="fas fa-crown" style="color: #ff44aa;"></i>
            <span>Premium</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px;">
            <span style="font-size: 22px; font-weight: bold; color: #ff44aa;">800 KES</span>
            <span class="badge badge-popular">ðŸ‘‘ PREMIUM</span>
          </div>
          <p style="font-size: 16px; font-weight: 600; margin: 2px 0;">1 Month</p>
          <p style="font-size: 11px; color: #9ca3af; margin-bottom: 6px;">100 Mbps â€¢ 2 Devices â€¢ Priority Support</p>
          <div style="display: flex; align-items: center; gap: 12px; font-size: 11px; color: #9ca3af;">
            <span><i class="fas fa-crown" style="color: #ff44aa;"></i> Ultimate plan</span>
            <span><i class="fas fa-headset" style="color: #ff44aa;"></i> 24/7 Priority</span>
          </div>
        </div>
      </div>

      <!-- Data Saver Mode -->
      <div class="data-saver-toggle">
        <div style="display: flex; align-items: center; gap: 6px;">
          <i class="fas fa-leaf" style="color: #00ff88;"></i>
          <span style="font-size: 13px;">Data Saver Mode</span>
        </div>
        <div id="dataSaverToggle" class="toggle-switch"></div>
      </div>

      <!-- Selected Plan Indicator -->
      <div id="selectedPlan" style="display: none; margin-top: 16px; padding: 12px; background: rgba(0,255,136,0.1); border: 1px solid rgba(0,255,136,0.3); border-radius: 16px;">
        <div style="display: flex; align-items: center; gap: 8px;">
          <i class="fas fa-check-circle" style="color: #00ff88; font-size: 18px;"></i>
          <div>
            <div style="font-weight: 500; font-size: 13px;">Selected Plan</div>
            <div style="font-size: 12px; color: #9ca3af;">
              <span id="selectedDuration"></span> Â· <span id="selectedAmount"></span> KES
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Support Section - Always Visible -->
    <div class="glass-card" style="padding: 16px; margin-bottom: 16px;">
      <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 12px; display: flex; align-items: center; gap: 6px;">
        <i class="fas fa-headset" style="color: #00ff88;"></i>
        Customer Support
      </h3>
      
      <div class="support-section">
        <!-- WhatsApp Support - Direct to 0787730624 -->
        <a href="https://wa.me/254787730624?text=Hello%20VinnyConnect%2C%20I%20need%20help%20with%20my%20WiFi%20connection" 
           target="_blank" 
           style="text-decoration: none; color: inherit;">
          <div class="support-card">
            <div class="support-icon whatsapp">
              <i class="fab fa-whatsapp"></i>
            </div>
            <div class="support-details">
              <div class="support-label">WhatsApp Support</div>
              <div class="support-value whatsapp">0787 730 624</div>
            </div>
          </div>
        </a>

        <!-- Phone Support -->
        <a href="tel:+254787730624" style="text-decoration: none; color: inherit;">
          <div class="support-card">
            <div class="support-icon phone">
              <i class="fas fa-phone-alt"></i>
            </div>
            <div class="support-details">
              <div class="support-label">Call Support</div>
              <div class="support-value">0787 730 624</div>
            </div>
          </div>
        </a>

        <!-- Email Support -->
        <a href="mailto:support@vinnyconnect.co.ke" style="text-decoration: none; color: inherit;">
          <div class="support-card">
            <div class="support-icon email">
              <i class="fas fa-envelope"></i>
            </div>
            <div class="support-details">
              <div class="support-label">Email Support</div>
              <div class="support-value">support@vinnyconnect.co.ke</div>
            </div>
          </div>
        </a>
      </div>

      <!-- Live Chat Note -->
      <div style="margin-top: 12px; padding: 8px; background: rgba(37,211,102,0.1); border: 1px solid rgba(37,211,102,0.2); border-radius: 12px; text-align: center; font-size: 12px;">
        <i class="fab fa-whatsapp" style="color: #25D366; margin-right: 6px;"></i>
        Click WhatsApp for instant response â€¢ 24/7 Available
      </div>
    </div>

    <!-- Footer -->
    <footer style="text-align: center; color: #6b7280; font-size: 11px; padding: 8px;">
      <p>Â© 2024 VinnyConnect. All rights reserved.</p>
      <p style="margin-top: 4px;">Paybill: <span style="color: #00ff88; font-weight: bold;">0768359087</span> | 24/7 Support | Smart WiFi System</p>
    </footer>
  </div>

  <!-- Processing Modal -->
  <div id="processingModal" class="modal">
    <div class="modal-content" style="text-align: center;">
      <div class="spinner" style="margin: 0 auto 16px;"></div>
      <h3 style="font-size: 18px; font-weight: bold; background: linear-gradient(135deg, #00ff88, #00ccff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 4px;">Processing Payment</h3>
      <p style="color: #9ca3af; font-size: 13px;" id="processingMessage">Initiating transaction...</p>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="successModal" class="modal">
    <div class="modal-content" style="text-align: center;">
      <div style="width: 64px; height: 64px; border-radius: 50%; background: linear-gradient(135deg, #00ff88, #00ccff); display: flex; align-items: center; justify-content: center; font-size: 28px; margin: 0 auto 16px;">
        <i class="fas fa-check" style="color: black;"></i>
      </div>
      <h3 style="font-size: 20px; font-weight: bold; color: #00ff88; margin-bottom: 4px;">Payment Successful!</h3>
      <p style="color: #9ca3af; font-size: 13px; margin-bottom: 16px;">Your WiFi access is now active</p>
      
      <div style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 16px; padding: 12px; margin-bottom: 16px; text-align: left;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
          <span style="color: #9ca3af; font-size: 11px;">Plan:</span>
          <span style="font-weight: bold; color: #00ff88; font-size: 12px;" id="successPlan">-</span>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
          <span style="color: #9ca3af; font-size: 11px;">Devices:</span>
          <span style="font-weight: bold; font-size: 12px;" id="successDevices">-</span>
        </div>
        <div style="display: flex; justify-content: space-between;">
          <span style="color: #9ca3af; font-size: 11px;">Phone:</span>
          <span style="font-weight: bold; font-size: 12px;" id="successPhone">-</span>
        </div>
      </div>

      <div class="connection-bar" style="justify-content: center; margin-bottom: 16px;">
        <div class="status-dot"></div>
        <span style="font-size: 12px;">Connected to VinnyConnect_5G</span>
      </div>

      <button id="closeSuccess" class="btn-primary" style="padding: 12px;">
        Start Browsing
      </button>
    </div>
  </div>

  <!-- Admin Modal -->
  <div id="adminModal" class="modal">
    <div class="modal-content">
      <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
        <h3 style="font-size: 18px; font-weight: bold;">Admin Panel</h3>
        <button id="closeAdminModal" style="background: transparent; border: none; color: #9ca3af; cursor: pointer;">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 16px;">
        <div style="padding: 12px; background: rgba(0,0,0,0.3); border-radius: 12px;">
          <div style="font-size: 10px; color: #9ca3af;">Active Users</div>
          <div style="font-size: 20px; font-weight: bold;">24</div>
        </div>
        <div style="padding: 12px; background: rgba(0,0,0,0.3); border-radius: 12px;">
          <div style="font-size: 10px; color: #9ca3af;">Bandwidth</div>
          <div style="font-size: 20px; font-weight: bold;">78%</div>
        </div>
      </div>

      <div>
        <label style="display: block; font-size: 12px; color: #9ca3af; margin-bottom: 6px;">Generate Voucher</label>
        <select id="voucherType" class="input-field" style="margin-bottom: 8px;">
          <option value="19">2 Hours (19 KES)</option>
          <option value="29">12 Hours (29 KES)</option>
          <option value="39">24 Hours (39 KES)</option>
          <option value="200">1 Week (200 KES)</option>
        </select>
        <button id="generateVoucher" class="btn-primary" style="padding: 10px;">
          Generate Voucher
        </button>
        <div id="generatedVoucher" style="margin-top: 12px; padding: 10px; background: rgba(0,0,0,0.4); border-radius: 12px; text-align: center; font-family: monospace; font-size: 14px; display: none;"></div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize particles
      function createParticles() {
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 40; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.width = `${Math.random() * 3 + 1}px`;
          particle.style.height = particle.style.width;
          particle.style.left = `${Math.random() * 100}%`;
          particle.style.animationDelay = `${Math.random() * 20}s`;
          particle.style.animationDuration = `${Math.random() * 15 + 15}s`;
          particlesContainer.appendChild(particle);
        }
      }
      createParticles();

      // State
      let currentPlan = {
        amount: null,
        duration: null,
        devices: null
      };
      let selectedNetwork = 'mpesa';
      let phoneNumber = '';
      let pinCode = '';
      let dataSaverMode = false;

      // DOM Elements
      const planCards = document.querySelectorAll('.plan-card');
      const selectedPlanDiv = document.getElementById('selectedPlan');
      const selectedDurationSpan = document.getElementById('selectedDuration');
      const selectedAmountSpan = document.getElementById('selectedAmount');
      
      // Popup Elements
      const popup = document.getElementById('paymentPopup');
      const overlay = document.getElementById('popupOverlay');
      const closePopup = document.getElementById('closePopup');
      const popupPlanDetails = document.getElementById('popupPlanDetails');
      const popupPlanAmount = document.getElementById('popupPlanAmount');
      const popupPhoneInput = document.getElementById('popupPhoneInput');
      const popupContinueBtn = document.getElementById('popupContinueBtn');
      const popupPayBtn = document.getElementById('popupPayBtn');
      const popupPinSection = document.getElementById('popupPinSection');
      const popupPinInput = document.getElementById('popupPinInput');
      const pinBoxes = document.querySelectorAll('#paymentPopup .pin-box');
      const popupMpesa = document.getElementById('popupMpesa');
      const popupAirtel = document.getElementById('popupAirtel');
      const stkSimulation = document.getElementById('stkSimulation');

      // Modals
      const processingModal = document.getElementById('processingModal');
      const successModal = document.getElementById('successModal');
      const notification = document.getElementById('notification');
      const notificationMessage = document.getElementById('notificationMessage');

      // Category buttons
      const categoryBtns = document.querySelectorAll('.category-btn');

      // Category filter
      categoryBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const category = btn.dataset.category;
          
          categoryBtns.forEach(b => {
            b.style.background = 'transparent';
            b.style.color = 'white';
          });
          
          btn.style.background = '#00ff88';
          btn.style.color = 'black';

          planCards.forEach(card => {
            if (category === 'all' || card.dataset.category === category) {
              card.style.display = 'block';
            } else {
              card.style.display = 'none';
            }
          });
        });
      });

      // Data Saver Toggle
      const dataSaverToggle = document.getElementById('dataSaverToggle');
      dataSaverToggle.addEventListener('click', () => {
        dataSaverMode = !dataSaverMode;
        dataSaverToggle.classList.toggle('active');
        showNotification(`Data Saver Mode ${dataSaverMode ? 'ON' : 'OFF'}`, 'info');
      });

      // Click on any plan
      planCards.forEach(card => {
        card.addEventListener('click', () => {
          planCards.forEach(c => c.classList.remove('selected'));
          card.classList.add('selected');

          currentPlan.amount = card.dataset.plan;
          currentPlan.duration = card.dataset.duration;
          currentPlan.devices = card.dataset.devices;

          selectedDurationSpan.textContent = currentPlan.duration;
          selectedAmountSpan.textContent = currentPlan.amount;
          selectedPlanDiv.style.display = 'block';

          popupPlanDetails.textContent = `${currentPlan.duration} (${currentPlan.devices} device${currentPlan.devices > 1 ? 's' : ''})`;
          popupPlanAmount.textContent = `${currentPlan.amount} KES`;

          // Reset popup
          popupPhoneInput.value = '';
          popupPinInput.value = '';
          pinCode = '';
          phoneNumber = '';
          popupContinueBtn.disabled = true;
          popupContinueBtn.style.display = 'block';
          popupPayBtn.style.display = 'none';
          popupPinSection.style.display = 'none';
          stkSimulation.classList.remove('active');
          
          pinBoxes.forEach(box => {
            box.textContent = '';
            box.classList.remove('filled');
          });

          popup.classList.add('active');
          overlay.classList.add('active');
        });
      });

      // Close popup
      closePopup.addEventListener('click', () => {
        popup.classList.remove('active');
        overlay.classList.remove('active');
        stkSimulation.classList.remove('active');
      });

      overlay.addEventListener('click', () => {
        popup.classList.remove('active');
        overlay.classList.remove('active');
        stkSimulation.classList.remove('active');
      });

      // Network selection
      popupMpesa.addEventListener('click', () => {
        popupMpesa.classList.add('active');
        popupAirtel.classList.remove('active');
        selectedNetwork = 'mpesa';
      });

      popupAirtel.addEventListener('click', () => {
        popupAirtel.classList.add('active');
        popupMpesa.classList.remove('active');
        selectedNetwork = 'airtel';
      });

      // Phone input
      popupPhoneInput.addEventListener('input', (e) => {
        const value = e.target.value.replace(/[^0-9]/g, '').slice(0, 9);
        e.target.value = value;
        phoneNumber = value;
        popupContinueBtn.disabled = value.length !== 9;
      });

      // Send STK Push
      popupContinueBtn.addEventListener('click', () => {
        if (phoneNumber.length !== 9) {
          showNotification('Please enter valid 9-digit number', 'error');
          return;
        }

        popupContinueBtn.style.display = 'none';
        stkSimulation.classList.add('active');

        setTimeout(() => {
          stkSimulation.classList.remove('active');
          popupPinSection.style.display = 'block';
          popupPayBtn.style.display = 'block';
          showNotification('STK Push sent to your phone', 'success');
          setTimeout(() => popupPinInput.focus(), 100);
        }, 3000);
      });

      // PIN input
      popupPinInput.addEventListener('input', (e) => {
        const value = e.target.value.replace(/[^0-9]/g, '').slice(0, 4);
        e.target.value = value;
        pinCode = value;

        pinBoxes.forEach((box, index) => {
          if (index < value.length) {
            box.textContent = 'â€¢';
            box.classList.add('filled');
          } else {
            box.textContent = '';
            box.classList.remove('filled');
          }
        });
      });

      // Confirm payment
      popupPayBtn.addEventListener('click', () => {
        if (pinCode.length !== 4) {
          showNotification('Please enter 4-digit PIN', 'error');
          return;
        }

        popup.classList.remove('active');
        overlay.classList.remove('active');
        
        processingModal.classList.add('active');
        document.getElementById('processingMessage').textContent = 
          `Processing ${currentPlan.amount} KES via ${selectedNetwork === 'mpesa' ? 'M-Pesa' : 'Airtel'}...`;

        setTimeout(() => {
          processingModal.classList.remove('active');

          document.getElementById('successPlan').textContent = `${currentPlan.amount} KES - ${currentPlan.duration}`;
          document.getElementById('successDevices').textContent = `${currentPlan.devices} Device(s)`;
          document.getElementById('successPhone').textContent = `+254 ${phoneNumber}`;

          successModal.classList.add('active');

          startConnectionTimer(currentPlan.duration);
          updateUsageStats(currentPlan.duration);
          showCelebration();
          showNotification(`Payment successful! WiFi activated.`, 'success');
        }, 1500);
      });

      // Close success modal
      document.getElementById('closeSuccess').addEventListener('click', () => {
        successModal.classList.remove('active');
      });

      // Voucher
      document.getElementById('applyVoucher').addEventListener('click', () => {
        const code = document.getElementById('voucherInput').value.trim();
        if (!code) {
          showNotification('Enter voucher code', 'error');
          return;
        }
        showNotification('Voucher activated! 24-hour access', 'success');
        document.getElementById('voucherInput').value = '';
        startConnectionTimer('24 Hours');
        showCelebration();
      });

      // Connection timer
      function startConnectionTimer(duration) {
        const timerElement = document.getElementById('connectionTime');
        const connectionDot = document.getElementById('connectionDot');
        
        let seconds = 2 * 3600;
        if (duration.includes('Hour')) seconds = parseInt(duration) * 3600;
        else if (duration.includes('Week')) seconds = 7 * 24 * 3600;
        else if (duration.includes('Month')) seconds = 30 * 24 * 3600;
        
        if (window.connectionTimer) clearInterval(window.connectionTimer);
        
        connectionDot.style.background = '#00ff88';
        
        window.connectionTimer = setInterval(() => {
          const hours = Math.floor(seconds / 3600);
          const minutes = Math.floor((seconds % 3600) / 60);
          const secs = seconds % 60;
          
          timerElement.textContent = `Connected Â· ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
          
          if (seconds <= 300) connectionDot.style.background = '#ff4444';
          else if (seconds <= 1800) connectionDot.style.background = '#ffaa00';
          
          if (seconds <= 0) {
            clearInterval(window.connectionTimer);
            showNotification('Session expired', 'warning');
          }
          
          seconds--;
        }, 1000);

        updateSpeed();
      }

      // Update usage stats
      function updateUsageStats(duration) {
        document.getElementById('timeLeft').textContent = duration;
        document.getElementById('devicesCount').textContent = currentPlan.devices;
        
        let dataUsed = 0;
        setInterval(() => {
          dataUsed += Math.random() * 0.1;
          document.getElementById('dataUsed').textContent = dataUsed.toFixed(1) + ' MB';
        }, 5000);
      }

      // Speed
      function updateSpeed() {
        const speedDisplay = document.getElementById('speedDisplay');
        const speedMeter = document.getElementById('speedMeter');
        
        setInterval(() => {
          let speed = dataSaverMode ? 
            Math.floor(Math.random() * 20) + 30 : 
            Math.floor(Math.random() * 40) + 60;
          speedDisplay.textContent = `${speed} Mbps`;
          speedMeter.style.width = `${speed}%`;
        }, 3000);
      }

      // Celebration
      function showCelebration() {
        const colors = ['#00ff88', '#00ccff', '#9933ff', '#ffaa00'];
        for (let i = 0; i < 40; i++) {
          setTimeout(() => {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.width = (Math.random() * 8 + 3) + 'px';
            confetti.style.height = confetti.style.width;
            confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 3000);
          }, i * 20);
        }
      }

      // Notification
      function showNotification(message, type = 'info') {
        notificationMessage.textContent = message;
        notification.className = `notification ${type} show`;
        setTimeout(() => notification.classList.remove('show'), 3000);
      }

      // Admin panel
      const adminToggle = document.getElementById('adminToggle');
      const adminModal = document.getElementById('adminModal');
      const closeAdminModal = document.getElementById('closeAdminModal');
      const generateVoucher = document.getElementById('generateVoucher');
      const generatedVoucher = document.getElementById('generatedVoucher');

      adminToggle.addEventListener('click', () => adminModal.classList.add('active'));
      closeAdminModal.addEventListener('click', () => adminModal.classList.remove('active'));

      generateVoucher.addEventListener('click', () => {
        const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
        let code = '';
        for (let i = 0; i < 8; i++) code += chars[Math.floor(Math.random() * chars.length)];
        generatedVoucher.textContent = code;
        generatedVoucher.style.display = 'block';
        showNotification(`Voucher: ${code}`, 'success');
      });

      // Click outside modals
      window.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal')) e.target.classList.remove('active');
      });

      // Initialize speed
      updateSpeed();
    });
  </script>
</body>
</html>